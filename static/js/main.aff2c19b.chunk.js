(this.webpackJsonpwebgl=this.webpackJsonpwebgl||[]).push([[0],{13:function(t,e,r){t.exports=r(19)},18:function(t,e,r){},19:function(t,e,r){"use strict";r.r(e);var i=r(10),a=r.n(i),n=r(12),o=r.n(n),c=(r(18),r(2)),s=r(3),u=r(8),f=r(7),l=r(6),d=r(9),v=r(0);function h(t,e,r){var i=b(t,t.VERTEX_SHADER,e),a=b(t,t.FRAGMENT_SHADER,r),n=t.createProgram();return t.attachShader(n,i),t.attachShader(n,a),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)?n:(alert("Unable to initialize the shader program: "+t.getProgramInfoLog(n)),null)}function m(t,e){switch(e){case t.FLOAT:return"FLOAT";case t.FLOAT_VEC2:return"FLOAT_VEC2";case t.FLOAT_VEC3:return"FLOAT_VEC3";case t.FLOAT_VEC4:return"FLOAT_VEC4";case t.INT:return"INT";case t.INT_VEC2:return"INT_VEC2";case t.INT_VEC3:return"INT_VEC3";case t.INT_VEC4:return"INT_VEC4";case t.BOOL:return"BOOL";case t.BOOL_VEC2:return"BOOL_VEC2";case t.BOOL_VEC3:return"BOOL_VEC3";case t.BOOL_VEC4:return"BOOL_VEC4";case t.FLOAT_MAT2:return"FLOAT_MAT2";case t.FLOAT_MAT3:return"FLOAT_MAT3";case t.FLOAT_MAT4:return"FLOAT_MAT4";case t.SAMPLER_2D:return"SAMPLER_2D";case t.SAMPLER_CUBE:return"SAMPLER_CUBE";default:return"UNKNOWN"}}function b(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(alert("An error occurred compiling the shaders: "+t.getShaderInfoLog(i)),t.deleteShader(i),null)}function x(t,e){var r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var i=t.RGBA,a=t.RGBA,n=t.UNSIGNED_BYTE,o=new Uint8Array([0,0,255,255]);t.texImage2D(t.TEXTURE_2D,0,i,1,1,0,a,n,o);var c=new Image;return c.onload=function(){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,i,a,n,c),A(c.width)&&A(c.height)?t.generateMipmap(t.TEXTURE_2D):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR))},c.src=e,r}function A(t){return 0===(t&t-1)}function g(t){t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}var L=[{x:-1,y:0},{x:0,y:-1},{x:1,y:0},{x:0,y:1}];function R(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,i=function(t){c[t.y][t.x]=0},a=function(t,e){if(!n(o(t,e,3)))return!1;var r=o(t,e,2);return 1===c[r.y][r.x]},n=function(r){return!(r.x<0||r.y<0||r.x>=t||r.y>=e)},o=function(t,e,r){return{x:t.x+e.x*r,y:t.y+e.y*r}},c=[],s=0;s<e;s++)c.push(new Array(t).fill(1));var u,f={x:1,y:1},l=[];for(i(f),l.push(f);l.length>0;){for(var d=l[l.length-1],v=[],h=0;h<L.length;h++){var m=L[h];a(d,m)&&v.push(m)}if(v.length>0){var b=void 0;b=v.includes(u)&&Math.random()>r?u:v[Math.floor(Math.random()*v.length)],i(o(d,b,1)),i(o(d,b,2)),l.push(o(d,b,2)),u=b}else l.pop(),u=null}return{width:t,height:e,data:c}}var _=function(){function t(){Object(c.a)(this,t),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this)}return Object(s.a)(t,[{key:"initScene",value:function(t){var e=h(t,"\n    attribute vec4 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    varying lowp vec4 vColor;\n\n    void main(void) {\n      gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n      vColor = aVertexColor;\n    }\n  ","\n    varying lowp vec4 vColor;\n\n    void main(void) {\n      gl_FragColor = vColor;\n    }\n  "),r={program:e,attribLocations:{vertexPosition:t.getAttribLocation(e,"aVertexPosition"),vertexColor:t.getAttribLocation(e,"aVertexColor")},uniformLocations:{projectionMatrix:t.getUniformLocation(e,"uProjectionMatrix"),modelViewMatrix:t.getUniformLocation(e,"uModelViewMatrix")}},i=this._initBuffers(t);this.scene={programInfo:r,buffers:i,squareRotation:0}}},{key:"drawScene",value:function(t,e){var r=this.scene,i=r.programInfo,a=r.buffers;g(t);var n=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,a.color),t.vertexAttribPointer(i.attribLocations.vertexColor,4,n,!1,0,0),t.enableVertexAttribArray(i.attribLocations.vertexColor);var o=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,a.position),t.vertexAttribPointer(i.attribLocations.vertexPosition,2,o,!1,0,0),t.enableVertexAttribArray(i.attribLocations.vertexPosition);var c=45*Math.PI/180,s=t.canvas.clientWidth/t.canvas.clientHeight,u=v.a();v.d(u,c,s,.1,100);var f=v.a();v.f(f,f,[-0,0,-6]),v.e(f,f,r.squareRotation,[0,0,1]),t.useProgram(i.program),t.uniformMatrix4fv(i.uniformLocations.projectionMatrix,!1,u),t.uniformMatrix4fv(i.uniformLocations.modelViewMatrix,!1,f);t.drawArrays(t.TRIANGLE_STRIP,0,4),r.squareRotation+=e}},{key:"_initBuffers",value:function(t){var e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW);var r=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,0,0,1,0,1,0,1,0,0,1,1]),t.STATIC_DRAW),{position:e,color:r}}}]),t}(),E=function(){function t(){Object(c.a)(this,t),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this)}return Object(s.a)(t,[{key:"initScene",value:function(t){var e=h(t,"\n    attribute vec4 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    varying lowp vec4 vColor;\n\n    void main(void) {\n      gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n      vColor = aVertexColor;\n    }\n  ","\n    varying lowp vec4 vColor;\n\n    void main(void) {\n      gl_FragColor = vColor;\n    }\n  "),r={program:e,attribLocations:{vertexPosition:t.getAttribLocation(e,"aVertexPosition"),vertexColor:t.getAttribLocation(e,"aVertexColor")},uniformLocations:{projectionMatrix:t.getUniformLocation(e,"uProjectionMatrix"),modelViewMatrix:t.getUniformLocation(e,"uModelViewMatrix")}},i=this._initBuffers(t);this.scene={programInfo:r,buffers:i,cubeRotation:0}}},{key:"drawScene",value:function(t,e){var r=this.scene,i=r.programInfo,a=r.buffers;g(t);var n=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,a.position),t.vertexAttribPointer(i.attribLocations.vertexPosition,3,n,!1,0,0),t.enableVertexAttribArray(i.attribLocations.vertexPosition);var o=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,a.color),t.vertexAttribPointer(i.attribLocations.vertexColor,4,o,!1,0,0),t.enableVertexAttribArray(i.attribLocations.vertexColor),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a.indices);var c=45*Math.PI/180,s=t.canvas.clientWidth/t.canvas.clientHeight,u=v.a();v.d(u,c,s,.1,100);var f=v.a();v.f(f,f,[-0,0,-6]),v.e(f,f,r.cubeRotation,[0,0,1]),v.e(f,f,.7*r.cubeRotation,[0,1,0]),t.useProgram(i.program),t.uniformMatrix4fv(i.uniformLocations.projectionMatrix,!1,u),t.uniformMatrix4fv(i.uniformLocations.modelViewMatrix,!1,f);var l=t.UNSIGNED_SHORT;t.drawElements(t.TRIANGLES,36,l,0),r.cubeRotation+=e}},{key:"_initBuffers",value:function(t){var e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),t.STATIC_DRAW);for(var r=[[1,1,1,1],[1,0,0,1],[0,1,0,1],[0,0,1,1],[1,1,0,1],[1,0,1,1]],i=[],a=0;a<r.length;++a){var n=r[a];i=i.concat(n,n,n,n)}var o=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,o),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW);var c=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),t.STATIC_DRAW),{position:e,color:o,indices:c}}}]),t}(),T=r(4),p=r(5),w=function(){function t(){Object(c.a)(this,t)}return Object(s.a)(t,[{key:"_initModel",value:function(t){var e,r,i,a=this,n=t.gl,o=t.geometry;t.texture&&((e={}).diffuse=x(n,t.texture.diffuse),e.normal=x(n,t.texture.normal)),Promise.all([fetch(t.shader.vertex).then((function(t){return t.text()})).then((function(t){return r=t})),fetch(t.shader.fragment).then((function(t){return t.text()})).then((function(t){return i=t}))]).then((function(){var t=h(n,r,i),c=function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=[],a=0;a<r;a++){var n=t.getActiveAttrib(e,a);i.push({name:n.name,type:m(t,n.type)})}for(var o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),c=[],s=0;s<o;s++){var u=t.getActiveUniform(e,s);c.push({name:u.name,type:m(t,u.type)})}return{attributes:i,uniforms:c}}(n,t),s={program:t,attribLocations:{},uniformLocations:{}};c.attributes.forEach((function(e){var r=n.getAttribLocation(t,e.name);switch(e.name){case"aVertexPosition":s.attribLocations.vertexPosition=r;break;case"aVertexNormal":s.attribLocations.vertexNormal=r;break;case"aVertexTangent":s.attribLocations.vertexTangent=r;break;case"aVertexBitangent":s.attribLocations.vertexBitangent=r;break;case"aTextureCoord":s.attribLocations.vertexTextureCoord=r;break;default:alert("unknown attribute of "+e.name)}})),c.uniforms.forEach((function(e){var r=n.getUniformLocation(t,e.name);switch(e.name){case"uModelMatrix":s.uniformLocations.modelMatrix=r;break;case"uViewMatrix":s.uniformLocations.viewMatrix=r;break;case"uNormalMatrix":s.uniformLocations.normalMatrix=r;break;case"uProjectionMatrix":s.uniformLocations.projectionMatrix=r;break;case"uSamplerNormal":s.uniformLocations.textureNormal=r;break;case"uSamplerDiffuse":s.uniformLocations.textureDiffuse=r;break;case"uShowTexture":s.uniformLocations.textureShow=r;break;case"uPerPixel":s.uniformLocations.perPixel=r;break;case"uCameraPos":s.uniformLocations.cameraPosition=r;break;case"uAmbientLight":s.uniformLocations.ambientLight=r;break;case"uDirectionalLight.color":s.uniformLocations.directionalLight||(s.uniformLocations.directionalLight={}),s.uniformLocations.directionalLight.color=r;break;case"uDirectionalLight.direction":s.uniformLocations.directionalLight||(s.uniformLocations.directionalLight={}),s.uniformLocations.directionalLight.direction=r;break;case"uPointLight.color":s.uniformLocations.pointLight||(s.uniformLocations.pointLight={}),s.uniformLocations.pointLight.color=r;break;case"uPointLight.position":s.uniformLocations.pointLight||(s.uniformLocations.pointLight={}),s.uniformLocations.pointLight.position=r;break;default:alert("unknown uniform of "+e.name)}}));var u=a._initBuffers(n,s,o);a.model={shader:s,buffers:u,texture:e}}))}},{key:"_initBuffers",value:function(t,e,r){var i=[],a=[],n=[],o=[],c=[],s=[],u=p.b(),f=p.b(),l=p.b(),d=0;r({addSquare:function(t,r,v,h){i.push.apply(i,Object(T.a)(t).concat(Object(T.a)(r),Object(T.a)(v),Object(T.a)(h))),s.push(d+0,d+1,d+2,d+0,d+3,d+1),d+=4,(e.attribLocations.vertexNormal||e.attribLocations.vertexTangent||e.attribLocations.vertexBitangent)&&(p.e(f,h,t),p.e(l,t,v),e.attribLocations.vertexNormal&&(p.c(u,f,l),p.d(u,u),a.push.apply(a,Object(T.a)(u).concat(Object(T.a)(u),Object(T.a)(u),Object(T.a)(u)))),e.attribLocations.vertexTangent&&(p.d(f,f),n.push.apply(n,Object(T.a)(f).concat(Object(T.a)(f),Object(T.a)(f),Object(T.a)(f)))),e.attribLocations.vertexBitangent&&(p.d(l,l),o.push.apply(o,Object(T.a)(l).concat(Object(T.a)(l),Object(T.a)(l),Object(T.a)(l))))),e.attribLocations.vertexTextureCoord&&c.push(0,0,1,1,0,1,1,0)}});var v=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,v),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW);var h=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(s),t.STATIC_DRAW);var m={position:v,indices:h,vertexCount:s.length};if(e.attribLocations.vertexNormal){var b=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,b),t.bufferData(t.ARRAY_BUFFER,new Float32Array(a),t.STATIC_DRAW),m.normal=b}if(e.attribLocations.vertexTangent){var x=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,x),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW),m.tangent=x}if(e.attribLocations.vertexBitangent){var A=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,A),t.bufferData(t.ARRAY_BUFFER,new Float32Array(o),t.STATIC_DRAW),m.bitangent=A}if(e.attribLocations.vertexTextureCoord){var g=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,g),t.bufferData(t.ARRAY_BUFFER,new Float32Array(c),t.STATIC_DRAW),m.textureCoord=g}return m}},{key:"_drawModel",value:function(t){if(t.model){var e=t.gl,r=t.model,i=t.projectionMatrix,a=t.viewMatrix,n=t.modelMatrix,o=r.shader,c=r.buffers,s=r.texture,u=e.FLOAT;if(e.bindBuffer(e.ARRAY_BUFFER,c.position),e.vertexAttribPointer(o.attribLocations.vertexPosition,3,u,!1,0,0),e.enableVertexAttribArray(o.attribLocations.vertexPosition),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,c.indices),o.attribLocations.vertexNormal){var f=e.FLOAT;e.bindBuffer(e.ARRAY_BUFFER,c.normal),e.vertexAttribPointer(o.attribLocations.vertexNormal,3,f,!1,0,0),e.enableVertexAttribArray(o.attribLocations.vertexNormal)}if(o.attribLocations.vertexTangent){var l=e.FLOAT;e.bindBuffer(e.ARRAY_BUFFER,c.tangent),e.vertexAttribPointer(o.attribLocations.vertexTangent,3,l,!1,0,0),e.enableVertexAttribArray(o.attribLocations.vertexTangent)}if(o.attribLocations.vertexBitangent){var d=e.FLOAT;e.bindBuffer(e.ARRAY_BUFFER,c.bitangent),e.vertexAttribPointer(o.attribLocations.vertexBitangent,3,d,!1,0,0),e.enableVertexAttribArray(o.attribLocations.vertexBitangent)}if(o.attribLocations.vertexTextureCoord){var h=e.FLOAT;e.bindBuffer(e.ARRAY_BUFFER,c.textureCoord),e.vertexAttribPointer(o.attribLocations.vertexTextureCoord,2,h,!1,0,0),e.enableVertexAttribArray(o.attribLocations.vertexTextureCoord)}if(e.useProgram(o.program),e.uniformMatrix4fv(o.uniformLocations.projectionMatrix,!1,i),e.uniformMatrix4fv(o.uniformLocations.modelMatrix,!1,n),e.uniformMatrix4fv(o.uniformLocations.viewMatrix,!1,a),o.uniformLocations.normalMatrix){var m=v.a();v.b(m,n),v.g(m,m),e.uniformMatrix4fv(o.uniformLocations.normalMatrix,!1,m)}if(o.uniformLocations.textureShow&&e.uniform1i(o.uniformLocations.textureShow,t.textureShow),o.uniformLocations.perPixel&&e.uniform1i(o.uniformLocations.perPixel,t.perPixel),o.uniformLocations.ambientLight&&e.uniform3fv(o.uniformLocations.ambientLight,t.ambientLight),o.uniformLocations.directionalLight){var b=p.a(t.directionalLight.direction);p.d(b,b),e.uniform3fv(o.uniformLocations.directionalLight.color,t.directionalLight.color),e.uniform3fv(o.uniformLocations.directionalLight.direction,b)}o.uniformLocations.pointLight&&(e.uniform3fv(o.uniformLocations.pointLight.color,t.pointLight.color),e.uniform3fv(o.uniformLocations.pointLight.position,t.pointLight.position)),o.uniformLocations.cameraPosition&&e.uniform3fv(o.uniformLocations.cameraPosition,t.cameraPosition),o.uniformLocations.textureNormal&&(e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,s.normal),e.uniform1i(o.uniformLocations.textureNormal,0)),o.uniformLocations.textureDiffuse&&(e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,s.diffuse),e.uniform1i(o.uniformLocations.textureDiffuse,1));var x=c.vertexCount,A=e.UNSIGNED_SHORT;e.drawElements(e.TRIANGLES,x,A,0)}}}]),t}(),F=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(u.a)(this,Object(f.a)(e).call(this,t))).gl=t,r.draw=r.draw.bind(Object(l.a)(r)),r._initModel({gl:t,geometry:r._geometry,texture:{diffuse:"images/cubetexture.png"},shader:{vertex:"shaders/texturedcube/vertex.glsl",fragment:"shaders/texturedcube/fragment.glsl"}}),r}return Object(d.a)(e,t),Object(s.a)(e,[{key:"draw",value:function(t,e,r){this._drawModel({gl:this.gl,model:this.model,projectionMatrix:t,viewMatrix:e,modelMatrix:r})}},{key:"_geometry",value:function(t){var e=t.addSquare,r=[-1,-1,1],i=[1,1,1],a=[-1,1,1],n=[1,-1,1],o=[-1,-1,-1],c=[1,1,-1],s=[-1,1,-1],u=[1,-1,-1];e(r,i,a,n),e(u,s,c,o),e(o,a,s,r),e(n,c,i,u),e(o,n,r,u),e(c,a,i,s)}}]),e}(w),B=function(){function t(){Object(c.a)(this,t),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this)}return Object(s.a)(t,[{key:"initScene",value:function(t){var e=new F(t);this.scene={actors:[{model:e,location:[0,0,-6],rotations:[{angle:0,axis:[0,0,1],speed:1},{angle:0,axis:[0,1,0],speed:.7}]}],camera:[0,0,0]}}},{key:"drawScene",value:function(t,e){var r=this.scene;g(t);var i=45*Math.PI/180,a=t.canvas.clientWidth/t.canvas.clientHeight,n=v.a();v.d(n,i,a,.1,100);var o=v.a();v.f(o,o,r.camera),v.b(o,o);for(var c=0;c<r.actors.length;c++){var s=r.actors[c];this._renderActor(n,o,s),this._animateActor(e,s)}}},{key:"_renderActor",value:function(t,e,r){var i=r.model,a=v.a();v.f(a,a,r.location);for(var n=0;n<r.rotations.length;n++){var o=r.rotations[n];v.e(a,a,o.angle,o.axis)}i.draw(t,e,a)}},{key:"_animateActor",value:function(t,e){for(var r=0;r<e.rotations.length;r++){var i=e.rotations[r];i.angle+=t*i.speed}}}]),t}(),M=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(u.a)(this,Object(f.a)(e).call(this,t))).gl=t,r.draw=r.draw.bind(Object(l.a)(r)),r._initModel({gl:t,geometry:r._geometry,texture:{diffuse:"images/cubetexture.png"},shader:{vertex:"shaders/lightedcube/vertex.glsl",fragment:"shaders/lightedcube/fragment.glsl"}}),r}return Object(d.a)(e,t),Object(s.a)(e,[{key:"draw",value:function(t,e,r,i){this._drawModel({gl:this.gl,model:this.model,projectionMatrix:t,viewMatrix:e,modelMatrix:r,ambientLight:[.3,.3,.3],directionalLight:{color:[.5,.5,.5],direction:[0,1,0]},pointLight:{color:[.7,.7,.7],position:[0,0,0]},cameraPosition:[0,0,0],perPixel:i})}},{key:"_geometry",value:function(t){var e=t.addSquare,r=[-1,-1,1],i=[1,1,1],a=[-1,1,1],n=[1,-1,1],o=[-1,-1,-1],c=[1,1,-1],s=[-1,1,-1],u=[1,-1,-1];e(r,i,a,n),e(u,s,c,o),e(o,a,s,r),e(n,c,i,u),e(o,n,r,u),e(c,a,i,s)}}]),e}(w),y=function(){function t(){Object(c.a)(this,t),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this)}return Object(s.a)(t,[{key:"initScene",value:function(t){var e=new M(t);this.scene={actors:[{model:e,location:[-2,0,-5.5],rotation:0,rotationSpeed:1,perPixel:!1},{model:e,location:[2,0,-5.5],rotation:0,rotationSpeed:1,perPixel:!0}],camera:[0,0,0],cameraDir:[0,0,2]}}},{key:"drawScene",value:function(t,e){var r=this.scene;g(t);var i=45*Math.PI/180,a=t.canvas.clientWidth/t.canvas.clientHeight,n=v.a();v.d(n,i,a,.1,100);var o=v.a();v.f(o,o,r.camera),v.b(o,o);for(var c=0;c<r.actors.length;c++){var s=r.actors[c];this._renderActor(n,o,s),this._animateActor(e,s)}r.camera[2]>16?(r.camera[2]=16,r.cameraDir[2]=-2):r.camera[2]<0&&(r.camera[2]=0,r.cameraDir[2]=2),r.camera[0]+=r.cameraDir[0]*e,r.camera[1]+=r.cameraDir[1]*e,r.camera[2]+=r.cameraDir[2]*e}},{key:"_renderActor",value:function(t,e,r){var i=r.model,a=v.a();v.f(a,a,r.location),v.e(a,a,r.rotation,[0,0,1]),v.e(a,a,.7*r.rotation,[0,1,0]),v.e(a,a,.3*r.rotation,[1,0,0]),i.draw(t,e,a,r.perPixel)}},{key:"_animateActor",value:function(t,e){e.rotation+=t*e.rotationSpeed}}]),t}(),C=function(){function t(e,r){Object(c.a)(this,t),this.gl=e,this.maze=r,this.draw=this.draw.bind(this);var i=this._initShaders(e);this.model={program:i,attribLocations:{vertexPosition:e.getAttribLocation(i,"aVertexPosition"),vertexColor:e.getAttribLocation(i,"aVertexColor")},uniformLocations:{projectionMatrix:e.getUniformLocation(i,"uProjectionMatrix"),modelViewMatrix:e.getUniformLocation(i,"uModelViewMatrix")},buffers:this._initBuffers(e,r)}}return Object(s.a)(t,[{key:"update",value:function(t){this._freeBuffers(this.gl,this.model.buffers),this.maze=t,this.model.buffers=this._initBuffers(this.gl,t)}},{key:"draw",value:function(t,e,r){var i=this.gl,a=this.model,n=this.model.buffers,o=i.FLOAT;i.bindBuffer(i.ARRAY_BUFFER,n.position),i.vertexAttribPointer(a.attribLocations.vertexPosition,3,o,!1,0,0),i.enableVertexAttribArray(a.attribLocations.vertexPosition);var c=i.FLOAT;i.bindBuffer(i.ARRAY_BUFFER,n.color),i.vertexAttribPointer(a.attribLocations.vertexColor,4,c,!1,0,0),i.enableVertexAttribArray(a.attribLocations.vertexColor),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n.indices);var s=v.a();v.c(s,e,r),i.useProgram(a.program),i.uniformMatrix4fv(a.uniformLocations.projectionMatrix,!1,t),i.uniformMatrix4fv(a.uniformLocations.modelViewMatrix,!1,s);var u=n.vertexCount,f=i.UNSIGNED_INT;i.drawElements(i.TRIANGLES,u,f,0)}},{key:"_initShaders",value:function(t){return h(t,"\n      attribute vec4 aVertexPosition;\n      attribute vec4 aVertexColor;\n\n      uniform mat4 uModelViewMatrix;\n      uniform mat4 uProjectionMatrix;\n\n      varying lowp vec4 vColor;\n\n      void main(void) {\n        gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n        vColor = aVertexColor;\n      }\n    ","\n      varying lowp vec4 vColor;\n\n      void main(void) {\n        gl_FragColor = vColor;\n      }\n    ")}},{key:"_initBuffers",value:function(t,e){for(var r=[],i=[],a=[],n=0,o=function(t,e,o,c,s,u){r.push(t,o,s,e,o,s,e,c,s,t,c,s),a.push(n+0,n+1,n+2,n+0,n+2,n+3),n+=4;for(var f=0;f<4;f++)for(var l=0;l<4;l++)i.push(u[l])},c=function(t,e,o,c,s,u){r.push(t,s,o,e,s,o,e,s,c,t,s,c),a.push(n+0,n+1,n+2,n+0,n+2,n+3),n+=4;for(var f=0;f<4;f++)for(var l=0;l<4;l++)i.push(u[l])},s=function(t,e,o,c,s,u){r.push(s,t,o,s,e,o,s,e,c,s,t,c),a.push(n+0,n+1,n+2,n+0,n+2,n+3),n+=4;for(var f=0;f<4;f++)for(var l=0;l<4;l++)i.push(u[l])},u=[.2,.2,.2,1],f=[.7,.7,.7,1],l=[.5,0,.5,1],d=[0,.5,0,1],v=[.5,0,0,1],h=[0,0,.5,1],m=-e.width/2,b=-e.height/2,x=0;x<e.height;x++)for(var A=0;A<e.width;A++){var g=A+m,L=g+1,R=x+b,_=R+1;0===e.data[x][A]?o(g,L,R,_,0,u):(o(g,L,R,_,1,f),0!==x&&0!==e.data[x-1][A]||c(g,L,0,1,R,l),0!==A&&0!==e.data[x][A-1]||s(_,R,0,1,g,v),x!==e.height-1&&0!==e.data[x+1][A]||c(L,g,0,1,_,d),A!==e.width-1&&0!==e.data[x][A+1]||s(R,_,0,1,L,h))}var E=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,E),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW);var T=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,T),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW);var p=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,p),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint32Array(a),t.STATIC_DRAW),{position:E,color:T,indices:p,vertexCount:a.length}}},{key:"_freeBuffers",value:function(t,e){t.deleteBuffer(e.position),t.deleteBuffer(e.color),t.deleteBuffer(e.indices)}}]),t}(),O=function(){function t(){Object(c.a)(this,t),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this),this.totalDelta=0}return Object(s.a)(t,[{key:"initScene",value:function(t){var e=2*Math.floor(45*Math.random())+11,r=R(e,e),i=new C(t,r);this.scene={actors:[{model:i,location:[0,0,-2*e],rotation:{angle:0,axis:[0,0,1],speed:.5}}],camera:[0,0,0],cameraDir:[0,0,8]}}},{key:"drawScene",value:function(t,e){var r=this.scene;g(t);var i=45*Math.PI/180,a=t.canvas.clientWidth/t.canvas.clientHeight,n=v.a();v.d(n,i,a,.1,500);var o=v.a();v.f(o,o,r.camera),v.b(o,o);for(var c=0;c<r.actors.length;c++){var s=r.actors[c];this._renderActor(n,o,s),this._animateActor(e,s)}}},{key:"_renderActor",value:function(t,e,r){var i=r.model,a=v.a();v.f(a,a,r.location),v.e(a,a,-45*(Math.PI/180),[1,0,0]),v.e(a,a,r.rotation.angle,r.rotation.axis),i.draw(t,e,a)}},{key:"_animateActor",value:function(t,e){if(e.rotation.angle+=t*e.rotation.speed,this.totalDelta+=t,this.totalDelta>=10){this.totalDelta-=10;var r=2*Math.floor(45*Math.random())+11,i=R(r,r);e.location[2]=-2*r,e.model.update(i)}}}]),t}(),S=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(u.a)(this,Object(f.a)(e).call(this,t))).gl=t,r.draw=r.draw.bind(Object(l.a)(r)),r._initModel({gl:t,geometry:r._geometry,texture:{diffuse:"images/Brick_Wall_017_basecolor.jpg",normal:"images/Brick_Wall_017_normal.jpg"},shader:{vertex:"shaders/brickwall/vertex.glsl",fragment:"shaders/brickwall/fragment.glsl"}}),r}return Object(d.a)(e,t),Object(s.a)(e,[{key:"draw",value:function(t,e,r){this._drawModel({gl:this.gl,model:this.model,projectionMatrix:t,viewMatrix:e,modelMatrix:r,textureShow:1,ambientLight:[.2,.2,.2],directionalLight:{color:[1,1,1],direction:[0,1,0]},pointLight:{color:[1,1,1],position:[0,0,0]},cameraPosition:[0,0,0]})}},{key:"_geometry",value:function(t){var e=t.addSquare,r=[-1,-1,1],i=[1,1,1],a=[-1,1,1],n=[1,-1,1],o=[-1,-1,-1],c=[1,1,-1],s=[-1,1,-1],u=[1,-1,-1];e(r,i,a,n),e(u,s,c,o),e(o,a,s,r),e(n,c,i,u),e(o,n,r,u),e(c,a,i,s)}}]),e}(w),P=function(){function t(){Object(c.a)(this,t),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this)}return Object(s.a)(t,[{key:"initScene",value:function(t){var e=new S(t);this.scene={actors:[{model:e,location:[0,0,-5.5],rotations:[{angle:0,axis:[0,1,0],speed:.4},{angle:0,axis:[1,0,0],speed:.2}]}],camera:[0,0,0]}}},{key:"drawScene",value:function(t,e){var r=this.scene;g(t);var i=45*Math.PI/180,a=t.canvas.clientWidth/t.canvas.clientHeight,n=v.a();v.d(n,i,a,.1,100);var o=v.a();v.f(o,o,r.camera),v.b(o,o);for(var c=0;c<r.actors.length;c++){var s=r.actors[c];this._renderActor(n,o,s),this._animateActor(e,s)}}},{key:"_renderActor",value:function(t,e,r){var i=r.model,a=v.a();v.f(a,a,r.location);for(var n=0;n<r.rotations.length;n++){var o=r.rotations[n];v.e(a,a,o.angle,o.axis)}i.draw(t,e,a)}},{key:"_animateActor",value:function(t,e){for(var r=0;r<e.rotations.length;r++){var i=e.rotations[r];i.angle+=t*i.speed}}}]),t}(),U=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(u.a)(this,Object(f.a)(e).call(this,t))).onClickCanvas=r.onClickCanvas.bind(Object(l.a)(r)),r.renderCanvas=r.renderCanvas.bind(Object(l.a)(r)),r.scenes=[{init:!1,render:new _},{init:!1,render:new E},{init:!1,render:new B},{init:!1,render:new y},{init:!1,render:new O},{init:!1,render:new P}],r.sceneIndex=r.scenes.length-1,r}return Object(d.a)(e,t),Object(s.a)(e,[{key:"componentDidMount",value:function(){var t=this.canvas,e=t.getBoundingClientRect();if(t.width=e.width,t.height=e.height,this.gl=t.getContext("webgl"),null===this.gl)alert("Unable to initialize WebGL. Your browser or machine may not support it.");else{this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK),this.gl.getExtension("OES_element_index_uint");var r=this.scenes[this.sceneIndex];r.init||(r.init=!0,r.render.initScene(this.gl)),this.frame=window.requestAnimationFrame(this.renderCanvas)}}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.frame)}},{key:"onClickCanvas",value:function(t){t.preventDefault(),this.sceneIndex=(this.sceneIndex+1)%this.scenes.length;var e=this.scenes[this.sceneIndex];e.init||(e.init=!0,e.render.initScene(this.gl))}},{key:"renderCanvas",value:function(t){t*=.001,this.timeStamp||(this.timeStamp=t);var e=t-this.timeStamp;this.timeStamp=t,this.scenes[this.sceneIndex].render.drawScene(this.gl,e),this.frame=window.requestAnimationFrame(this.renderCanvas)}},{key:"render",value:function(){var t=this;return a.a.createElement("div",{className:"screen"},a.a.createElement("canvas",{className:"canvas",ref:function(e){return t.canvas=e},onClick:this.onClickCanvas}))}}]),e}(a.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(U,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.aff2c19b.chunk.js.map