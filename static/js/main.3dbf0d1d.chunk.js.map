{"version":3,"sources":["utility.js","ColoredSquareScene.js","ColoredCubeScene.js","Model.js","TexturedCubeModel.js","TexturedCubeScene.js","LightedCubeModel.js","LightedCubeScene.js","MazeModel.js","MazeScene.js","BrickWallModel.js","BrickWallScene.js","MaterialModel.js","MaterialScene.js","App.js","serviceWorker.js","index.js"],"names":["initShaderProgram","gl","vsSource","fsSource","vertexShader","_loadShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","alert","getProgramInfoLog","_typeToString","type","FLOAT","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT","INT_VEC2","INT_VEC3","INT_VEC4","BOOL","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","SAMPLER_2D","SAMPLER_CUBE","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","loadTexture","url","texture","createTexture","bindTexture","TEXTURE_2D","internalFormat","RGBA","srcFormat","srcType","UNSIGNED_BYTE","pixel","Uint8Array","texImage2D","image","Image","onload","_isPowerOf2","width","height","generateMipmap","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","src","value","clearScreen","clearColor","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","_directions","x","y","generateMaze","windiness","carve","pos","data","canCarve","dir","isInBounds","addDir","nxt","len","push","Array","fill","lastDir","start","cells","length","cell","posCells","i","includes","Math","random","floor","pop","_materials","emerald","ambient","diffuse","specular","shininess","jade","obsidian","pearl","ruby","turquoise","brass","bronze","chrome","copper","gold","silver","blackPlastic","cyanPlastic","greenPlastic","redPlastic","whitePlastic","yellowPlastic","blackRubber","cyanRubber","greenRubber","redRubber","whiteRubber","yellowRubber","getMaterial","name","ColoredSquareScene","this","initScene","bind","drawScene","programInfo","program","attribLocations","vertexPosition","getAttribLocation","vertexColor","uniformLocations","projectionMatrix","getUniformLocation","modelViewMatrix","buffers","_initBuffers","scene","squareRotation","deltaTime","bindBuffer","ARRAY_BUFFER","color","vertexAttribPointer","enableVertexAttribArray","position","fieldOfView","PI","aspect","canvas","clientWidth","clientHeight","mat4","useProgram","uniformMatrix4fv","drawArrays","TRIANGLE_STRIP","createBuffer","bufferData","Float32Array","STATIC_DRAW","ColoredCubeScene","cubeRotation","ELEMENT_ARRAY_BUFFER","indices","UNSIGNED_SHORT","drawElements","TRIANGLES","positionBuffer","faceColors","colors","j","c","concat","colorBuffer","indexBuffer","Uint16Array","Model","options","geometry","normal","Promise","all","fetch","vertex","then","response","text","fragment","shaderParameters","attributeCount","ACTIVE_ATTRIBUTES","attributes","attribute","getActiveAttrib","uniformCount","ACTIVE_UNIFORMS","uniforms","uniform","getActiveUniform","getShaderParameters","forEach","location","vertexNormal","vertexTangent","vertexBitangent","vertexTextureCoord","modelMatrix","viewMatrix","normalMatrix","textureNormal","textureDiffuse","textureShow","perPixel","cameraPosition","ambientLight","directionalLight","direction","pointLight","lights","material","model","positions","normals","tangents","bitangents","textureCoordinates","vec3","tangent","bitangent","offset","addFace","vertices","face","c0","c1","c2","c3","addSquare2","c4","addPentagon","addSquare","addFaces","faces","vertexCount","normalBuffer","tangentBuffer","bitangentBuffer","textureCoordBuffer","textureCoord","uniform1i","uniform3fv","light","uniform1f","activeTexture","TEXTURE0","TEXTURE1","TexturedCubeModel","draw","_initModel","_geometry","_drawModel","f0","f1","f2","f3","b0","b1","b2","b3","TexturedCubeScene","actors","rotations","angle","axis","speed","camera","actor","_renderActor","_animateActor","rotation","LightedCubeModel","LightedCubeScene","rotationSpeed","cameraDir","MazeModel","maze","_initShaders","_freeBuffers","UNSIGNED_INT","addSquareXY","left","right","top","bottom","base","addSquareXZ","addSquareYZ","floorColor","ceilingColor","wallColor_Top","wallColor_Bottom","wallColor_Left","wallColor_Right","ofs_x","ofs_y","Uint32Array","deleteBuffer","MazeScene","totalDelta","size","update","BrickWallModel","BrickWallScene","MaterialModel","shapeName","shape","s3","sqrt","s6","r","a","phi","b","getShape","MaterialScene","model4","model6","model8","model10","model12","model20","App","props","onClickCanvas","renderCanvas","scenes","init","render","sceneIndex","rect","getBoundingClientRect","getContext","CULL_FACE","cullFace","BACK","getExtension","frame","window","requestAnimationFrame","cancelAnimationFrame","event","preventDefault","timeStamp","className","ref","elem","onClick","React","Component","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.3dbf0d1d.chunk.js","sourcesContent":["export function degreesToRadians(degrees) {\r\n  var pi = Math.PI;\r\n  return degrees * (pi / 180);\r\n}\r\n\r\nexport function initShaderProgram(gl, vsSource, fsSource) {\r\n  const vertexShader = _loadShader(gl, gl.VERTEX_SHADER, vsSource);\r\n  const fragmentShader = _loadShader(gl, gl.FRAGMENT_SHADER, fsSource);\r\n  const shaderProgram = gl.createProgram();\r\n  gl.attachShader(shaderProgram, vertexShader);\r\n  gl.attachShader(shaderProgram, fragmentShader);\r\n  gl.linkProgram(shaderProgram);\r\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\r\n    alert('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));\r\n    return null;\r\n  }\r\n  return shaderProgram;\r\n}\r\n\r\nexport function getShaderParameters(gl, shaderProgram) {\r\n  const attributeCount = gl.getProgramParameter(shaderProgram, gl.ACTIVE_ATTRIBUTES);\r\n  const attributes = [];\r\n  for (let i = 0; i < attributeCount; i++) {\r\n    const attribute = gl.getActiveAttrib(shaderProgram, i);\r\n    attributes.push({ name: attribute.name, type: _typeToString(gl, attribute.type) });\r\n  }\r\n  const uniformCount = gl.getProgramParameter(shaderProgram, gl.ACTIVE_UNIFORMS);\r\n  const uniforms = [];\r\n  for (let i = 0; i < uniformCount; i++) {\r\n    const uniform = gl.getActiveUniform(shaderProgram, i);\r\n    uniforms.push({ name: uniform.name, type: _typeToString(gl, uniform.type) });\r\n  }\r\n  return {\r\n    attributes,\r\n    uniforms\r\n  };\r\n}\r\n\r\nfunction _typeToString(gl, type) {\r\n  switch (type) {\r\n    case gl.FLOAT:\r\n      return \"FLOAT\";\r\n    case gl.FLOAT_VEC2:\r\n      return \"FLOAT_VEC2\";\r\n    case gl.FLOAT_VEC3:\r\n      return \"FLOAT_VEC3\";\r\n    case gl.FLOAT_VEC4:\r\n      return \"FLOAT_VEC4\";\r\n    case gl.INT:\r\n      return \"INT\";\r\n    case gl.INT_VEC2:\r\n      return \"INT_VEC2\";\r\n    case gl.INT_VEC3:\r\n      return \"INT_VEC3\";\r\n    case gl.INT_VEC4:\r\n      return \"INT_VEC4\";\r\n    case gl.BOOL:\r\n      return \"BOOL\";\r\n    case gl.BOOL_VEC2:\r\n      return \"BOOL_VEC2\";\r\n    case gl.BOOL_VEC3:\r\n      return \"BOOL_VEC3\";\r\n    case gl.BOOL_VEC4:\r\n      return \"BOOL_VEC4\";\r\n    case gl.FLOAT_MAT2:\r\n      return \"FLOAT_MAT2\";\r\n    case gl.FLOAT_MAT3:\r\n      return \"FLOAT_MAT3\";\r\n    case gl.FLOAT_MAT4:\r\n      return \"FLOAT_MAT4\";\r\n    case gl.SAMPLER_2D:\r\n      return \"SAMPLER_2D\";\r\n    case gl.SAMPLER_CUBE:\r\n      return \"SAMPLER_CUBE\";\r\n    default:\r\n      return \"UNKNOWN\";\r\n  }\r\n}\r\n\r\nfunction _loadShader(gl, type, source) {\r\n  const shader = gl.createShader(type);\r\n  gl.shaderSource(shader, source);\r\n  gl.compileShader(shader);\r\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n    alert('An error occurred compiling the shaders: ' + gl.getShaderInfoLog(shader));\r\n    gl.deleteShader(shader);\r\n    return null;\r\n  }\r\n  return shader;\r\n}\r\n\r\nexport function loadTexture(gl, url) {\r\n  const texture = gl.createTexture();\r\n  gl.bindTexture(gl.TEXTURE_2D, texture);\r\n  const level = 0;\r\n  const internalFormat = gl.RGBA;\r\n  const width = 1;\r\n  const height = 1;\r\n  const border = 0;\r\n  const srcFormat = gl.RGBA;\r\n  const srcType = gl.UNSIGNED_BYTE;\r\n  const pixel = new Uint8Array([0, 0, 255, 255]);\r\n  gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, srcFormat, srcType, pixel);\r\n  const image = new Image();\r\n  image.onload = () => {\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texImage2D(gl.TEXTURE_2D, level, internalFormat,\r\n      srcFormat, srcType, image);\r\n    if (_isPowerOf2(image.width) && _isPowerOf2(image.height)) {\r\n      gl.generateMipmap(gl.TEXTURE_2D);\r\n    } else {\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n    }\r\n  };\r\n  image.src = url;\r\n  return texture;\r\n}\r\n\r\nfunction _isPowerOf2(value) {\r\n  return (value & (value - 1)) === 0;\r\n}\r\n\r\nexport function clearScreen(gl) {\r\n  gl.clearColor(0.0, 0.0, 0.0, 1.0);\r\n  gl.clearDepth(1.0);\r\n  gl.enable(gl.DEPTH_TEST);\r\n  gl.depthFunc(gl.LEQUAL);\r\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n}\r\n\r\nconst _directions = [\r\n  { x: -1, y: 0 },\r\n  { x: 0, y: -1 },\r\n  { x: 1, y: 0 },\r\n  { x: 0, y: 1 }\r\n];\r\n\r\nexport function generateMaze(width, height, windiness = 0.8) {\r\n  const carve = (pos) => {\r\n    data[pos.y][pos.x] = 0;\r\n  }\r\n\r\n  const canCarve = (pos, dir) => {\r\n    if (!isInBounds(addDir(pos, dir, 3))) {\r\n      return false;\r\n    }\r\n    const nxt = addDir(pos, dir, 2);\r\n    return data[nxt.y][nxt.x] === 1;\r\n  }\r\n\r\n  const isInBounds = (pos) => {\r\n    if (pos.x < 0 || pos.y < 0 || pos.x >= width || pos.y >= height) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  const addDir = (pos, dir, len) => {\r\n    return {\r\n      x: pos.x + dir.x * len,\r\n      y: pos.y + dir.y * len\r\n    }\r\n  }\r\n\r\n  const data = [];\r\n  for (let y = 0; y < height; y++) {\r\n    data.push(new Array(width).fill(1));\r\n  }\r\n\r\n  const start = { x: 1, y: 1 };\r\n  const cells = [];\r\n  let lastDir;\r\n  carve(start);\r\n  cells.push(start);\r\n  while (cells.length > 0) {\r\n    const cell = cells[cells.length - 1];\r\n    const posCells = [];\r\n    for (let i = 0; i < _directions.length; i++) {\r\n      const dir = _directions[i];\r\n      if (canCarve(cell, dir)) {\r\n        posCells.push(dir);\r\n      }\r\n    }\r\n    if (posCells.length > 0) {\r\n      let dir;\r\n      if (posCells.includes(lastDir) && Math.random() > windiness) {\r\n        dir = lastDir;\r\n      } else {\r\n        dir = posCells[Math.floor(Math.random() * posCells.length)];\r\n      }\r\n      carve(addDir(cell, dir, 1));\r\n      carve(addDir(cell, dir, 2));\r\n      cells.push(addDir(cell, dir, 2));\r\n      lastDir = dir;\r\n    } else {\r\n      cells.pop();\r\n      lastDir = null;\r\n    }\r\n  }\r\n  return {\r\n    width,\r\n    height,\r\n    data\r\n  };\r\n}\r\n\r\nexport function getShape(shape) {\r\n  if (shape === 'tetrahedron') {\r\n    const s3 = Math.sqrt(3);\r\n    const s6 = Math.sqrt(6);\r\n\r\n    const vertices = [\r\n      [s3 / 3, -s6 / 3 * 0.333 + s6 * 0.025, 0],         // right\r\n      [-s3 / 6, -s6 / 3 * 0.333 + s6 * 0.025, 1 / 2],    // left front\r\n      [-s3 / 6, -s6 / 3 * 0.333 + s6 * 0.025, -1 / 2],   // left back\r\n      [0, s6 / 3 * 0.666 + s6 * 0.025, 0]                // top\r\n    ];\r\n\r\n    const faces = [\r\n      [0, 1, 2],\r\n      [3, 1, 0],\r\n      [3, 0, 2],\r\n      [3, 2, 1]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'cube') {\r\n    const r = .3;\r\n\r\n    const vertices = [\r\n      [-r, -r, -r],\r\n      [-r, -r, r],\r\n      [r, -r, r],\r\n      [r, -r, -r],\r\n      [-r, r, -r],\r\n      [-r, r, r],\r\n      [r, r, r],\r\n      [r, r, -r]\r\n    ];\r\n\r\n    const faces = [\r\n      [0, 3, 2, 1],\r\n      [4, 5, 6, 7],\r\n      [0, 1, 5, 4],\r\n      [2, 3, 7, 6],\r\n      [1, 2, 6, 5],\r\n      [3, 0, 4, 7]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'octahedron') {\r\n    const a = 1 / (2 * Math.sqrt(2));\r\n    const b = 1 / 2;\r\n\r\n    const vertices = [\r\n      [-a, 0, a],    // front left\r\n      [a, 0, a],     // front right\r\n      [a, 0, -a],    // back right\r\n      [-a, 0, -a],   // back left\r\n      [0, b, 0],     // top\r\n      [0, -b, 0]     // bottom\r\n    ];\r\n\r\n    const faces = [\r\n      [3, 0, 4],\r\n      [2, 3, 4],\r\n      [1, 2, 4],\r\n      [0, 1, 4],\r\n      [3, 2, 5],\r\n      [0, 3, 5],\r\n      [2, 1, 5],\r\n      [1, 0, 5]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'pentagonaltrapezohedron') {\r\n    const vertices = [\r\n      [0.210292440, 0.15278640, 0.340260320],\r\n      [-0.08032456, 0.24721360, 0.340260320],\r\n      [-0.25993576, 0.00000000, 0.340260320],\r\n      [0.210292440, -0.6472136, 0.340260320],\r\n      [0.420584800, 0.00000000, -0.08032456],\r\n      [0.340260320, 0.24721360, 0.080324560],\r\n      [-0.21029244, 0.64721360, -0.34026032],\r\n      [-0.42058480, 0.00000000, 0.080324560],\r\n      [-0.34026032, -0.2472136, -0.08032456],\r\n      [0.080324560, -0.2472136, -0.34026032],\r\n      [0.259935760, 0.00000000, -0.34026032],\r\n      [-0.21029244, -0.1527864, -0.34026032]\r\n    ];\r\n\r\n    const faces = [\r\n      [3, 0, 1, 2],\r\n      [0, 3, 4, 5],\r\n      [1, 0, 5, 6],\r\n      [2, 1, 6, 7],\r\n      [3, 2, 7, 8],\r\n      [4, 3, 9, 10],\r\n      [5, 4, 10, 6],\r\n      [7, 6, 11, 8],\r\n      [3, 8, 11, 9],\r\n      [10, 9, 11, 6]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'dodecahedron') {\r\n    const phi = (1 + Math.sqrt(5)) / 2;\r\n    const a = 0.5;\r\n    const b = 0.5 * 1 / phi;\r\n    const c = 0.5 * (2 - phi);\r\n\r\n    const vertices = [\r\n      [c, 0, a],\r\n      [-c, 0, a],\r\n      [-b, b, b],\r\n      [0, a, c],\r\n      [b, b, b],\r\n      [b, -b, b],\r\n      [0, -a, c],\r\n      [-b, -b, b],\r\n      [c, 0, -a],\r\n      [-c, 0, -a],\r\n      [-b, -b, -b],\r\n      [0, -a, -c],\r\n      [b, -b, -b],\r\n      [b, b, -b],\r\n      [0, a, -c],\r\n      [-b, b, -b],\r\n      [a, c, 0],\r\n      [-a, c, 0],\r\n      [-a, -c, 0],\r\n      [a, -c, 0]\r\n    ];\r\n\r\n    const faces = [\r\n      [4, 3, 2, 1, 0],\r\n      [7, 6, 5, 0, 1],\r\n      [12, 11, 10, 9, 8],\r\n      [15, 14, 13, 8, 9],\r\n      [14, 3, 4, 16, 13],\r\n      [3, 14, 15, 17, 2],\r\n      [11, 6, 7, 18, 10],\r\n      [6, 11, 12, 19, 5],\r\n      [4, 0, 5, 19, 16],\r\n      [12, 8, 13, 16, 19],\r\n      [15, 9, 10, 18, 17],\r\n      [7, 1, 2, 17, 18]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'icosahedron') {\r\n    const phi = (1 + Math.sqrt(5)) / 2;\r\n    const a = 1 / 2;\r\n    const b = 1 / (2 * phi);\r\n\r\n    const vertices = [\r\n      [0, b, -a],\r\n      [b, a, 0],\r\n      [-b, a, 0],\r\n      [0, b, a],\r\n      [0, -b, a],\r\n      [-a, 0, b],\r\n      [a, 0, b],\r\n      [0, -b, -a],\r\n      [a, 0, -b],\r\n      [-a, 0, -b],\r\n      [b, -a, 0],\r\n      [-b, -a, 0]\r\n    ];\r\n\r\n    const faces = [\r\n      [1, 0, 2],\r\n      [2, 3, 1],\r\n      [4, 3, 5],\r\n      [6, 3, 4],\r\n      [7, 0, 8],\r\n      [9, 0, 7],\r\n      [10, 4, 11],\r\n      [11, 7, 10],\r\n      [5, 2, 9],\r\n      [9, 11, 5],\r\n      [8, 1, 6],\r\n      [6, 10, 8],\r\n      [5, 3, 2],\r\n      [1, 3, 6],\r\n      [2, 0, 9],\r\n      [8, 0, 1],\r\n      [9, 7, 11],\r\n      [10, 7, 8],\r\n      [11, 4, 5],\r\n      [6, 4, 10]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n}\r\n\r\nconst _materials = {\r\n  emerald: {\r\n    ambient: [0.0215, 0.1745, 0.0215], diffuse: [0.07568, 0.61424, 0.07568], specular: [0.633, 0.727811, 0.633], shininess: 0.6\r\n  },\r\n  jade: {\r\n    ambient: [0.135, 0.2225, 0.1575], diffuse: [0.54, 0.89, 0.63], specular: [0.316228, 0.316228, 0.316228], shininess: 0.1\r\n  },\r\n  obsidian: {\r\n    ambient: [0.05375, 0.05, 0.06625], diffuse: [0.18275, 0.17, 0.22525], specular: [0.332741, 0.328634, 0.346435], shininess: 0.3\r\n  },\r\n  pearl: {\r\n    ambient: [0.25, 0.20725, 0.20725], diffuse: [1, 0.829, 0.829], specular: [0.296648, 0.296648, 0.296648], shininess: 0.088\r\n  },\r\n  ruby: {\r\n    ambient: [0.1745, 0.01175, 0.01175], diffuse: [0.61424, 0.04136, 0.04136], specular: [0.727811, 0.626959, 0.626959], shininess: 0.6\r\n  },\r\n  turquoise: {\r\n    ambient: [0.1, 0.18725, 0.1745], diffuse: [0.396, 0.74151, 0.69102], specular: [0.297254, 0.30829, 0.306678], shininess: 0.1\r\n  },\r\n  brass: {\r\n    ambient: [0.329412, 0.223529, 0.027451], diffuse: [0.780392, 0.568627, 0.113725], specular: [0.992157, 0.941176, 0.807843], shininess: 0.21794872\r\n  },\r\n  bronze: {\r\n    ambient: [0.2125, 0.1275, 0.054], diffuse: [0.714, 0.4284, 0.18144], specular: [0.393548, 0.271906, 0.166721], shininess: 0.2\r\n  },\r\n  chrome: {\r\n    ambient: [0.25, 0.25, 0.25], diffuse: [0.4, 0.4, 0.4], specular: [0.774597, 0.774597, 0.774597], shininess: 0.6\r\n  },\r\n  copper: {\r\n    ambient: [0.19125, 0.0735, 0.0225], diffuse: [0.7038, 0.27048, 0.0828], specular: [0.256777, 0.137622, 0.086014], shininess: 0.1\r\n  },\r\n  gold: {\r\n    ambient: [0.24725, 0.1995, 0.0745], diffuse: [0.75164, 0.60648, 0.22648], specular: [0.628281, 0.555802, 0.366065], shininess: 0.4\r\n  },\r\n  silver: {\r\n    ambient: [0.19225, 0.19225, 0.19225], diffuse: [0.50754, 0.50754, 0.50754], specular: [0.508273, 0.508273, 0.508273], shininess: 0.4\r\n  },\r\n  blackPlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.01, 0.01, 0.01], specular: [0.50, 0.50, 0.50], shininess: 0.25\r\n  },\r\n  cyanPlastic: {\r\n    ambient: [0.0, 0.1, 0.06], diffuse: [0.0, 0.50980392, 0.50980392], specular: [0.50196078, 0.50196078, 0.50196078], shininess: 0.25\r\n  },\r\n  greenPlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.1, 0.35, 0.1], specular: [0.45, 0.55, 0.45], shininess: 0.25\r\n  },\r\n  redPlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.5, 0.0, 0.0], specular: [0.7, 0.6, 0.6], shininess: 0.25\r\n  },\r\n  whitePlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.55, 0.55, 0.55], specular: [0.70, 0.70, 0.70], shininess: 0.25\r\n  },\r\n  yellowPlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.5, 0.5, 0.0], specular: [0.60, 0.60, 0.50], shininess: 0.25\r\n  },\r\n  blackRubber: {\r\n    ambient: [0.02, 0.02, 0.02], diffuse: [0.01, 0.01, 0.01], specular: [0.4, 0.4, 0.4], shininess: 0.078125\r\n  },\r\n  cyanRubber: {\r\n    ambient: [0.0, 0.05, 0.05], diffuse: [0.4, 0.5, 0.5], specular: [0.04, 0.7, 0.7], shininess: 0.078125\r\n  },\r\n  greenRubber: {\r\n    ambient: [0.0, 0.05, 0.0], diffuse: [0.4, 0.5, 0.4], specular: [0.04, 0.7, 0.04], shininess: 0.078125\r\n  },\r\n  redRubber: {\r\n    ambient: [0.05, 0.0, 0.0], diffuse: [0.5, 0.4, 0.4], specular: [0.7, 0.04, 0.04], shininess: 0.078125\r\n  },\r\n  whiteRubber: {\r\n    ambient: [0.05, 0.05, 0.05], diffuse: [0.5, 0.5, 0.5], specular: [0.7, 0.7, 0.7], shininess: 0.078125\r\n  },\r\n  yellowRubber: {\r\n    ambient: [0.05, 0.05, 0.0], diffuse: [0.5, 0.5, 0.4], specular: [0.7, 0.7, 0.04], shininess: 0.078125\r\n  }\r\n};\r\n\r\nexport function getMaterial(name) {\r\n  return _materials[name];\r\n}\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { initShaderProgram, clearScreen } from './utility'\r\n\r\nclass ColoredSquareScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n  }\r\n\r\n  initScene(gl) {\r\n    const vsSource = `\r\n    attribute vec4 aVertexPosition;\r\n    attribute vec4 aVertexColor;\r\n\r\n    uniform mat4 uModelViewMatrix;\r\n    uniform mat4 uProjectionMatrix;\r\n\r\n    varying lowp vec4 vColor;\r\n\r\n    void main(void) {\r\n      gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\r\n      vColor = aVertexColor;\r\n    }\r\n  `;\r\n\r\n    const fsSource = `\r\n    varying lowp vec4 vColor;\r\n\r\n    void main(void) {\r\n      gl_FragColor = vColor;\r\n    }\r\n  `;\r\n\r\n    const shaderProgram = initShaderProgram(gl, vsSource, fsSource);\r\n\r\n    const programInfo = {\r\n      program: shaderProgram,\r\n      attribLocations: {\r\n        vertexPosition: gl.getAttribLocation(shaderProgram, 'aVertexPosition'),\r\n        vertexColor: gl.getAttribLocation(shaderProgram, 'aVertexColor')\r\n      },\r\n      uniformLocations: {\r\n        projectionMatrix: gl.getUniformLocation(shaderProgram, 'uProjectionMatrix'),\r\n        modelViewMatrix: gl.getUniformLocation(shaderProgram, 'uModelViewMatrix')\r\n      }\r\n    };\r\n\r\n    const buffers = this._initBuffers(gl);\r\n\r\n    this.scene = { programInfo, buffers, squareRotation: 0.0 };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n    const { programInfo, buffers } = scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    {\r\n      const numComponents = 4;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.color);\r\n      gl.vertexAttribPointer(\r\n        programInfo.attribLocations.vertexColor,\r\n        numComponents,\r\n        type,\r\n        normalize,\r\n        stride,\r\n        offset);\r\n      gl.enableVertexAttribArray(\r\n        programInfo.attribLocations.vertexColor);\r\n    }\r\n\r\n    {\r\n      const numComponents = 2;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.position);\r\n      gl.vertexAttribPointer(\r\n        programInfo.attribLocations.vertexPosition,\r\n        numComponents,\r\n        type,\r\n        normalize,\r\n        stride,\r\n        offset);\r\n      gl.enableVertexAttribArray(\r\n        programInfo.attribLocations.vertexPosition);\r\n    }\r\n\r\n    {\r\n      const fieldOfView = 45 * Math.PI / 180;\r\n      const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n      const zNear = 0.1;\r\n      const zFar = 100.0;\r\n      const projectionMatrix = mat4.create();\r\n      mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n      const modelViewMatrix = mat4.create();\r\n      mat4.translate(modelViewMatrix, modelViewMatrix, [-0.0, 0.0, -6.0]);\r\n      mat4.rotate(modelViewMatrix, modelViewMatrix, scene.squareRotation, [0, 0, 1]);\r\n      gl.useProgram(programInfo.program);\r\n      gl.uniformMatrix4fv(\r\n        programInfo.uniformLocations.projectionMatrix,\r\n        false,\r\n        projectionMatrix);\r\n      gl.uniformMatrix4fv(\r\n        programInfo.uniformLocations.modelViewMatrix,\r\n        false,\r\n        modelViewMatrix);\r\n    }\r\n\r\n    {\r\n      const offset = 0;\r\n      const vertexCount = 4;\r\n      gl.drawArrays(gl.TRIANGLE_STRIP, offset, vertexCount);\r\n    }\r\n\r\n    scene.squareRotation += deltaTime;\r\n  }\r\n\r\n  _initBuffers(gl) {\r\n    const positions = [\r\n      1.0, 1.0,\r\n      -1.0, 1.0,\r\n      1.0, -1.0,\r\n      -1.0, -1.0,\r\n    ];\r\n    const position = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, position);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\r\n\r\n    const colors = [\r\n      1.0, 1.0, 1.0, 1.0,\r\n      1.0, 0.0, 0.0, 1.0,\r\n      0.0, 1.0, 0.0, 1.0,\r\n      0.0, 0.0, 1.0, 1.0\r\n    ];\r\n    const color = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, color);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);\r\n\r\n    return { position, color };\r\n  }\r\n}\r\n\r\nexport default ColoredSquareScene;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { initShaderProgram, clearScreen } from './utility'\r\n\r\nclass ColoredCubeScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n  }\r\n\r\n  initScene(gl) {\r\n    const vsSource = `\r\n    attribute vec4 aVertexPosition;\r\n    attribute vec4 aVertexColor;\r\n\r\n    uniform mat4 uModelViewMatrix;\r\n    uniform mat4 uProjectionMatrix;\r\n\r\n    varying lowp vec4 vColor;\r\n\r\n    void main(void) {\r\n      gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\r\n      vColor = aVertexColor;\r\n    }\r\n  `;\r\n\r\n    const fsSource = `\r\n    varying lowp vec4 vColor;\r\n\r\n    void main(void) {\r\n      gl_FragColor = vColor;\r\n    }\r\n  `;\r\n\r\n    const shaderProgram = initShaderProgram(gl, vsSource, fsSource);\r\n\r\n    const programInfo = {\r\n      program: shaderProgram,\r\n      attribLocations: {\r\n        vertexPosition: gl.getAttribLocation(shaderProgram, 'aVertexPosition'),\r\n        vertexColor: gl.getAttribLocation(shaderProgram, 'aVertexColor')\r\n      },\r\n      uniformLocations: {\r\n        projectionMatrix: gl.getUniformLocation(shaderProgram, 'uProjectionMatrix'),\r\n        modelViewMatrix: gl.getUniformLocation(shaderProgram, 'uModelViewMatrix')\r\n      }\r\n    };\r\n\r\n    const buffers = this._initBuffers(gl);\r\n\r\n    this.scene = { programInfo, buffers, cubeRotation: 0.0 };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n    const { programInfo, buffers } = scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    {\r\n      const numComponents = 3;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.position);\r\n      gl.vertexAttribPointer(\r\n        programInfo.attribLocations.vertexPosition,\r\n        numComponents,\r\n        type,\r\n        normalize,\r\n        stride,\r\n        offset);\r\n      gl.enableVertexAttribArray(programInfo.attribLocations.vertexPosition);\r\n    }\r\n\r\n    {\r\n      const numComponents = 4;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.color);\r\n      gl.vertexAttribPointer(\r\n        programInfo.attribLocations.vertexColor,\r\n        numComponents,\r\n        type,\r\n        normalize,\r\n        stride,\r\n        offset);\r\n      gl.enableVertexAttribArray(programInfo.attribLocations.vertexColor);\r\n    }\r\n\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffers.indices);\r\n\r\n    {\r\n      const fieldOfView = 45 * Math.PI / 180;\r\n      const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n      const zNear = 0.1;\r\n      const zFar = 100.0;\r\n      const projectionMatrix = mat4.create();\r\n      mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n      const modelViewMatrix = mat4.create();\r\n      mat4.translate(modelViewMatrix, modelViewMatrix, [-0.0, 0.0, -6.0]);\r\n      mat4.rotate(modelViewMatrix, modelViewMatrix, scene.cubeRotation, [0, 0, 1]);\r\n      mat4.rotate(modelViewMatrix, modelViewMatrix, scene.cubeRotation * 0.7, [0, 1, 0]);\r\n      gl.useProgram(programInfo.program);\r\n      gl.uniformMatrix4fv(\r\n        programInfo.uniformLocations.projectionMatrix,\r\n        false,\r\n        projectionMatrix);\r\n      gl.uniformMatrix4fv(\r\n        programInfo.uniformLocations.modelViewMatrix,\r\n        false,\r\n        modelViewMatrix);\r\n    }\r\n\r\n    {\r\n      const vertexCount = 36;\r\n      const type = gl.UNSIGNED_SHORT;\r\n      const offset = 0;\r\n      gl.drawElements(gl.TRIANGLES, vertexCount, type, offset);\r\n    }\r\n\r\n    scene.cubeRotation += deltaTime;\r\n  }\r\n\r\n  _initBuffers(gl) {\r\n    const positions = [\r\n      // Front face\r\n      -1.0, -1.0, 1.0,\r\n      1.0, -1.0, 1.0,\r\n      1.0, 1.0, 1.0,\r\n      -1.0, 1.0, 1.0,\r\n\r\n      // Back face\r\n      -1.0, -1.0, -1.0,\r\n      -1.0, 1.0, -1.0,\r\n      1.0, 1.0, -1.0,\r\n      1.0, -1.0, -1.0,\r\n\r\n      // Top face\r\n      -1.0, 1.0, -1.0,\r\n      -1.0, 1.0, 1.0,\r\n      1.0, 1.0, 1.0,\r\n      1.0, 1.0, -1.0,\r\n\r\n      // Bottom face\r\n      -1.0, -1.0, -1.0,\r\n      1.0, -1.0, -1.0,\r\n      1.0, -1.0, 1.0,\r\n      -1.0, -1.0, 1.0,\r\n\r\n      // Right face\r\n      1.0, -1.0, -1.0,\r\n      1.0, 1.0, -1.0,\r\n      1.0, 1.0, 1.0,\r\n      1.0, -1.0, 1.0,\r\n\r\n      // Left face\r\n      -1.0, -1.0, -1.0,\r\n      -1.0, -1.0, 1.0,\r\n      -1.0, 1.0, 1.0,\r\n      -1.0, 1.0, -1.0,\r\n    ];\r\n    const positionBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\r\n\r\n    const faceColors = [\r\n      [1.0, 1.0, 1.0, 1.0],    // Front face: white\r\n      [1.0, 0.0, 0.0, 1.0],    // Back face: red\r\n      [0.0, 1.0, 0.0, 1.0],    // Top face: green\r\n      [0.0, 0.0, 1.0, 1.0],    // Bottom face: blue\r\n      [1.0, 1.0, 0.0, 1.0],    // Right face: yellow\r\n      [1.0, 0.0, 1.0, 1.0],    // Left face: purple\r\n    ];\r\n    let colors = [];\r\n    for (let j = 0; j < faceColors.length; ++j) {\r\n      const c = faceColors[j];\r\n      colors = colors.concat(c, c, c, c);\r\n    }\r\n    const colorBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);\r\n\r\n    const indices = [\r\n      0, 1, 2, 0, 2, 3,   // front\r\n      4, 5, 6, 4, 6, 7,   // back\r\n      8, 9, 10, 8, 10, 11,   // top\r\n      12, 13, 14, 12, 14, 15,   // bottom\r\n      16, 17, 18, 16, 18, 19,   // right\r\n      20, 21, 22, 20, 22, 23,   // left\r\n    ];\r\n    const indexBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);\r\n\r\n    return { position: positionBuffer, color: colorBuffer, indices: indexBuffer };\r\n  }\r\n}\r\n\r\nexport default ColoredCubeScene;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport * as vec3 from 'gl-matrix/vec3';\r\nimport { loadTexture, initShaderProgram, getShaderParameters } from './utility'\r\n\r\nclass Model {\r\n  _initModel(options) {\r\n    const { gl, geometry } = options;\r\n    let texture\r\n    if (options.texture) {\r\n      texture = {};\r\n      texture.diffuse = loadTexture(gl, options.texture.diffuse);\r\n      texture.normal = loadTexture(gl, options.texture.normal);\r\n    }\r\n    let vertexShader;\r\n    let fragmentShader;\r\n    Promise.all([\r\n      fetch(options.shader.vertex).then((response) => response.text()).then((text) => vertexShader = text),\r\n      fetch(options.shader.fragment).then((response) => response.text()).then((text) => fragmentShader = text)\r\n    ]).then(() => {\r\n      const shaderProgram = initShaderProgram(gl, vertexShader, fragmentShader);\r\n      const shaderParameters = getShaderParameters(gl, shaderProgram);\r\n      const shader = {\r\n        program: shaderProgram,\r\n        attribLocations: {},\r\n        uniformLocations: {}\r\n      };\r\n      shaderParameters.attributes.forEach((attribute) => {\r\n        const location = gl.getAttribLocation(shaderProgram, attribute.name)\r\n        switch (attribute.name) {\r\n          case 'aVertexPosition':\r\n            shader.attribLocations.vertexPosition = location;\r\n            break;\r\n          case 'aVertexNormal':\r\n            shader.attribLocations.vertexNormal = location;\r\n            break;\r\n          case 'aVertexTangent':\r\n            shader.attribLocations.vertexTangent = location;\r\n            break;\r\n          case 'aVertexBitangent':\r\n            shader.attribLocations.vertexBitangent = location;\r\n            break;\r\n          case 'aTextureCoord':\r\n            shader.attribLocations.vertexTextureCoord = location;\r\n            break;\r\n          default:\r\n            alert('unknown attribute of ' + attribute.name);\r\n        }\r\n      });\r\n      shaderParameters.uniforms.forEach((uniform) => {\r\n        const location = gl.getUniformLocation(shaderProgram, uniform.name)\r\n        switch (uniform.name) {\r\n          case 'uModelMatrix':\r\n            shader.uniformLocations.modelMatrix = location;\r\n            break;\r\n          case 'uViewMatrix':\r\n            shader.uniformLocations.viewMatrix = location;\r\n            break;\r\n          case 'uNormalMatrix':\r\n            shader.uniformLocations.normalMatrix = location;\r\n            break;\r\n          case 'uProjectionMatrix':\r\n            shader.uniformLocations.projectionMatrix = location;\r\n            break;\r\n          case 'uSamplerNormal':\r\n            shader.uniformLocations.textureNormal = location;\r\n            break;\r\n          case 'uSamplerDiffuse':\r\n            shader.uniformLocations.textureDiffuse = location;\r\n            break;\r\n          case 'uShowTexture':\r\n            shader.uniformLocations.textureShow = location;\r\n            break;\r\n          case 'uPerPixel':\r\n            shader.uniformLocations.perPixel = location;\r\n            break;\r\n          case 'uCameraPos':\r\n            shader.uniformLocations.cameraPosition = location;\r\n            break;\r\n          case 'uAmbientLight':\r\n            shader.uniformLocations.ambientLight = location;\r\n            break;\r\n          case 'uDirectionalLight.color':\r\n            if (!shader.uniformLocations.directionalLight) {\r\n              shader.uniformLocations.directionalLight = {};\r\n            }\r\n            shader.uniformLocations.directionalLight.color = location;\r\n            break;\r\n          case 'uDirectionalLight.direction':\r\n            if (!shader.uniformLocations.directionalLight) {\r\n              shader.uniformLocations.directionalLight = {};\r\n            }\r\n            shader.uniformLocations.directionalLight.direction = location;\r\n            break;\r\n          case 'uPointLight.color':\r\n            if (!shader.uniformLocations.pointLight) {\r\n              shader.uniformLocations.pointLight = {};\r\n            }\r\n            shader.uniformLocations.pointLight.color = location;\r\n            break;\r\n          case 'uPointLight.position':\r\n            if (!shader.uniformLocations.pointLight) {\r\n              shader.uniformLocations.pointLight = {};\r\n            }\r\n            shader.uniformLocations.pointLight.position = location;\r\n            break;\r\n          case 'uLight[0].position':\r\n            if (!shader.uniformLocations.lights) {\r\n              shader.uniformLocations.lights = [];\r\n            }\r\n            while (shader.uniformLocations.lights.length < 1) {\r\n              shader.uniformLocations.lights.push({});\r\n            }\r\n            shader.uniformLocations.lights[0].position = location;\r\n            break;\r\n          case 'uLight[0].ambient':\r\n            if (!shader.uniformLocations.lights) {\r\n              shader.uniformLocations.lights = [];\r\n            }\r\n            while (shader.uniformLocations.lights.length < 1) {\r\n              shader.uniformLocations.lights.push({});\r\n            }\r\n            shader.uniformLocations.lights[0].ambient = location;\r\n            break;\r\n          case 'uLight[0].diffuse':\r\n            if (!shader.uniformLocations.lights) {\r\n              shader.uniformLocations.lights = [];\r\n            }\r\n            while (shader.uniformLocations.lights.length < 1) {\r\n              shader.uniformLocations.lights.push({});\r\n            }\r\n            shader.uniformLocations.lights[0].diffuse = location;\r\n            break;\r\n          case 'uLight[0].specular':\r\n            if (!shader.uniformLocations.lights) {\r\n              shader.uniformLocations.lights = [];\r\n            }\r\n            while (shader.uniformLocations.lights.length < 1) {\r\n              shader.uniformLocations.lights.push({});\r\n            }\r\n            shader.uniformLocations.lights[0].specular = location;\r\n            break;\r\n          case 'uLight[1].position':\r\n            if (!shader.uniformLocations.lights) {\r\n              shader.uniformLocations.lights = [];\r\n            }\r\n            while (shader.uniformLocations.lights.length < 2) {\r\n              shader.uniformLocations.lights.push({});\r\n            }\r\n            shader.uniformLocations.lights[1].position = location;\r\n            break;\r\n          case 'uLight[1].ambient':\r\n            if (!shader.uniformLocations.lights) {\r\n              shader.uniformLocations.lights = [];\r\n            }\r\n            while (shader.uniformLocations.lights.length < 2) {\r\n              shader.uniformLocations.lights.push({});\r\n            }\r\n            shader.uniformLocations.lights[1].ambient = location;\r\n            break;\r\n          case 'uLight[1].diffuse':\r\n            if (!shader.uniformLocations.lights) {\r\n              shader.uniformLocations.lights = [];\r\n            }\r\n            while (shader.uniformLocations.lights.length < 2) {\r\n              shader.uniformLocations.lights.push({});\r\n            }\r\n            shader.uniformLocations.lights[1].diffuse = location;\r\n            break;\r\n          case 'uLight[1].specular':\r\n            if (!shader.uniformLocations.lights) {\r\n              shader.uniformLocations.lights = [];\r\n            }\r\n            while (shader.uniformLocations.lights.length < 2) {\r\n              shader.uniformLocations.lights.push({});\r\n            }\r\n            shader.uniformLocations.lights[1].specular = location;\r\n            break;\r\n          case 'uMaterial.ambient':\r\n            if (!shader.uniformLocations.material) {\r\n              shader.uniformLocations.material = {};\r\n            }\r\n            shader.uniformLocations.material.ambient = location;\r\n            break;\r\n          case 'uMaterial.diffuse':\r\n            if (!shader.uniformLocations.material) {\r\n              shader.uniformLocations.material = {};\r\n            }\r\n            shader.uniformLocations.material.diffuse = location;\r\n            break;\r\n          case 'uMaterial.specular':\r\n            if (!shader.uniformLocations.material) {\r\n              shader.uniformLocations.material = {};\r\n            }\r\n            shader.uniformLocations.material.specular = location;\r\n            break;\r\n          case 'uMaterial.shininess':\r\n            if (!shader.uniformLocations.material) {\r\n              shader.uniformLocations.material = {};\r\n            }\r\n            shader.uniformLocations.material.shininess = location;\r\n            break;\r\n          default:\r\n            alert('unknown uniform of ' + uniform.name);\r\n        }\r\n      });\r\n      const buffers = this._initBuffers(gl, shader, geometry);\r\n      this.model = {\r\n        shader,\r\n        buffers,\r\n        texture\r\n      };\r\n    });\r\n  }\r\n\r\n  _initBuffers(gl, shader, geometry) {\r\n    const positions = [];\r\n    const normals = [];\r\n    const tangents = [];\r\n    const bitangents = [];\r\n    const textureCoordinates = [];\r\n    const indices = [];\r\n    const normal = vec3.create();\r\n    const tangent = vec3.create();\r\n    const bitangent = vec3.create();\r\n    let offset = 0;\r\n\r\n    const addSquare = (c0, c1, c2, c3) => {\r\n      positions.push(...c0, ...c1, ...c2, ...c3);\r\n      indices.push(offset + 0, offset + 1, offset + 2, offset + 0, offset + 3, offset + 1);\r\n      offset += 4;\r\n\r\n      if (shader.attribLocations.vertexNormal || shader.attribLocations.vertexTangent || shader.attribLocations.vertexBitangent) {\r\n        vec3.subtract(tangent, c3, c0);\r\n        vec3.subtract(bitangent, c0, c2);\r\n\r\n        if (shader.attribLocations.vertexNormal) {\r\n          vec3.cross(normal, tangent, bitangent);\r\n          vec3.normalize(normal, normal);\r\n          normals.push(...normal, ...normal, ...normal, ...normal);\r\n        }\r\n\r\n        if (shader.attribLocations.vertexTangent) {\r\n          vec3.normalize(tangent, tangent);\r\n          tangents.push(...tangent, ...tangent, ...tangent, ...tangent);\r\n        }\r\n\r\n        if (shader.attribLocations.vertexBitangent) {\r\n          vec3.normalize(bitangent, bitangent);\r\n          bitangents.push(...bitangent, ...bitangent, ...bitangent, ...bitangent);\r\n        }\r\n      }\r\n\r\n      if (shader.attribLocations.vertexTextureCoord) {\r\n        textureCoordinates.push(0, 0, 1, 1, 0, 1, 1, 0);\r\n      }\r\n    }\r\n\r\n    const addTriangle = (c0, c1, c2) => {\r\n      positions.push(...c0, ...c1, ...c2);\r\n      indices.push(offset + 0, offset + 1, offset + 2);\r\n      offset += 3;\r\n      vec3.subtract(tangent, c1, c0);\r\n      vec3.subtract(bitangent, c2, c0);\r\n      vec3.cross(normal, tangent, bitangent);\r\n      vec3.normalize(normal, normal);\r\n      normals.push(...normal, ...normal, ...normal);\r\n    }\r\n\r\n    const addSquare2 = (c0, c1, c2, c3) => {\r\n      positions.push(...c0, ...c1, ...c2, ...c3);\r\n      indices.push(offset + 0, offset + 1, offset + 2, offset + 2, offset + 3, offset + 0);\r\n      offset += 4;\r\n      vec3.subtract(tangent, c1, c0);\r\n      vec3.subtract(bitangent, c2, c0);\r\n      vec3.cross(normal, tangent, bitangent);\r\n      vec3.normalize(normal, normal);\r\n      normals.push(...normal, ...normal, ...normal, ...normal);\r\n    }\r\n\r\n    const addPentagon = (c0, c1, c2, c3, c4) => {\r\n      positions.push(...c0, ...c1, ...c2, ...c3, ...c4);\r\n      indices.push(offset + 0, offset + 3, offset + 4, offset + 0, offset + 1, offset + 3, offset + 1, offset + 2, offset + 3);\r\n      offset += 5;\r\n      vec3.subtract(tangent, c1, c0);\r\n      vec3.subtract(bitangent, c4, c0);\r\n      vec3.cross(normal, tangent, bitangent);\r\n      vec3.normalize(normal, normal);\r\n      normals.push(...normal, ...normal, ...normal, ...normal, ...normal);\r\n    }\r\n\r\n    const addFace = (vertices, face) => {\r\n      switch (face.length) {\r\n        case 3:\r\n          addTriangle(vertices[face[0]], vertices[face[1]], vertices[face[2]]);\r\n          break;\r\n        case 4:\r\n          addSquare2(vertices[face[0]], vertices[face[1]], vertices[face[2]], vertices[face[3]]);\r\n          break;\r\n        case 5:\r\n          addPentagon(vertices[face[0]], vertices[face[1]], vertices[face[2]], vertices[face[3]], vertices[face[4]]);\r\n          break;\r\n        default:\r\n          alert('faces with ' + face.length + ' vertices are not supported');\r\n      }\r\n    }\r\n\r\n    const addFaces = (vertices, faces) => {\r\n      for (let i = 0; i < faces.length; i++) {\r\n        addFace(vertices, faces[i]);\r\n      }\r\n    }\r\n\r\n    geometry({ addSquare, addFaces });\r\n\r\n    const positionBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\r\n\r\n    const indexBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);\r\n\r\n    const buffers = { position: positionBuffer, indices: indexBuffer, vertexCount: indices.length }\r\n\r\n    if (shader.attribLocations.vertexNormal) {\r\n      const normalBuffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, normalBuffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(normals), gl.STATIC_DRAW);\r\n      buffers.normal = normalBuffer;\r\n    }\r\n\r\n    if (shader.attribLocations.vertexTangent) {\r\n      const tangentBuffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, tangentBuffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(tangents), gl.STATIC_DRAW);\r\n      buffers.tangent = tangentBuffer;\r\n    }\r\n\r\n    if (shader.attribLocations.vertexBitangent) {\r\n      const bitangentBuffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, bitangentBuffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(bitangents), gl.STATIC_DRAW);\r\n      buffers.bitangent = bitangentBuffer;\r\n    }\r\n\r\n    if (shader.attribLocations.vertexTextureCoord) {\r\n      const textureCoordBuffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, textureCoordBuffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoordinates), gl.STATIC_DRAW);\r\n      buffers.textureCoord = textureCoordBuffer;\r\n    }\r\n\r\n    return buffers;\r\n  }\r\n\r\n  _drawModel(options) {\r\n    if (!options.model) {\r\n      return;\r\n    }\r\n\r\n    const { gl, model, projectionMatrix, viewMatrix, modelMatrix } = options;\r\n    const { shader, buffers, texture } = model;\r\n\r\n    {\r\n      const numComponents = 3;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.position);\r\n      gl.vertexAttribPointer(shader.attribLocations.vertexPosition, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(shader.attribLocations.vertexPosition);\r\n    }\r\n\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffers.indices);\r\n\r\n    if (shader.attribLocations.vertexNormal) {\r\n      const numComponents = 3;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.normal);\r\n      gl.vertexAttribPointer(shader.attribLocations.vertexNormal, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(shader.attribLocations.vertexNormal);\r\n    }\r\n\r\n    if (shader.attribLocations.vertexTangent) {\r\n      const numComponents = 3;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.tangent);\r\n      gl.vertexAttribPointer(shader.attribLocations.vertexTangent, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(shader.attribLocations.vertexTangent);\r\n    }\r\n\r\n    if (shader.attribLocations.vertexBitangent) {\r\n      const numComponents = 3;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.bitangent);\r\n      gl.vertexAttribPointer(shader.attribLocations.vertexBitangent, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(shader.attribLocations.vertexBitangent);\r\n    }\r\n\r\n    if (shader.attribLocations.vertexTextureCoord) {\r\n      const numComponents = 2;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.textureCoord);\r\n      gl.vertexAttribPointer(shader.attribLocations.vertexTextureCoord, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(shader.attribLocations.vertexTextureCoord);\r\n    }\r\n\r\n    gl.useProgram(shader.program);\r\n    gl.uniformMatrix4fv(shader.uniformLocations.projectionMatrix, false, projectionMatrix);\r\n    gl.uniformMatrix4fv(shader.uniformLocations.modelMatrix, false, modelMatrix);\r\n    gl.uniformMatrix4fv(shader.uniformLocations.viewMatrix, false, viewMatrix);\r\n\r\n    if (shader.uniformLocations.normalMatrix) {\r\n      const normalMatrix = mat4.create();\r\n      mat4.invert(normalMatrix, modelMatrix);\r\n      mat4.transpose(normalMatrix, normalMatrix);\r\n      gl.uniformMatrix4fv(shader.uniformLocations.normalMatrix, false, normalMatrix);\r\n    }\r\n\r\n    if (shader.uniformLocations.textureShow) {\r\n      gl.uniform1i(shader.uniformLocations.textureShow, options.textureShow);\r\n    }\r\n\r\n    if (shader.uniformLocations.perPixel) {\r\n      gl.uniform1i(shader.uniformLocations.perPixel, options.perPixel);\r\n    }\r\n\r\n    if (shader.uniformLocations.ambientLight) {\r\n      gl.uniform3fv(shader.uniformLocations.ambientLight, options.ambientLight);\r\n    }\r\n\r\n    if (shader.uniformLocations.directionalLight) {\r\n      const direction = vec3.clone(options.directionalLight.direction);\r\n      vec3.normalize(direction, direction);\r\n      gl.uniform3fv(shader.uniformLocations.directionalLight.color, options.directionalLight.color);\r\n      gl.uniform3fv(shader.uniformLocations.directionalLight.direction, direction);\r\n    }\r\n\r\n    if (shader.uniformLocations.pointLight) {\r\n      gl.uniform3fv(shader.uniformLocations.pointLight.color, options.pointLight.color);\r\n      gl.uniform3fv(shader.uniformLocations.pointLight.position, options.pointLight.position);\r\n    }\r\n\r\n    if (options.lights) {\r\n      const lights = options.lights;\r\n      for (let i = 0; i < lights.length; i++) {\r\n        const light = lights[i];\r\n        gl.uniform3fv(shader.uniformLocations.lights[i].position, light.position);\r\n        gl.uniform3fv(shader.uniformLocations.lights[i].ambient, light.ambient);\r\n        gl.uniform3fv(shader.uniformLocations.lights[i].diffuse, light.diffuse);\r\n        gl.uniform3fv(shader.uniformLocations.lights[i].specular, light.specular);\r\n      }\r\n    }\r\n\r\n    if (options.material) {\r\n      const material = options.material;\r\n      gl.uniform3fv(shader.uniformLocations.material.ambient, material.ambient);\r\n      gl.uniform3fv(shader.uniformLocations.material.diffuse, material.diffuse);\r\n      gl.uniform3fv(shader.uniformLocations.material.specular, material.specular);\r\n      gl.uniform1f(shader.uniformLocations.material.shininess, material.shininess);\r\n    }\r\n\r\n    if (shader.uniformLocations.cameraPosition) {\r\n      gl.uniform3fv(shader.uniformLocations.cameraPosition, options.cameraPosition);\r\n    }\r\n\r\n    if (shader.uniformLocations.textureNormal) {\r\n      gl.activeTexture(gl.TEXTURE0);\r\n      gl.bindTexture(gl.TEXTURE_2D, texture.normal);\r\n      gl.uniform1i(shader.uniformLocations.textureNormal, 0);\r\n    }\r\n\r\n    if (shader.uniformLocations.textureDiffuse) {\r\n      gl.activeTexture(gl.TEXTURE1);\r\n      gl.bindTexture(gl.TEXTURE_2D, texture.diffuse);\r\n      gl.uniform1i(shader.uniformLocations.textureDiffuse, 1);\r\n    }\r\n\r\n    {\r\n      const vertexCount = buffers.vertexCount;\r\n      const type = gl.UNSIGNED_SHORT;\r\n      const offset = 0;\r\n      gl.drawElements(gl.TRIANGLES, vertexCount, type, offset);\r\n    }\r\n  }\r\n}\r\n\r\nexport default Model;\r\n","import Model from './Model';\r\n\r\nclass TexturedCubeModel extends Model {\r\n  constructor(gl) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: this._geometry,\r\n      texture: {\r\n        diffuse: 'images/cubetexture.png'\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/texturedcube/vertex.glsl',\r\n        fragment: 'shaders/texturedcube/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix) {\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix\r\n    });\r\n  }\r\n\r\n  _geometry({ addSquare }) {\r\n    const f0 = [-1, -1, 1];\r\n    const f1 = [1, 1, 1];\r\n    const f2 = [-1, 1, 1];\r\n    const f3 = [1, -1, 1];\r\n    const b0 = [-1, -1, -1];\r\n    const b1 = [1, 1, -1];\r\n    const b2 = [-1, 1, -1];\r\n    const b3 = [1, -1, -1];\r\n    addSquare(f0, f1, f2, f3);  // front\r\n    addSquare(b3, b2, b1, b0);  // back\r\n    addSquare(b0, f2, b2, f0);  // left\r\n    addSquare(f3, b1, f1, b3);  // right\r\n    addSquare(b0, f3, f0, b3);  // bottom\r\n    addSquare(b1, f2, f1, b2);  // top\r\n  }\r\n}\r\n\r\nexport default TexturedCubeModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen } from './utility'\r\nimport TexturedCubeModel from './TexturedCubeModel';\r\n\r\nclass TexturedCubeScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n  }\r\n\r\n  initScene(gl) {\r\n    const model = new TexturedCubeModel(gl);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model,\r\n          location: [0.0, 0.0, -6.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 0, 1],\r\n              speed: 1.0\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.7\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      mat4.rotate(modelMatrix, modelMatrix, rotation.angle, rotation.axis);\r\n    }\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      rotation.angle += deltaTime * rotation.speed;\r\n    }\r\n  }\r\n}\r\n\r\nexport default TexturedCubeScene;\r\n","import Model from './Model';\r\n\r\nclass LightedCubeModel extends Model {\r\n  constructor(gl) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: this._geometry,\r\n      texture: {\r\n        diffuse: 'images/cubetexture.png'\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/lightedcube/vertex.glsl',\r\n        fragment: 'shaders/lightedcube/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix, perPixel) {\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      ambientLight: [0.3, 0.3, 0.3],\r\n      directionalLight: {\r\n        color: [0.5, 0.5, 0.5],\r\n        direction: [0.0, 1.0, 0.0]\r\n      },\r\n      pointLight: {\r\n        color: [0.7, 0.7, 0.7],\r\n        position: [0.0, 0.0, 0.0]\r\n      },\r\n      cameraPosition: [0.0, 0.0, 0.0],\r\n      perPixel\r\n    });\r\n  }\r\n\r\n  _geometry({ addSquare }) {\r\n    const f0 = [-1, -1, 1];\r\n    const f1 = [1, 1, 1];\r\n    const f2 = [-1, 1, 1];\r\n    const f3 = [1, -1, 1];\r\n    const b0 = [-1, -1, -1];\r\n    const b1 = [1, 1, -1];\r\n    const b2 = [-1, 1, -1];\r\n    const b3 = [1, -1, -1];\r\n    addSquare(f0, f1, f2, f3);  // front\r\n    addSquare(b3, b2, b1, b0);  // back\r\n    addSquare(b0, f2, b2, f0);  // left\r\n    addSquare(f3, b1, f1, b3);  // right\r\n    addSquare(b0, f3, f0, b3);  // bottom\r\n    addSquare(b1, f2, f1, b2);  // top\r\n  }\r\n}\r\n\r\nexport default LightedCubeModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen } from './utility'\r\nimport LightedCubeModel from './LightedCubeModel';\r\n\r\nclass LightedCubeScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n  }\r\n\r\n  initScene(gl) {\r\n    const model = new LightedCubeModel(gl);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model,\r\n          location: [-2.0, 0.0, -5.5],\r\n          rotation: 0.0,\r\n          rotationSpeed: 1.0,\r\n          perPixel: false\r\n        },\r\n        {\r\n          model,\r\n          location: [2.0, 0.0, -5.5],\r\n          rotation: 0.0,\r\n          rotationSpeed: 1.0,\r\n          perPixel: true\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0],\r\n      cameraDir: [0.0, 0.0, 2.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n\r\n    if (scene.camera[2] > 16.0) {\r\n      scene.camera[2] = 16.0;\r\n      scene.cameraDir[2] = -2.0;\r\n    } else if (scene.camera[2] < 0.0) {\r\n      scene.camera[2] = 0.0;\r\n      scene.cameraDir[2] = 2.0;\r\n    }\r\n\r\n    scene.camera[0] += scene.cameraDir[0] * deltaTime;\r\n    scene.camera[1] += scene.cameraDir[1] * deltaTime;\r\n    scene.camera[2] += scene.cameraDir[2] * deltaTime;\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    mat4.rotate(modelMatrix, modelMatrix, actor.rotation, [0, 0, 1]);\r\n    mat4.rotate(modelMatrix, modelMatrix, actor.rotation * 0.7, [0, 1, 0]);\r\n    mat4.rotate(modelMatrix, modelMatrix, actor.rotation * 0.3, [1, 0, 0]);\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix, actor.perPixel);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    actor.rotation += deltaTime * actor.rotationSpeed;\r\n  }\r\n}\r\n\r\nexport default LightedCubeScene;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { initShaderProgram } from './utility'\r\n\r\nclass MazeModel {\r\n  constructor(gl, maze) {\r\n    this.gl = gl;\r\n    this.maze = maze;\r\n    this.draw = this.draw.bind(this);\r\n    const shaderProgram = this._initShaders(gl);\r\n    this.model = {\r\n      program: shaderProgram,\r\n      attribLocations: {\r\n        vertexPosition: gl.getAttribLocation(shaderProgram, 'aVertexPosition'),\r\n        vertexColor: gl.getAttribLocation(shaderProgram, 'aVertexColor')\r\n      },\r\n      uniformLocations: {\r\n        projectionMatrix: gl.getUniformLocation(shaderProgram, 'uProjectionMatrix'),\r\n        modelViewMatrix: gl.getUniformLocation(shaderProgram, 'uModelViewMatrix')\r\n      },\r\n      buffers: this._initBuffers(gl, maze)\r\n    }\r\n  }\r\n\r\n  update(maze) {\r\n    this._freeBuffers(this.gl, this.model.buffers);\r\n    this.maze = maze;\r\n    this.model.buffers = this._initBuffers(this.gl, maze);\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix) {\r\n    const gl = this.gl;\r\n    const model = this.model;\r\n    const { buffers } = this.model;\r\n\r\n    {\r\n      const numComponents = 3;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.position);\r\n      gl.vertexAttribPointer(model.attribLocations.vertexPosition, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(model.attribLocations.vertexPosition);\r\n    }\r\n\r\n    {\r\n      const numComponents = 4;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.color);\r\n      gl.vertexAttribPointer(model.attribLocations.vertexColor, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(model.attribLocations.vertexColor);\r\n    }\r\n\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffers.indices);\r\n\r\n    const modelViewMatrix = mat4.create();\r\n    mat4.multiply(modelViewMatrix, viewMatrix, modelMatrix);\r\n\r\n    gl.useProgram(model.program);\r\n    gl.uniformMatrix4fv(model.uniformLocations.projectionMatrix, false, projectionMatrix);\r\n    gl.uniformMatrix4fv(model.uniformLocations.modelViewMatrix, false, modelViewMatrix);\r\n\r\n    {\r\n      const vertexCount = buffers.vertexCount;\r\n      const type = gl.UNSIGNED_INT;\r\n      const offset = 0;\r\n      gl.drawElements(gl.TRIANGLES, vertexCount, type, offset);\r\n    }\r\n  }\r\n\r\n  _initShaders(gl) {\r\n    const vsSource = `\r\n      attribute vec4 aVertexPosition;\r\n      attribute vec4 aVertexColor;\r\n\r\n      uniform mat4 uModelViewMatrix;\r\n      uniform mat4 uProjectionMatrix;\r\n\r\n      varying lowp vec4 vColor;\r\n\r\n      void main(void) {\r\n        gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\r\n        vColor = aVertexColor;\r\n      }\r\n    `;\r\n\r\n    const fsSource = `\r\n      varying lowp vec4 vColor;\r\n\r\n      void main(void) {\r\n        gl_FragColor = vColor;\r\n      }\r\n    `;\r\n\r\n    return initShaderProgram(gl, vsSource, fsSource);\r\n  }\r\n\r\n  _initBuffers(gl, maze) {\r\n    const positions = []\r\n    const colors = [];\r\n    const indices = [];\r\n    let offset = 0;\r\n\r\n    const addSquareXY = (left, right, top, bottom, base, color) => {\r\n      positions.push\r\n        (\r\n          left, top, base,\r\n          right, top, base,\r\n          right, bottom, base,\r\n          left, bottom, base\r\n        );\r\n      indices.push\r\n        (\r\n          offset + 0, offset + 1, offset + 2, offset + 0, offset + 2, offset + 3\r\n        );\r\n      offset += 4;\r\n      for (let i = 0; i < 4; i++) {\r\n        for (let j = 0; j < 4; j++) {\r\n          colors.push(color[j]);\r\n        }\r\n      }\r\n    }\r\n\r\n    const addSquareXZ = (left, right, top, bottom, base, color) => {\r\n      positions.push\r\n        (\r\n          left, base, top,\r\n          right, base, top,\r\n          right, base, bottom,\r\n          left, base, bottom\r\n        );\r\n      indices.push\r\n        (\r\n          offset + 0, offset + 1, offset + 2, offset + 0, offset + 2, offset + 3\r\n        );\r\n      offset += 4;\r\n      for (let i = 0; i < 4; i++) {\r\n        for (let j = 0; j < 4; j++) {\r\n          colors.push(color[j]);\r\n        }\r\n      }\r\n    }\r\n\r\n    const addSquareYZ = (left, right, top, bottom, base, color) => {\r\n      positions.push\r\n        (\r\n          base, left, top,\r\n          base, right, top,\r\n          base, right, bottom,\r\n          base, left, bottom\r\n        );\r\n      indices.push\r\n        (\r\n          offset + 0, offset + 1, offset + 2, offset + 0, offset + 2, offset + 3\r\n        );\r\n      offset += 4;\r\n      for (let i = 0; i < 4; i++) {\r\n        for (let j = 0; j < 4; j++) {\r\n          colors.push(color[j]);\r\n        }\r\n      }\r\n    }\r\n\r\n    const floorColor = [.2, .2, .2, 1.0];\r\n    const ceilingColor = [.7, .7, .7, 1];\r\n    const wallColor_Top = [.5, 0, .5, 1];\r\n    const wallColor_Bottom = [0, .5, 0, 1];\r\n    const wallColor_Left = [.5, 0, 0, 1];\r\n    const wallColor_Right = [0, .0, .5, 1];\r\n\r\n    const ofs_x = -maze.width / 2;\r\n    const ofs_y = -maze.height / 2;\r\n    for (let y = 0; y < maze.height; y++) {\r\n      for (let x = 0; x < maze.width; x++) {\r\n        const left = x + ofs_x;\r\n        const right = left + 1;\r\n        const top = y + ofs_y;\r\n        const bottom = top + 1;\r\n\r\n        if (maze.data[y][x] === 0) {\r\n          addSquareXY(left, right, top, bottom, 0.0, floorColor);\r\n        } else {\r\n          addSquareXY(left, right, top, bottom, 1.0, ceilingColor);\r\n\r\n          if (y === 0 || maze.data[y - 1][x] === 0) {\r\n            addSquareXZ(left, right, 0.0, 1.0, top, wallColor_Top);\r\n          }\r\n\r\n          if (x === 0 || maze.data[y][x - 1] === 0) {\r\n            addSquareYZ(bottom, top, 0.0, 1.0, left, wallColor_Left);\r\n          }\r\n\r\n          if (y === maze.height - 1 || maze.data[y + 1][x] === 0) {\r\n            addSquareXZ(right, left, 0.0, 1.0, bottom, wallColor_Bottom);\r\n          }\r\n\r\n          if (x === maze.width - 1 || maze.data[y][x + 1] === 0) {\r\n            addSquareYZ(top, bottom, 0.0, 1.0, right, wallColor_Right);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    const positionBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\r\n\r\n    const colorBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);\r\n\r\n    const indexBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint32Array(indices), gl.STATIC_DRAW);\r\n\r\n    return { position: positionBuffer, color: colorBuffer, indices: indexBuffer, vertexCount: indices.length };\r\n  }\r\n\r\n  _freeBuffers(gl, buffers) {\r\n    gl.deleteBuffer(buffers.position);\r\n    gl.deleteBuffer(buffers.color);\r\n    gl.deleteBuffer(buffers.indices);\r\n  }\r\n}\r\n\r\nexport default MazeModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen, degreesToRadians, generateMaze } from './utility'\r\nimport MazeModel from './MazeModel';\r\n\r\nclass MazeScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n    this.totalDelta = 0.0;\r\n  }\r\n\r\n  initScene(gl) {\r\n    const size = Math.floor(Math.random() * 45) * 2 + 11;\r\n    const maze = generateMaze(size, size);\r\n    const model = new MazeModel(gl, maze);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model,\r\n          location: [0.0, 0.0, -2.0 * size],\r\n          rotation: { angle: 0.0, axis: [0, 0, 1], speed: 0.5 }\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0],\r\n      cameraDir: [0.0, 0.0, 8.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 500.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    mat4.rotate(modelMatrix, modelMatrix, degreesToRadians(-45), [1, 0, 0]);\r\n    mat4.rotate(modelMatrix, modelMatrix, actor.rotation.angle, actor.rotation.axis);\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    actor.rotation.angle += deltaTime * actor.rotation.speed;\r\n    this.totalDelta += deltaTime;\r\n    if (this.totalDelta >= 10.0) {\r\n      this.totalDelta -= 10.0;\r\n      const size = Math.floor(Math.random() * 45) * 2 + 11;\r\n      const maze = generateMaze(size, size);\r\n      actor.location[2] = -2.0 * size;\r\n      actor.model.update(maze);\r\n    }\r\n  }\r\n}\r\n\r\nexport default MazeScene;\r\n","import Model from './Model';\r\n\r\nclass BrickWallModel extends Model {\r\n  constructor(gl) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: this._geometry,\r\n      texture: {\r\n        diffuse: 'images/Brick_Wall_017_basecolor.jpg',\r\n        normal: 'images/Brick_Wall_017_normal.jpg'\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/brickwall/vertex.glsl',\r\n        fragment: 'shaders/brickwall/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix) {\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      textureShow: 1,\r\n      ambientLight: [0.2, 0.2, 0.2],\r\n      directionalLight: {\r\n        color: [1.0, 1.0, 1.0],\r\n        direction: [0.0, 1.0, 0.0]\r\n      },\r\n      pointLight: {\r\n        color: [1.0, 1.0, 1.0],\r\n        position: [0.0, 0.0, 0.0]\r\n      },\r\n      cameraPosition: [0.0, 0.0, 0.0]\r\n    });\r\n  }\r\n\r\n  _geometry({ addSquare }) {\r\n    const f0 = [-1, -1, 1];\r\n    const f1 = [1, 1, 1];\r\n    const f2 = [-1, 1, 1];\r\n    const f3 = [1, -1, 1];\r\n    const b0 = [-1, -1, -1];\r\n    const b1 = [1, 1, -1];\r\n    const b2 = [-1, 1, -1];\r\n    const b3 = [1, -1, -1];\r\n    addSquare(f0, f1, f2, f3);  // front\r\n    addSquare(b3, b2, b1, b0);  // back\r\n    addSquare(b0, f2, b2, f0);  // left\r\n    addSquare(f3, b1, f1, b3);  // right\r\n    addSquare(b0, f3, f0, b3);  // bottom\r\n    addSquare(b1, f2, f1, b2);  // top\r\n  }\r\n}\r\n\r\nexport default BrickWallModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen } from './utility'\r\nimport BrickWallModel from './BrickWallModel';\r\n\r\nclass BrickWallScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n  }\r\n\r\n  initScene(gl) {\r\n    const model = new BrickWallModel(gl);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model,\r\n          location: [0.0, 0.0, -5.5],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.4\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.2\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      mat4.rotate(modelMatrix, modelMatrix, rotation.angle, rotation.axis);\r\n    }\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      rotation.angle += deltaTime * rotation.speed;\r\n    }\r\n  }\r\n}\r\n\r\nexport default BrickWallScene;\r\n","import Model from './Model';\r\nimport { getShape } from './utility';\r\n\r\nclass MaterialModel extends Model {\r\n  constructor(gl, shapeName) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: ({ addFaces }) => {\r\n        const shape = getShape(shapeName);\r\n        addFaces(shape.vertices, shape.faces);\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/material/vertex.glsl',\r\n        fragment: 'shaders/material/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix, lights, material) {\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      lights,\r\n      material\r\n    });\r\n  }\r\n}\r\n\r\nexport default MaterialModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen, getMaterial } from './utility'\r\nimport MaterialModel from './MaterialModel';\r\n\r\nclass MaterialScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n  }\r\n\r\n  initScene(gl) {\r\n    const model4 = new MaterialModel(gl, 'tetrahedron');\r\n    const model6 = new MaterialModel(gl, 'cube');\r\n    const model8 = new MaterialModel(gl, 'octahedron');\r\n    const model10 = new MaterialModel(gl, 'pentagonaltrapezohedron');\r\n    const model12 = new MaterialModel(gl, 'dodecahedron');\r\n    const model20 = new MaterialModel(gl, 'icosahedron');\r\n\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model: model4,\r\n          material: getMaterial('gold'),\r\n          location: [-3.75, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model6,\r\n          material: getMaterial('gold'),\r\n          location: [-2.25, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model8,\r\n          material: getMaterial('gold'),\r\n          location: [-0.75, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model10,\r\n          material: getMaterial('gold'),\r\n          location: [0.75, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model12,\r\n          material: getMaterial('gold'),\r\n          location: [2.25, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model20,\r\n          material: getMaterial('gold'),\r\n          location: [3.75, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model4,\r\n          material: getMaterial('chrome'),\r\n          location: [-3.75, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model6,\r\n          material: getMaterial('chrome'),\r\n          location: [-2.25, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model8,\r\n          material: getMaterial('chrome'),\r\n          location: [-0.75, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model10,\r\n          material: getMaterial('chrome'),\r\n          location: [0.75, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model12,\r\n          material: getMaterial('chrome'),\r\n          location: [2.25, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model20,\r\n          material: getMaterial('chrome'),\r\n          location: [3.75, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model4,\r\n          material: getMaterial('obsidian'),\r\n          location: [-3.75, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model6,\r\n          material: getMaterial('obsidian'),\r\n          location: [-2.25, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model8,\r\n          material: getMaterial('obsidian'),\r\n          location: [-0.75, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model10,\r\n          material: getMaterial('obsidian'),\r\n          location: [0.75, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model12,\r\n          material: getMaterial('obsidian'),\r\n          location: [2.25, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model20,\r\n          material: getMaterial('obsidian'),\r\n          location: [3.75, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      mat4.rotate(modelMatrix, modelMatrix, rotation.angle, rotation.axis);\r\n    }\r\n\r\n    const lights = [\r\n      {\r\n        position: [10.0, -10.0, 0.0],\r\n        ambient: [0.2, 0.2, 0.2],\r\n        diffuse: [0.5, 0.5, 0.5],\r\n        specular: [0.9, 0.9, 0.9]\r\n      },\r\n      {\r\n        position: [-10.0, 10.0, 0.0],\r\n        ambient: [0.2, 0.2, 0.2],\r\n        diffuse: [0.5, 0.5, 0.5],\r\n        specular: [0.9, 0.9, 0.9]\r\n      }\r\n    ];\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix, lights, actor.material);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      rotation.angle += deltaTime * rotation.speed;\r\n    }\r\n  }\r\n}\r\n\r\nexport default MaterialScene;\r\n","import React from 'react';\r\nimport ColoredSquareScene from './ColoredSquareScene';\r\nimport ColoredCubeScene from './ColoredCubeScene';\r\nimport TexturedCubeScene from './TexturedCubeScene';\r\nimport LightedCubeScene from './LightedCubeScene';\r\nimport MazeScene from './MazeScene';\r\nimport BrickWallScene from './BrickWallScene';\r\nimport MaterialScene from './MaterialScene';\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onClickCanvas = this.onClickCanvas.bind(this);\r\n    this.renderCanvas = this.renderCanvas.bind(this);\r\n    this.scenes = [\r\n      { init: false, render: new ColoredSquareScene() },\r\n      { init: false, render: new ColoredCubeScene() },\r\n      { init: false, render: new TexturedCubeScene() },\r\n      { init: false, render: new LightedCubeScene() },\r\n      { init: false, render: new MazeScene() },\r\n      { init: false, render: new BrickWallScene() },\r\n      { init: false, render: new MaterialScene() }\r\n    ];\r\n    this.sceneIndex = this.scenes.length - 1;\r\n  }\r\n\r\n  componentDidMount() {\r\n    const canvas = this.canvas;\r\n    const rect = canvas.getBoundingClientRect()\r\n    canvas.width = rect.width;\r\n    canvas.height = rect.height;\r\n    this.gl = canvas.getContext('webgl');\r\n    if (this.gl === null) {\r\n      alert(\"Unable to initialize WebGL. Your browser or machine may not support it.\");\r\n    } else {\r\n      this.gl.enable(this.gl.CULL_FACE);\r\n      this.gl.cullFace(this.gl.BACK);\r\n      this.gl.getExtension('OES_element_index_uint');\r\n      const scene = this.scenes[this.sceneIndex];\r\n      if (!scene.init) {\r\n        scene.init = true;\r\n        scene.render.initScene(this.gl);\r\n      }\r\n      this.frame = window.requestAnimationFrame(this.renderCanvas);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.cancelAnimationFrame(this.frame);\r\n  }\r\n\r\n  onClickCanvas(event) {\r\n    event.preventDefault();\r\n    this.sceneIndex = (this.sceneIndex + 1) % this.scenes.length;\r\n    const scene = this.scenes[this.sceneIndex];\r\n    if (!scene.init) {\r\n      scene.init = true;\r\n      scene.render.initScene(this.gl);\r\n    }\r\n  }\r\n\r\n  renderCanvas(timeStamp) {\r\n    timeStamp *= 0.001;\r\n    if (!this.timeStamp) {\r\n      this.timeStamp = timeStamp;\r\n    }\r\n    const deltaTime = timeStamp - this.timeStamp;\r\n    this.timeStamp = timeStamp;\r\n    const scene = this.scenes[this.sceneIndex];\r\n    scene.render.drawScene(this.gl, deltaTime);\r\n    this.frame = window.requestAnimationFrame(this.renderCanvas);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"screen\">\r\n        <canvas className=\"canvas\" ref={elem => this.canvas = elem} onClick={this.onClickCanvas}></canvas>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}