{"version":3,"sources":["components/Message.js","components/Controls.js","lib/utility.js","scenes/ColoredSquareScene.js","models/Model.js","models/ColoredModel.js","scenes/ColoredCubeScene.js","models/TexturedCubeModel.js","scenes/TexturedCubeScene.js","models/LightedCubeModel.js","scenes/LightedCubeScene.js","models/MazeModel.js","scenes/MazeScene.js","models/BrickWallModel.js","scenes/BrickWallScene.js","models/MaterialModel.js","scenes/MaterialScene.js","lib/SceneManager.js","components/App.js","serviceWorker.js","index.js"],"names":["Message","message","id","map","text","index","key","SelectControl","props","control","options","i","length","push","value","className","htmlFor","name","onChange","event","target","Controls","show","onClickPrevious","onClickNext","controls","option","type","onClick","initShaderProgram","gl","vsSource","fsSource","vertexShader","_loadShader","VERTEX_SHADER","fragmentShader","FRAGMENT_SHADER","shaderProgram","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","alert","getProgramInfoLog","_typeToString","FLOAT","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT","INT_VEC2","INT_VEC3","INT_VEC4","BOOL","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","SAMPLER_2D","SAMPLER_CUBE","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","deleteShader","loadTexture","url","texture","createTexture","bindTexture","TEXTURE_2D","internalFormat","RGBA","srcFormat","srcType","UNSIGNED_BYTE","pixel","Uint8Array","texImage2D","image","Image","onload","_isPowerOf2","width","height","generateMipmap","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","src","clearScreen","clearColor","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","_directions","x","y","getShape","shape","s3","Math","sqrt","s6","vertices","faces","r","a","phi","b","c","_materials","emerald","ambient","diffuse","specular","shininess","jade","obsidian","pearl","ruby","turquoise","brass","bronze","chrome","copper","gold","silver","blackPlastic","cyanPlastic","greenPlastic","redPlastic","whitePlastic","yellowPlastic","blackRubber","cyanRubber","greenRubber","redRubber","whiteRubber","yellowRubber","getMaterialList","materials","prop","hasOwnProperty","getMaterial","ColoredSquareScene","this","initScene","bind","drawScene","programInfo","program","attribLocations","vertexPosition","getAttribLocation","vertexColor","uniformLocations","projectionMatrix","getUniformLocation","modelViewMatrix","buffers","_initBuffers","scene","squareRotation","deltaTime","bindBuffer","ARRAY_BUFFER","color","vertexAttribPointer","enableVertexAttribArray","position","fieldOfView","PI","aspect","canvas","clientWidth","clientHeight","mat4","useProgram","uniformMatrix4fv","drawArrays","TRIANGLE_STRIP","createBuffer","bufferData","Float32Array","STATIC_DRAW","Model","geometry","normal","occlusion","Promise","all","fetch","vertex","then","response","fragment","_setupShader","model","shaders","vertexShaders","Array","fill","fragmentShaders","pendingLoads","shaderParameters","attributeCount","ACTIVE_ATTRIBUTES","attributes","attribute","getActiveAttrib","uniformCount","ACTIVE_UNIFORMS","uniforms","uniform","getActiveUniform","getShaderParameters","forEach","location","vertexNormal","vertexTangent","vertexBitangent","vertexTextureCoord","modelMatrix","viewMatrix","normalMatrix","textureDiffuse","textureNormal","textureHeight","textureOcclusion","showDiffuseMap","showNormalMap","showAmbientOcclusionMap","perPixel","parallaxHeightScale","parallaxSteps","parallaxOcclusionMapping","cameraPosition","ambientLight","directionalLight","direction","pointLight","lights","material","requirements","positions","normals","tangents","bitangents","textureCoordinates","colors","indices","vec3","tangent","bitangent","offset","addSquare","c0","c1","c2","c3","addFace","face","addTriangle","c4","addPentagon","addFaces","positionBuffer","indexBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","vertexCount","normalBuffer","tangentBuffer","bitangentBuffer","textureCoordBuffer","textureCoord","colorBuffer","deleteBuffer","shaderIndex","uniform1i","uniform1f","uniform3fv","light","activeTexture","TEXTURE0","TEXTURE1","TEXTURE2","TEXTURE3","UNSIGNED_SHORT","drawElements","TRIANGLES","ColoredModel","shapeName","draw","_initModel","_drawModel","ColoredCubeScene","model6","model12","actors","scale","rotations","angle","axis","speed","camera","actor","_renderActor","_animateActor","rotation","TexturedCubeModel","_geometry","f0","f1","f2","f3","b0","b1","b2","b3","TexturedCubeScene","LightedCubeModel","LightedCubeScene","rotationSpeed","cameraDir","MazeModel","maze","update","_deleteBuffers","floorColor","ceilingColor","wallColor_Back","wallColor_Front","wallColor_Left","wallColor_Right","ofs_x","ofs_y","left","right","back","front","data","MazeScene","getOptions","setOption","totalDelta","find","Number","materialName","undefined","_generateMaze","size","floor","random","windiness","carve","pos","canCarve","dir","isInBounds","addDir","nxt","len","lastDir","start","cells","cell","posCells","includes","pop","generateMaze","BrickWallModel","BrickWallScene","MaterialModel","MaterialScene","model4","model8","model10","model20","SceneManager","resizeViewport","getScene","previousScene","nextScene","renderScene","scenes","init","render","sceneIndex","getContext","CULL_FACE","cullFace","BACK","rect","getBoundingClientRect","viewport","timeStamp","App","onResize","onKeyDown","onKeyUp","onAnimationFrame","state","showControls","keys","sceneManager","setState","frame","window","requestAnimationFrame","addEventListener","showMessage","cancelAnimationFrame","removeEventListener","preventDefault","indexOf","onKeyPress","filter","v","messageTimer","cancelMessage","forceUpdate","setTimeout","clearMessage","clearTimeout","ref","elem","React","Component","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.223e9a43.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Message = ({ message }) => {\r\n  if (!message) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div id=\"message\">\r\n      {message.map((text, index) => (<div key={index}>{text}</div>))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n","import React from 'react';\r\n\r\nconst SelectControl = (props) => {\r\n  function onChange(event) {\r\n    props.onChange(control, event.target.value);\r\n  }\r\n  const { control } = props;\r\n  const options = [];\r\n  for (let i = 0; i < control.options.length; i++) {\r\n    options.push(\r\n      (<option key={i} value={i}>{control.options[i]}</option>)\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"control\">\r\n      <label htmlFor={control.name}>{control.name}</label>\r\n      <select id={control.name} className=\"select-css\" value={control.value} onChange={onChange}>\r\n        {options}\r\n      </select>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Controls = ({ show, onClickPrevious, onClickNext, onChange, options }) => {\r\n  if (!show) {\r\n    return null;\r\n  }\r\n  const controls = options.map((option, index) => {\r\n    switch (option.type) {\r\n      case 'select':\r\n        return <SelectControl key={index} control={option} onChange={onChange} />\r\n      default:\r\n        return (\r\n          <div>{option.type} is not supported</div>\r\n        );\r\n    }\r\n  });\r\n  return (\r\n    <div id=\"overlay\">\r\n      <div className=\"none\">\r\n        <span className=\"left\" onClick={onClickPrevious}>❮ PREV</span>\r\n        <span className=\"right\" onClick={onClickNext}>NEXT ❯</span>\r\n      </div>\r\n      <div>\r\n        {controls}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Controls;\r\n","export function degreesToRadians(degrees) {\r\n  var pi = Math.PI;\r\n  return degrees * (pi / 180);\r\n}\r\n\r\nexport function initShaderProgram(gl, vsSource, fsSource) {\r\n  const vertexShader = _loadShader(gl, gl.VERTEX_SHADER, vsSource);\r\n  const fragmentShader = _loadShader(gl, gl.FRAGMENT_SHADER, fsSource);\r\n  const shaderProgram = gl.createProgram();\r\n  gl.attachShader(shaderProgram, vertexShader);\r\n  gl.attachShader(shaderProgram, fragmentShader);\r\n  gl.linkProgram(shaderProgram);\r\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\r\n    alert('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));\r\n    return null;\r\n  }\r\n  return shaderProgram;\r\n}\r\n\r\nexport function getShaderParameters(gl, shaderProgram) {\r\n  const attributeCount = gl.getProgramParameter(shaderProgram, gl.ACTIVE_ATTRIBUTES);\r\n  const attributes = [];\r\n  for (let i = 0; i < attributeCount; i++) {\r\n    const attribute = gl.getActiveAttrib(shaderProgram, i);\r\n    attributes.push({ name: attribute.name, type: _typeToString(gl, attribute.type) });\r\n  }\r\n  const uniformCount = gl.getProgramParameter(shaderProgram, gl.ACTIVE_UNIFORMS);\r\n  const uniforms = [];\r\n  for (let i = 0; i < uniformCount; i++) {\r\n    const uniform = gl.getActiveUniform(shaderProgram, i);\r\n    uniforms.push({ name: uniform.name, type: _typeToString(gl, uniform.type) });\r\n  }\r\n  return {\r\n    attributes,\r\n    uniforms\r\n  };\r\n}\r\n\r\nfunction _typeToString(gl, type) {\r\n  switch (type) {\r\n    case gl.FLOAT:\r\n      return \"FLOAT\";\r\n    case gl.FLOAT_VEC2:\r\n      return \"FLOAT_VEC2\";\r\n    case gl.FLOAT_VEC3:\r\n      return \"FLOAT_VEC3\";\r\n    case gl.FLOAT_VEC4:\r\n      return \"FLOAT_VEC4\";\r\n    case gl.INT:\r\n      return \"INT\";\r\n    case gl.INT_VEC2:\r\n      return \"INT_VEC2\";\r\n    case gl.INT_VEC3:\r\n      return \"INT_VEC3\";\r\n    case gl.INT_VEC4:\r\n      return \"INT_VEC4\";\r\n    case gl.BOOL:\r\n      return \"BOOL\";\r\n    case gl.BOOL_VEC2:\r\n      return \"BOOL_VEC2\";\r\n    case gl.BOOL_VEC3:\r\n      return \"BOOL_VEC3\";\r\n    case gl.BOOL_VEC4:\r\n      return \"BOOL_VEC4\";\r\n    case gl.FLOAT_MAT2:\r\n      return \"FLOAT_MAT2\";\r\n    case gl.FLOAT_MAT3:\r\n      return \"FLOAT_MAT3\";\r\n    case gl.FLOAT_MAT4:\r\n      return \"FLOAT_MAT4\";\r\n    case gl.SAMPLER_2D:\r\n      return \"SAMPLER_2D\";\r\n    case gl.SAMPLER_CUBE:\r\n      return \"SAMPLER_CUBE\";\r\n    default:\r\n      return \"UNKNOWN\";\r\n  }\r\n}\r\n\r\nfunction _loadShader(gl, type, source) {\r\n  const shader = gl.createShader(type);\r\n  gl.shaderSource(shader, source);\r\n  gl.compileShader(shader);\r\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n    alert('An error occurred compiling the shaders: ' + gl.getShaderInfoLog(shader));\r\n    gl.deleteShader(shader);\r\n    return null;\r\n  }\r\n  return shader;\r\n}\r\n\r\nexport function loadTexture(gl, url) {\r\n  const texture = gl.createTexture();\r\n  gl.bindTexture(gl.TEXTURE_2D, texture);\r\n  const level = 0;\r\n  const internalFormat = gl.RGBA;\r\n  const width = 1;\r\n  const height = 1;\r\n  const border = 0;\r\n  const srcFormat = gl.RGBA;\r\n  const srcType = gl.UNSIGNED_BYTE;\r\n  const pixel = new Uint8Array([0, 0, 255, 255]);\r\n  gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, srcFormat, srcType, pixel);\r\n  const image = new Image();\r\n  image.onload = () => {\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texImage2D(gl.TEXTURE_2D, level, internalFormat,\r\n      srcFormat, srcType, image);\r\n    if (_isPowerOf2(image.width) && _isPowerOf2(image.height)) {\r\n      gl.generateMipmap(gl.TEXTURE_2D);\r\n    } else {\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n    }\r\n  };\r\n  image.src = url;\r\n  return texture;\r\n}\r\n\r\nfunction _isPowerOf2(value) {\r\n  return (value & (value - 1)) === 0;\r\n}\r\n\r\nexport function clearScreen(gl) {\r\n  gl.clearColor(0.0, 0.0, 0.0, 1.0);\r\n  gl.clearDepth(1.0);\r\n  gl.enable(gl.DEPTH_TEST);\r\n  gl.depthFunc(gl.LEQUAL);\r\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n}\r\n\r\nconst _directions = [\r\n  { x: -1, y: 0 },\r\n  { x: 0, y: -1 },\r\n  { x: 1, y: 0 },\r\n  { x: 0, y: 1 }\r\n];\r\n\r\nexport function generateMaze(width, height, windiness = 0.8) {\r\n  const carve = (pos) => {\r\n    data[pos.y][pos.x] = 0;\r\n  }\r\n\r\n  const canCarve = (pos, dir) => {\r\n    if (!isInBounds(addDir(pos, dir, 3))) {\r\n      return false;\r\n    }\r\n    const nxt = addDir(pos, dir, 2);\r\n    return data[nxt.y][nxt.x] === 1;\r\n  }\r\n\r\n  const isInBounds = (pos) => {\r\n    if (pos.x < 0 || pos.y < 0 || pos.x >= width || pos.y >= height) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  const addDir = (pos, dir, len) => {\r\n    return {\r\n      x: pos.x + dir.x * len,\r\n      y: pos.y + dir.y * len\r\n    }\r\n  }\r\n\r\n  const data = [];\r\n  for (let y = 0; y < height; y++) {\r\n    data.push(new Array(width).fill(1));\r\n  }\r\n\r\n  const start = { x: 1, y: 1 };\r\n  const cells = [];\r\n  let lastDir;\r\n  carve(start);\r\n  cells.push(start);\r\n  while (cells.length > 0) {\r\n    const cell = cells[cells.length - 1];\r\n    const posCells = [];\r\n    for (let i = 0; i < _directions.length; i++) {\r\n      const dir = _directions[i];\r\n      if (canCarve(cell, dir)) {\r\n        posCells.push(dir);\r\n      }\r\n    }\r\n    if (posCells.length > 0) {\r\n      let dir;\r\n      if (posCells.includes(lastDir) && Math.random() > windiness) {\r\n        dir = lastDir;\r\n      } else {\r\n        dir = posCells[Math.floor(Math.random() * posCells.length)];\r\n      }\r\n      carve(addDir(cell, dir, 1));\r\n      carve(addDir(cell, dir, 2));\r\n      cells.push(addDir(cell, dir, 2));\r\n      lastDir = dir;\r\n    } else {\r\n      cells.pop();\r\n      lastDir = null;\r\n    }\r\n  }\r\n  return {\r\n    width,\r\n    height,\r\n    data\r\n  };\r\n}\r\n\r\nexport function getShape(shape) {\r\n  if (shape === 'tetrahedron') {\r\n    const s3 = Math.sqrt(3);\r\n    const s6 = Math.sqrt(6);\r\n\r\n    const vertices = [\r\n      [s3 / 3, -s6 / 3 * 0.333 + s6 * 0.025, 0],         // right\r\n      [-s3 / 6, -s6 / 3 * 0.333 + s6 * 0.025, 1 / 2],    // left front\r\n      [-s3 / 6, -s6 / 3 * 0.333 + s6 * 0.025, -1 / 2],   // left back\r\n      [0, s6 / 3 * 0.666 + s6 * 0.025, 0]                // top\r\n    ];\r\n\r\n    const faces = [\r\n      [0, 1, 2],\r\n      [3, 1, 0],\r\n      [3, 0, 2],\r\n      [3, 2, 1]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'cube') {\r\n    const r = .3;\r\n\r\n    const vertices = [\r\n      [-r, -r, -r],\r\n      [-r, -r, r],\r\n      [r, -r, r],\r\n      [r, -r, -r],\r\n      [-r, r, -r],\r\n      [-r, r, r],\r\n      [r, r, r],\r\n      [r, r, -r]\r\n    ];\r\n\r\n    const faces = [\r\n      [0, 3, 2, 1],   // bottom\r\n      [4, 5, 6, 7],   // top\r\n      [0, 1, 5, 4],   // left\r\n      [2, 3, 7, 6],   // right\r\n      [1, 2, 6, 5],   // front\r\n      [3, 0, 4, 7]    // back\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'octahedron') {\r\n    const a = 1 / (2 * Math.sqrt(2));\r\n    const b = 1 / 2;\r\n\r\n    const vertices = [\r\n      [-a, 0, a],    // front left\r\n      [a, 0, a],     // front right\r\n      [a, 0, -a],    // back right\r\n      [-a, 0, -a],   // back left\r\n      [0, b, 0],     // top\r\n      [0, -b, 0]     // bottom\r\n    ];\r\n\r\n    const faces = [\r\n      [3, 0, 4],\r\n      [2, 3, 4],\r\n      [1, 2, 4],\r\n      [0, 1, 4],\r\n      [3, 2, 5],\r\n      [0, 3, 5],\r\n      [2, 1, 5],\r\n      [1, 0, 5]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'pentagonaltrapezohedron') {\r\n    const vertices = [\r\n      [0.210292440, 0.15278640, 0.340260320],\r\n      [-0.08032456, 0.24721360, 0.340260320],\r\n      [-0.25993576, 0.00000000, 0.340260320],\r\n      [0.210292440, -0.6472136, 0.340260320],\r\n      [0.420584800, 0.00000000, -0.08032456],\r\n      [0.340260320, 0.24721360, 0.080324560],\r\n      [-0.21029244, 0.64721360, -0.34026032],\r\n      [-0.42058480, 0.00000000, 0.080324560],\r\n      [-0.34026032, -0.2472136, -0.08032456],\r\n      [0.080324560, -0.2472136, -0.34026032],\r\n      [0.259935760, 0.00000000, -0.34026032],\r\n      [-0.21029244, -0.1527864, -0.34026032]\r\n    ];\r\n\r\n    const faces = [\r\n      [3, 0, 1, 2],\r\n      [0, 3, 4, 5],\r\n      [1, 0, 5, 6],\r\n      [2, 1, 6, 7],\r\n      [3, 2, 7, 8],\r\n      [4, 3, 9, 10],\r\n      [5, 4, 10, 6],\r\n      [7, 6, 11, 8],\r\n      [3, 8, 11, 9],\r\n      [10, 9, 11, 6]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'dodecahedron') {\r\n    const phi = (1 + Math.sqrt(5)) / 2;\r\n    const a = 0.5;\r\n    const b = 0.5 * 1 / phi;\r\n    const c = 0.5 * (2 - phi);\r\n\r\n    const vertices = [\r\n      [c, 0, a],\r\n      [-c, 0, a],\r\n      [-b, b, b],\r\n      [0, a, c],\r\n      [b, b, b],\r\n      [b, -b, b],\r\n      [0, -a, c],\r\n      [-b, -b, b],\r\n      [c, 0, -a],\r\n      [-c, 0, -a],\r\n      [-b, -b, -b],\r\n      [0, -a, -c],\r\n      [b, -b, -b],\r\n      [b, b, -b],\r\n      [0, a, -c],\r\n      [-b, b, -b],\r\n      [a, c, 0],\r\n      [-a, c, 0],\r\n      [-a, -c, 0],\r\n      [a, -c, 0]\r\n    ];\r\n\r\n    const faces = [\r\n      [4, 3, 2, 1, 0],\r\n      [7, 6, 5, 0, 1],\r\n      [12, 11, 10, 9, 8],\r\n      [15, 14, 13, 8, 9],\r\n      [14, 3, 4, 16, 13],\r\n      [3, 14, 15, 17, 2],\r\n      [11, 6, 7, 18, 10],\r\n      [6, 11, 12, 19, 5],\r\n      [4, 0, 5, 19, 16],\r\n      [12, 8, 13, 16, 19],\r\n      [15, 9, 10, 18, 17],\r\n      [7, 1, 2, 17, 18]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'icosahedron') {\r\n    const phi = (1 + Math.sqrt(5)) / 2;\r\n    const a = 1 / 2;\r\n    const b = 1 / (2 * phi);\r\n\r\n    const vertices = [\r\n      [0, b, -a],\r\n      [b, a, 0],\r\n      [-b, a, 0],\r\n      [0, b, a],\r\n      [0, -b, a],\r\n      [-a, 0, b],\r\n      [a, 0, b],\r\n      [0, -b, -a],\r\n      [a, 0, -b],\r\n      [-a, 0, -b],\r\n      [b, -a, 0],\r\n      [-b, -a, 0]\r\n    ];\r\n\r\n    const faces = [\r\n      [1, 0, 2],\r\n      [2, 3, 1],\r\n      [4, 3, 5],\r\n      [6, 3, 4],\r\n      [7, 0, 8],\r\n      [9, 0, 7],\r\n      [10, 4, 11],\r\n      [11, 7, 10],\r\n      [5, 2, 9],\r\n      [9, 11, 5],\r\n      [8, 1, 6],\r\n      [6, 10, 8],\r\n      [5, 3, 2],\r\n      [1, 3, 6],\r\n      [2, 0, 9],\r\n      [8, 0, 1],\r\n      [9, 7, 11],\r\n      [10, 7, 8],\r\n      [11, 4, 5],\r\n      [6, 4, 10]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n}\r\n\r\nconst _materials = {\r\n  emerald: {\r\n    ambient: [0.0215, 0.1745, 0.0215], diffuse: [0.07568, 0.61424, 0.07568], specular: [0.633, 0.727811, 0.633], shininess: 0.6\r\n  },\r\n  jade: {\r\n    ambient: [0.135, 0.2225, 0.1575], diffuse: [0.54, 0.89, 0.63], specular: [0.316228, 0.316228, 0.316228], shininess: 0.1\r\n  },\r\n  obsidian: {\r\n    ambient: [0.05375, 0.05, 0.06625], diffuse: [0.18275, 0.17, 0.22525], specular: [0.332741, 0.328634, 0.346435], shininess: 0.3\r\n  },\r\n  pearl: {\r\n    ambient: [0.25, 0.20725, 0.20725], diffuse: [1, 0.829, 0.829], specular: [0.296648, 0.296648, 0.296648], shininess: 0.088\r\n  },\r\n  ruby: {\r\n    ambient: [0.1745, 0.01175, 0.01175], diffuse: [0.61424, 0.04136, 0.04136], specular: [0.727811, 0.626959, 0.626959], shininess: 0.6\r\n  },\r\n  turquoise: {\r\n    ambient: [0.1, 0.18725, 0.1745], diffuse: [0.396, 0.74151, 0.69102], specular: [0.297254, 0.30829, 0.306678], shininess: 0.1\r\n  },\r\n  brass: {\r\n    ambient: [0.329412, 0.223529, 0.027451], diffuse: [0.780392, 0.568627, 0.113725], specular: [0.992157, 0.941176, 0.807843], shininess: 0.21794872\r\n  },\r\n  bronze: {\r\n    ambient: [0.2125, 0.1275, 0.054], diffuse: [0.714, 0.4284, 0.18144], specular: [0.393548, 0.271906, 0.166721], shininess: 0.2\r\n  },\r\n  chrome: {\r\n    ambient: [0.25, 0.25, 0.25], diffuse: [0.4, 0.4, 0.4], specular: [0.774597, 0.774597, 0.774597], shininess: 0.6\r\n  },\r\n  copper: {\r\n    ambient: [0.19125, 0.0735, 0.0225], diffuse: [0.7038, 0.27048, 0.0828], specular: [0.256777, 0.137622, 0.086014], shininess: 0.1\r\n  },\r\n  gold: {\r\n    ambient: [0.24725, 0.1995, 0.0745], diffuse: [0.75164, 0.60648, 0.22648], specular: [0.628281, 0.555802, 0.366065], shininess: 0.4\r\n  },\r\n  silver: {\r\n    ambient: [0.19225, 0.19225, 0.19225], diffuse: [0.50754, 0.50754, 0.50754], specular: [0.508273, 0.508273, 0.508273], shininess: 0.4\r\n  },\r\n  blackPlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.01, 0.01, 0.01], specular: [0.50, 0.50, 0.50], shininess: 0.25\r\n  },\r\n  cyanPlastic: {\r\n    ambient: [0.0, 0.1, 0.06], diffuse: [0.0, 0.50980392, 0.50980392], specular: [0.50196078, 0.50196078, 0.50196078], shininess: 0.25\r\n  },\r\n  greenPlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.1, 0.35, 0.1], specular: [0.45, 0.55, 0.45], shininess: 0.25\r\n  },\r\n  redPlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.5, 0.0, 0.0], specular: [0.7, 0.6, 0.6], shininess: 0.25\r\n  },\r\n  whitePlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.55, 0.55, 0.55], specular: [0.70, 0.70, 0.70], shininess: 0.25\r\n  },\r\n  yellowPlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.5, 0.5, 0.0], specular: [0.60, 0.60, 0.50], shininess: 0.25\r\n  },\r\n  blackRubber: {\r\n    ambient: [0.02, 0.02, 0.02], diffuse: [0.01, 0.01, 0.01], specular: [0.4, 0.4, 0.4], shininess: 0.078125\r\n  },\r\n  cyanRubber: {\r\n    ambient: [0.0, 0.05, 0.05], diffuse: [0.4, 0.5, 0.5], specular: [0.04, 0.7, 0.7], shininess: 0.078125\r\n  },\r\n  greenRubber: {\r\n    ambient: [0.0, 0.05, 0.0], diffuse: [0.4, 0.5, 0.4], specular: [0.04, 0.7, 0.04], shininess: 0.078125\r\n  },\r\n  redRubber: {\r\n    ambient: [0.05, 0.0, 0.0], diffuse: [0.5, 0.4, 0.4], specular: [0.7, 0.04, 0.04], shininess: 0.078125\r\n  },\r\n  whiteRubber: {\r\n    ambient: [0.05, 0.05, 0.05], diffuse: [0.5, 0.5, 0.5], specular: [0.7, 0.7, 0.7], shininess: 0.078125\r\n  },\r\n  yellowRubber: {\r\n    ambient: [0.05, 0.05, 0.0], diffuse: [0.5, 0.5, 0.4], specular: [0.7, 0.7, 0.04], shininess: 0.078125\r\n  }\r\n};\r\n\r\nexport function getMaterialList() {\r\n  const materials = [];\r\n  for (const prop in _materials) {\r\n    if (_materials.hasOwnProperty(prop)) {\r\n      materials.push(prop);\r\n    }\r\n  }\r\n  return materials;\r\n}\r\n\r\nexport function getMaterial(name) {\r\n  return _materials[name];\r\n}\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { initShaderProgram, clearScreen } from '../lib/utility'\r\n\r\nclass ColoredSquareScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n  }\r\n\r\n  initScene(gl) {\r\n    const vsSource = `\r\n    attribute vec4 aVertexPosition;\r\n    attribute vec4 aVertexColor;\r\n\r\n    uniform mat4 uModelViewMatrix;\r\n    uniform mat4 uProjectionMatrix;\r\n\r\n    varying lowp vec4 vColor;\r\n\r\n    void main(void) {\r\n      gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\r\n      vColor = aVertexColor;\r\n    }\r\n  `;\r\n\r\n    const fsSource = `\r\n    varying lowp vec4 vColor;\r\n\r\n    void main(void) {\r\n      gl_FragColor = vColor;\r\n    }\r\n  `;\r\n\r\n    const shaderProgram = initShaderProgram(gl, vsSource, fsSource);\r\n\r\n    const programInfo = {\r\n      program: shaderProgram,\r\n      attribLocations: {\r\n        vertexPosition: gl.getAttribLocation(shaderProgram, 'aVertexPosition'),\r\n        vertexColor: gl.getAttribLocation(shaderProgram, 'aVertexColor')\r\n      },\r\n      uniformLocations: {\r\n        projectionMatrix: gl.getUniformLocation(shaderProgram, 'uProjectionMatrix'),\r\n        modelViewMatrix: gl.getUniformLocation(shaderProgram, 'uModelViewMatrix')\r\n      }\r\n    };\r\n\r\n    const buffers = this._initBuffers(gl);\r\n\r\n    this.scene = { programInfo, buffers, squareRotation: 0.0 };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n    const { programInfo, buffers } = scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    {\r\n      const numComponents = 4;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.color);\r\n      gl.vertexAttribPointer(\r\n        programInfo.attribLocations.vertexColor,\r\n        numComponents,\r\n        type,\r\n        normalize,\r\n        stride,\r\n        offset);\r\n      gl.enableVertexAttribArray(\r\n        programInfo.attribLocations.vertexColor);\r\n    }\r\n\r\n    {\r\n      const numComponents = 2;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.position);\r\n      gl.vertexAttribPointer(\r\n        programInfo.attribLocations.vertexPosition,\r\n        numComponents,\r\n        type,\r\n        normalize,\r\n        stride,\r\n        offset);\r\n      gl.enableVertexAttribArray(\r\n        programInfo.attribLocations.vertexPosition);\r\n    }\r\n\r\n    {\r\n      const fieldOfView = 45 * Math.PI / 180;\r\n      const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n      const zNear = 0.1;\r\n      const zFar = 100.0;\r\n      const projectionMatrix = mat4.create();\r\n      mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n      const modelViewMatrix = mat4.create();\r\n      mat4.translate(modelViewMatrix, modelViewMatrix, [-0.0, 0.0, -6.0]);\r\n      mat4.rotate(modelViewMatrix, modelViewMatrix, scene.squareRotation, [0, 0, 1]);\r\n      gl.useProgram(programInfo.program);\r\n      gl.uniformMatrix4fv(\r\n        programInfo.uniformLocations.projectionMatrix,\r\n        false,\r\n        projectionMatrix);\r\n      gl.uniformMatrix4fv(\r\n        programInfo.uniformLocations.modelViewMatrix,\r\n        false,\r\n        modelViewMatrix);\r\n    }\r\n\r\n    {\r\n      const offset = 0;\r\n      const vertexCount = 4;\r\n      gl.drawArrays(gl.TRIANGLE_STRIP, offset, vertexCount);\r\n    }\r\n\r\n    scene.squareRotation += deltaTime;\r\n  }\r\n\r\n  _initBuffers(gl) {\r\n    const positions = [\r\n      1.0, 1.0,\r\n      -1.0, 1.0,\r\n      1.0, -1.0,\r\n      -1.0, -1.0,\r\n    ];\r\n    const position = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, position);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\r\n\r\n    const colors = [\r\n      1.0, 1.0, 1.0, 1.0,\r\n      1.0, 0.0, 0.0, 1.0,\r\n      0.0, 1.0, 0.0, 1.0,\r\n      0.0, 0.0, 1.0, 1.0\r\n    ];\r\n    const color = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, color);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);\r\n\r\n    return { position, color };\r\n  }\r\n}\r\n\r\nexport default ColoredSquareScene;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport * as vec3 from 'gl-matrix/vec3';\r\nimport { loadTexture, initShaderProgram, getShaderParameters } from '../lib/utility'\r\n\r\nclass Model {\r\n  _initModel(options) {\r\n    const { gl, geometry } = options;\r\n    let texture\r\n    if (options.texture) {\r\n      texture = {};\r\n      if (options.texture.diffuse) {\r\n        texture.diffuse = loadTexture(gl, options.texture.diffuse);\r\n      }\r\n      if (options.texture.normal) {\r\n        texture.normal = loadTexture(gl, options.texture.normal);\r\n      }\r\n      if (options.texture.height) {\r\n        texture.height = loadTexture(gl, options.texture.height);\r\n      }\r\n      if (options.texture.occlusion) {\r\n        texture.occlusion = loadTexture(gl, options.texture.occlusion);\r\n      }\r\n    }\r\n    if (options.shader) {\r\n      let vertexShader;\r\n      let fragmentShader;\r\n      Promise.all([\r\n        fetch(options.shader.vertex).then((response) => response.text()).then((text) => vertexShader = text),\r\n        fetch(options.shader.fragment).then((response) => response.text()).then((text) => fragmentShader = text)\r\n      ]).then(() => {\r\n        const shader = this._setupShader(gl, vertexShader, fragmentShader);\r\n        const buffers = this._initBuffers(gl, [shader], geometry);\r\n        this.model = {\r\n          shaders: [shader],\r\n          buffers,\r\n          texture\r\n        };\r\n      });\r\n    }\r\n    else {\r\n      const vertexShaders = new Array(options.shaders.length).fill(null);\r\n      const fragmentShaders = new Array(options.shaders.length).fill(null);\r\n      const pendingLoads = [];\r\n      for (let i = 0; i < options.shaders.length; i++) {\r\n        pendingLoads.push(fetch(options.shaders[i].vertex).then((response) => response.text()).then((text) => vertexShaders[i] = text));\r\n        pendingLoads.push(fetch(options.shaders[i].fragment).then((response) => response.text()).then((text) => fragmentShaders[i] = text));\r\n      }\r\n\r\n      Promise.all(pendingLoads)\r\n        .then(() => {\r\n          const shaders = [];\r\n          for (let i = 0; i < options.shaders.length; i++) {\r\n            shaders.push(this._setupShader(gl, vertexShaders[i], fragmentShaders[i]));\r\n          }\r\n          const buffers = this._initBuffers(gl, shaders, geometry);\r\n          this.model = {\r\n            shaders,\r\n            buffers,\r\n            texture\r\n          };\r\n        });\r\n    }\r\n  }\r\n\r\n  _setupShader(gl, vertexShader, fragmentShader) {\r\n    const shaderProgram = initShaderProgram(gl, vertexShader, fragmentShader);\r\n    const shaderParameters = getShaderParameters(gl, shaderProgram);\r\n    const shader = {\r\n      program: shaderProgram,\r\n      attribLocations: {},\r\n      uniformLocations: {}\r\n    };\r\n    shaderParameters.attributes.forEach((attribute) => {\r\n      const location = gl.getAttribLocation(shaderProgram, attribute.name)\r\n      switch (attribute.name) {\r\n        case 'aVertexPosition':\r\n          shader.attribLocations.vertexPosition = location;\r\n          break;\r\n        case 'aVertexNormal':\r\n          shader.attribLocations.vertexNormal = location;\r\n          break;\r\n        case 'aVertexTangent':\r\n          shader.attribLocations.vertexTangent = location;\r\n          break;\r\n        case 'aVertexBitangent':\r\n          shader.attribLocations.vertexBitangent = location;\r\n          break;\r\n        case 'aVertexColor':\r\n          shader.attribLocations.vertexColor = location;\r\n          break;\r\n        case 'aTextureCoord':\r\n          shader.attribLocations.vertexTextureCoord = location;\r\n          break;\r\n        default:\r\n          alert('unknown attribute of ' + attribute.name);\r\n      }\r\n    });\r\n    shaderParameters.uniforms.forEach((uniform) => {\r\n      const location = gl.getUniformLocation(shaderProgram, uniform.name)\r\n      switch (uniform.name) {\r\n        case 'uModelMatrix':\r\n          shader.uniformLocations.modelMatrix = location;\r\n          break;\r\n        case 'uViewMatrix':\r\n          shader.uniformLocations.viewMatrix = location;\r\n          break;\r\n        case 'uNormalMatrix':\r\n          shader.uniformLocations.normalMatrix = location;\r\n          break;\r\n        case 'uProjectionMatrix':\r\n          shader.uniformLocations.projectionMatrix = location;\r\n          break;\r\n        case 'uSamplerDiffuse':\r\n          shader.uniformLocations.textureDiffuse = location;\r\n          break;\r\n        case 'uSamplerNormal':\r\n          shader.uniformLocations.textureNormal = location;\r\n          break;\r\n        case 'uSamplerHeight':\r\n          shader.uniformLocations.textureHeight = location;\r\n          break;\r\n        case 'uSamplerOcclusion':\r\n          shader.uniformLocations.textureOcclusion = location;\r\n          break;\r\n        case 'uShowDiffuseMap':\r\n          shader.uniformLocations.showDiffuseMap = location;\r\n          break;\r\n        case 'uShowNormalMap':\r\n          shader.uniformLocations.showNormalMap = location;\r\n          break;\r\n        case 'uShowAmbientOcclusionMap':\r\n          shader.uniformLocations.showAmbientOcclusionMap = location;\r\n          break;\r\n        case 'uPerPixel':\r\n          shader.uniformLocations.perPixel = location;\r\n          break;\r\n        case 'uParallaxHeightScale':\r\n          shader.uniformLocations.parallaxHeightScale = location;\r\n          break;\r\n        case 'uParallaxSteps':\r\n          shader.uniformLocations.parallaxSteps = location;\r\n          break;\r\n        case 'uParallaxOcclusionMapping':\r\n          shader.uniformLocations.parallaxOcclusionMapping = location;\r\n          break;\r\n        case 'uCameraPos':\r\n          shader.uniformLocations.cameraPosition = location;\r\n          break;\r\n        case 'uAmbientLight':\r\n          shader.uniformLocations.ambientLight = location;\r\n          break;\r\n        case 'uDirectionalLight.color':\r\n          if (!shader.uniformLocations.directionalLight) {\r\n            shader.uniformLocations.directionalLight = {};\r\n          }\r\n          shader.uniformLocations.directionalLight.color = location;\r\n          break;\r\n        case 'uDirectionalLight.direction':\r\n          if (!shader.uniformLocations.directionalLight) {\r\n            shader.uniformLocations.directionalLight = {};\r\n          }\r\n          shader.uniformLocations.directionalLight.direction = location;\r\n          break;\r\n        case 'uPointLight.color':\r\n          if (!shader.uniformLocations.pointLight) {\r\n            shader.uniformLocations.pointLight = {};\r\n          }\r\n          shader.uniformLocations.pointLight.color = location;\r\n          break;\r\n        case 'uPointLight.position':\r\n          if (!shader.uniformLocations.pointLight) {\r\n            shader.uniformLocations.pointLight = {};\r\n          }\r\n          shader.uniformLocations.pointLight.position = location;\r\n          break;\r\n        case 'uLight[0].position':\r\n          if (!shader.uniformLocations.lights) {\r\n            shader.uniformLocations.lights = [];\r\n          }\r\n          while (shader.uniformLocations.lights.length < 1) {\r\n            shader.uniformLocations.lights.push({});\r\n          }\r\n          shader.uniformLocations.lights[0].position = location;\r\n          break;\r\n        case 'uLight[0].ambient':\r\n          if (!shader.uniformLocations.lights) {\r\n            shader.uniformLocations.lights = [];\r\n          }\r\n          while (shader.uniformLocations.lights.length < 1) {\r\n            shader.uniformLocations.lights.push({});\r\n          }\r\n          shader.uniformLocations.lights[0].ambient = location;\r\n          break;\r\n        case 'uLight[0].diffuse':\r\n          if (!shader.uniformLocations.lights) {\r\n            shader.uniformLocations.lights = [];\r\n          }\r\n          while (shader.uniformLocations.lights.length < 1) {\r\n            shader.uniformLocations.lights.push({});\r\n          }\r\n          shader.uniformLocations.lights[0].diffuse = location;\r\n          break;\r\n        case 'uLight[0].specular':\r\n          if (!shader.uniformLocations.lights) {\r\n            shader.uniformLocations.lights = [];\r\n          }\r\n          while (shader.uniformLocations.lights.length < 1) {\r\n            shader.uniformLocations.lights.push({});\r\n          }\r\n          shader.uniformLocations.lights[0].specular = location;\r\n          break;\r\n        case 'uLight[1].position':\r\n          if (!shader.uniformLocations.lights) {\r\n            shader.uniformLocations.lights = [];\r\n          }\r\n          while (shader.uniformLocations.lights.length < 2) {\r\n            shader.uniformLocations.lights.push({});\r\n          }\r\n          shader.uniformLocations.lights[1].position = location;\r\n          break;\r\n        case 'uLight[1].ambient':\r\n          if (!shader.uniformLocations.lights) {\r\n            shader.uniformLocations.lights = [];\r\n          }\r\n          while (shader.uniformLocations.lights.length < 2) {\r\n            shader.uniformLocations.lights.push({});\r\n          }\r\n          shader.uniformLocations.lights[1].ambient = location;\r\n          break;\r\n        case 'uLight[1].diffuse':\r\n          if (!shader.uniformLocations.lights) {\r\n            shader.uniformLocations.lights = [];\r\n          }\r\n          while (shader.uniformLocations.lights.length < 2) {\r\n            shader.uniformLocations.lights.push({});\r\n          }\r\n          shader.uniformLocations.lights[1].diffuse = location;\r\n          break;\r\n        case 'uLight[1].specular':\r\n          if (!shader.uniformLocations.lights) {\r\n            shader.uniformLocations.lights = [];\r\n          }\r\n          while (shader.uniformLocations.lights.length < 2) {\r\n            shader.uniformLocations.lights.push({});\r\n          }\r\n          shader.uniformLocations.lights[1].specular = location;\r\n          break;\r\n        case 'uMaterial.ambient':\r\n          if (!shader.uniformLocations.material) {\r\n            shader.uniformLocations.material = {};\r\n          }\r\n          shader.uniformLocations.material.ambient = location;\r\n          break;\r\n        case 'uMaterial.diffuse':\r\n          if (!shader.uniformLocations.material) {\r\n            shader.uniformLocations.material = {};\r\n          }\r\n          shader.uniformLocations.material.diffuse = location;\r\n          break;\r\n        case 'uMaterial.specular':\r\n          if (!shader.uniformLocations.material) {\r\n            shader.uniformLocations.material = {};\r\n          }\r\n          shader.uniformLocations.material.specular = location;\r\n          break;\r\n        case 'uMaterial.shininess':\r\n          if (!shader.uniformLocations.material) {\r\n            shader.uniformLocations.material = {};\r\n          }\r\n          shader.uniformLocations.material.shininess = location;\r\n          break;\r\n        default:\r\n          alert('unknown uniform of ' + uniform.name);\r\n      }\r\n    });\r\n\r\n    return shader;\r\n  }\r\n\r\n  _initBuffers(gl, shaders, geometry) {\r\n    const requirements = {};\r\n\r\n    for (let i = 0; i < shaders.length; i++) {\r\n      const shader = shaders[i];\r\n\r\n      if (shader.attribLocations.vertexNormal) {\r\n        requirements.vertexNormal = true;\r\n      }\r\n\r\n      if (shader.attribLocations.vertexTangent) {\r\n        requirements.vertexTangent = true;\r\n      }\r\n\r\n      if (shader.attribLocations.vertexBitangent) {\r\n        requirements.vertexBitangent = true;\r\n      }\r\n\r\n      if (shader.attribLocations.vertexTextureCoord) {\r\n        requirements.vertexTextureCoord = true;\r\n      }\r\n\r\n      if (shader.attribLocations.vertexColor) {\r\n        requirements.vertexColor = true;\r\n      }\r\n    }\r\n\r\n    const positions = [];\r\n    const normals = [];\r\n    const tangents = [];\r\n    const bitangents = [];\r\n    const textureCoordinates = [];\r\n    const colors = [];\r\n    const indices = [];\r\n    const normal = vec3.create();\r\n    const tangent = vec3.create();\r\n    const bitangent = vec3.create();\r\n    let offset = 0;\r\n\r\n    const addSquare = (c0, c1, c2, c3, options) => {\r\n      positions.push(...c0, ...c1, ...c2, ...c3);\r\n      indices.push(offset + 0, offset + 1, offset + 2, offset + 2, offset + 3, offset + 0);\r\n      offset += 4;\r\n\r\n      if (requirements.vertexNormal || requirements.vertexTangent || requirements.vertexBitangent) {\r\n        vec3.subtract(tangent, c1, c0);\r\n        vec3.subtract(bitangent, c3, c0);\r\n\r\n        if (requirements.vertexNormal) {\r\n          vec3.cross(normal, tangent, bitangent);\r\n          vec3.normalize(normal, normal);\r\n          normals.push(...normal, ...normal, ...normal, ...normal);\r\n        }\r\n\r\n        if (requirements.vertexTangent) {\r\n          vec3.normalize(tangent, tangent);\r\n          tangents.push(...tangent, ...tangent, ...tangent, ...tangent);\r\n        }\r\n\r\n        if (requirements.vertexBitangent) {\r\n          vec3.normalize(bitangent, bitangent);\r\n          bitangents.push(...bitangent, ...bitangent, ...bitangent, ...bitangent);\r\n        }\r\n      }\r\n\r\n      if (requirements.vertexTextureCoord) {\r\n        textureCoordinates.push(0, 0, 1, 0, 1, 1, 0, 1);\r\n      }\r\n\r\n      if (requirements.vertexColor) {\r\n        colors.push(...options.color, ...options.color, ...options.color, ...options.color);\r\n      }\r\n    }\r\n\r\n    const addTriangle = (c0, c1, c2, options) => {\r\n      positions.push(...c0, ...c1, ...c2);\r\n      indices.push(offset + 0, offset + 1, offset + 2);\r\n      offset += 3;\r\n\r\n      if (requirements.vertexNormal || requirements.vertexTangent || requirements.vertexBitangent) {\r\n        vec3.subtract(tangent, c1, c0);\r\n        vec3.subtract(bitangent, c2, c0);\r\n\r\n        if (requirements.vertexNormal) {\r\n          vec3.cross(normal, tangent, bitangent);\r\n          vec3.normalize(normal, normal);\r\n          normals.push(...normal, ...normal, ...normal);\r\n        }\r\n\r\n        if (requirements.vertexTangent) {\r\n          vec3.normalize(tangent, tangent);\r\n          tangents.push(...tangent, ...tangent, ...tangent);\r\n        }\r\n\r\n        if (requirements.vertexBitangent) {\r\n          vec3.normalize(bitangent, bitangent);\r\n          bitangents.push(...bitangent, ...bitangent, ...bitangent);\r\n        }\r\n      }\r\n\r\n      if (requirements.vertexColor) {\r\n        colors.push(...options.color, ...options.color, ...options.color);\r\n      }\r\n    }\r\n\r\n    const addPentagon = (c0, c1, c2, c3, c4, options) => {\r\n      positions.push(...c0, ...c1, ...c2, ...c3, ...c4);\r\n      indices.push(offset + 0, offset + 3, offset + 4, offset + 0, offset + 1, offset + 3, offset + 1, offset + 2, offset + 3);\r\n      offset += 5;\r\n\r\n      if (requirements.vertexNormal || requirements.vertexTangent || requirements.vertexBitangent) {\r\n        vec3.subtract(tangent, c1, c0);\r\n        vec3.subtract(bitangent, c4, c0);\r\n\r\n        if (requirements.vertexNormal) {\r\n          vec3.cross(normal, tangent, bitangent);\r\n          vec3.normalize(normal, normal);\r\n          normals.push(...normal, ...normal, ...normal, ...normal, ...normal);\r\n        }\r\n\r\n        if (requirements.vertexTangent) {\r\n          vec3.normalize(tangent, tangent);\r\n          tangents.push(...tangent, ...tangent, ...tangent, ...tangent, ...tangent);\r\n        }\r\n\r\n        if (requirements.vertexBitangent) {\r\n          vec3.normalize(bitangent, bitangent);\r\n          bitangents.push(...bitangent, ...bitangent, ...bitangent, ...bitangent, ...bitangent);\r\n        }\r\n      }\r\n\r\n      if (requirements.vertexColor) {\r\n        colors.push(...options.color, ...options.color, ...options.color, ...options.color, ...options.color);\r\n      }\r\n    }\r\n\r\n    const addFace = (vertices, face, options) => {\r\n      switch (face.length) {\r\n        case 3:\r\n          addTriangle(vertices[face[0]], vertices[face[1]], vertices[face[2]], options);\r\n          break;\r\n        case 4:\r\n          addSquare(vertices[face[0]], vertices[face[1]], vertices[face[2]], vertices[face[3]], options);\r\n          break;\r\n        case 5:\r\n          addPentagon(vertices[face[0]], vertices[face[1]], vertices[face[2]], vertices[face[3]], vertices[face[4]], options);\r\n          break;\r\n        default:\r\n          alert('faces with ' + face.length + ' vertices are not supported');\r\n      }\r\n    }\r\n\r\n    const addFaces = (vertices, faces, options) => {\r\n      for (let i = 0; i < faces.length; i++) {\r\n        let option = {}\r\n        if (options) {\r\n          if (options.colors) {\r\n            option.color = options.colors[i % options.colors.length];\r\n          }\r\n        }\r\n        addFace(vertices, faces[i], option);\r\n      }\r\n    }\r\n\r\n    geometry({ addSquare, addFaces });\r\n\r\n    const positionBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\r\n\r\n    const indexBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\r\n    gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);\r\n\r\n    const buffers = { position: positionBuffer, indices: indexBuffer, vertexCount: indices.length }\r\n\r\n    if (requirements.vertexNormal) {\r\n      const normalBuffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, normalBuffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(normals), gl.STATIC_DRAW);\r\n      buffers.normal = normalBuffer;\r\n    }\r\n\r\n    if (requirements.vertexTangent) {\r\n      const tangentBuffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, tangentBuffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(tangents), gl.STATIC_DRAW);\r\n      buffers.tangent = tangentBuffer;\r\n    }\r\n\r\n    if (requirements.vertexBitangent) {\r\n      const bitangentBuffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, bitangentBuffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(bitangents), gl.STATIC_DRAW);\r\n      buffers.bitangent = bitangentBuffer;\r\n    }\r\n\r\n    if (requirements.vertexTextureCoord) {\r\n      const textureCoordBuffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, textureCoordBuffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoordinates), gl.STATIC_DRAW);\r\n      buffers.textureCoord = textureCoordBuffer;\r\n    }\r\n\r\n    if (requirements.vertexColor) {\r\n      const colorBuffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);\r\n      buffers.color = colorBuffer;\r\n    }\r\n\r\n    return buffers;\r\n  }\r\n\r\n  _deleteBuffers({ gl, buffers }) {\r\n    for (const prop in buffers) {\r\n      if (buffers.hasOwnProperty(prop)) {\r\n        gl.deleteBuffer(buffers[prop]);\r\n      }\r\n    }\r\n  }\r\n\r\n  _drawModel(options) {\r\n    if (!options.model) {\r\n      return;\r\n    }\r\n\r\n    const { gl, model, projectionMatrix, viewMatrix, modelMatrix } = options;\r\n    const { shaders, buffers, texture } = model;\r\n    const shader = shaders[options.shaderIndex ? options.shaderIndex : 0];\r\n\r\n    {\r\n      const numComponents = 3;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.position);\r\n      gl.vertexAttribPointer(shader.attribLocations.vertexPosition, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(shader.attribLocations.vertexPosition);\r\n    }\r\n\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffers.indices);\r\n\r\n    if (shader.attribLocations.vertexNormal) {\r\n      const numComponents = 3;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.normal);\r\n      gl.vertexAttribPointer(shader.attribLocations.vertexNormal, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(shader.attribLocations.vertexNormal);\r\n    }\r\n\r\n    if (shader.attribLocations.vertexTangent) {\r\n      const numComponents = 3;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.tangent);\r\n      gl.vertexAttribPointer(shader.attribLocations.vertexTangent, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(shader.attribLocations.vertexTangent);\r\n    }\r\n\r\n    if (shader.attribLocations.vertexBitangent) {\r\n      const numComponents = 3;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.bitangent);\r\n      gl.vertexAttribPointer(shader.attribLocations.vertexBitangent, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(shader.attribLocations.vertexBitangent);\r\n    }\r\n\r\n    if (shader.attribLocations.vertexTextureCoord) {\r\n      const numComponents = 2;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.textureCoord);\r\n      gl.vertexAttribPointer(shader.attribLocations.vertexTextureCoord, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(shader.attribLocations.vertexTextureCoord);\r\n    }\r\n\r\n    if (shader.attribLocations.vertexColor) {\r\n      const numComponents = 3;\r\n      const type = gl.FLOAT;\r\n      const normalize = false;\r\n      const stride = 0;\r\n      const offset = 0;\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffers.color);\r\n      gl.vertexAttribPointer(shader.attribLocations.vertexColor, numComponents, type, normalize, stride, offset);\r\n      gl.enableVertexAttribArray(shader.attribLocations.vertexColor);\r\n    }\r\n\r\n    gl.useProgram(shader.program);\r\n    gl.uniformMatrix4fv(shader.uniformLocations.projectionMatrix, false, projectionMatrix);\r\n    gl.uniformMatrix4fv(shader.uniformLocations.modelMatrix, false, modelMatrix);\r\n    gl.uniformMatrix4fv(shader.uniformLocations.viewMatrix, false, viewMatrix);\r\n\r\n    if (shader.uniformLocations.normalMatrix) {\r\n      const normalMatrix = mat4.create();\r\n      mat4.invert(normalMatrix, modelMatrix);\r\n      mat4.transpose(normalMatrix, normalMatrix);\r\n      gl.uniformMatrix4fv(shader.uniformLocations.normalMatrix, false, normalMatrix);\r\n    }\r\n\r\n    if (shader.uniformLocations.showDiffuseMap) {\r\n      gl.uniform1i(shader.uniformLocations.showDiffuseMap, options.showDiffuseMap);\r\n    }\r\n\r\n    if (shader.uniformLocations.showNormalMap) {\r\n      gl.uniform1i(shader.uniformLocations.showNormalMap, options.showNormalMap);\r\n    }\r\n\r\n    if (shader.uniformLocations.showAmbientOcclusionMap) {\r\n      gl.uniform1i(shader.uniformLocations.showAmbientOcclusionMap, options.showAmbientOcclusionMap);\r\n    }\r\n\r\n    if (shader.uniformLocations.perPixel) {\r\n      gl.uniform1i(shader.uniformLocations.perPixel, options.perPixel);\r\n    }\r\n\r\n    if (shader.uniformLocations.parallaxHeightScale) {\r\n      gl.uniform1f(shader.uniformLocations.parallaxHeightScale, options.parallaxHeightScale);\r\n    }\r\n\r\n    if (shader.uniformLocations.parallaxSteps) {\r\n      gl.uniform1i(shader.uniformLocations.parallaxSteps, options.parallaxSteps);\r\n    }\r\n\r\n    if (shader.uniformLocations.parallaxOcclusionMapping) {\r\n      gl.uniform1i(shader.uniformLocations.parallaxOcclusionMapping, options.parallaxOcclusionMapping);\r\n    }\r\n\r\n    if (shader.uniformLocations.ambientLight) {\r\n      gl.uniform3fv(shader.uniformLocations.ambientLight, options.ambientLight);\r\n    }\r\n\r\n    if (shader.uniformLocations.directionalLight) {\r\n      const direction = vec3.clone(options.directionalLight.direction);\r\n      vec3.normalize(direction, direction);\r\n      gl.uniform3fv(shader.uniformLocations.directionalLight.color, options.directionalLight.color);\r\n      gl.uniform3fv(shader.uniformLocations.directionalLight.direction, direction);\r\n    }\r\n\r\n    if (shader.uniformLocations.pointLight) {\r\n      gl.uniform3fv(shader.uniformLocations.pointLight.color, options.pointLight.color);\r\n      gl.uniform3fv(shader.uniformLocations.pointLight.position, options.pointLight.position);\r\n    }\r\n\r\n    if (options.lights) {\r\n      const lights = options.lights;\r\n      for (let i = 0; i < lights.length; i++) {\r\n        const light = lights[i];\r\n        gl.uniform3fv(shader.uniformLocations.lights[i].position, light.position);\r\n        gl.uniform3fv(shader.uniformLocations.lights[i].ambient, light.ambient);\r\n        gl.uniform3fv(shader.uniformLocations.lights[i].diffuse, light.diffuse);\r\n        gl.uniform3fv(shader.uniformLocations.lights[i].specular, light.specular);\r\n      }\r\n    }\r\n\r\n    if (options.material) {\r\n      const material = options.material;\r\n      gl.uniform3fv(shader.uniformLocations.material.ambient, material.ambient);\r\n      gl.uniform3fv(shader.uniformLocations.material.diffuse, material.diffuse);\r\n      gl.uniform3fv(shader.uniformLocations.material.specular, material.specular);\r\n      gl.uniform1f(shader.uniformLocations.material.shininess, material.shininess);\r\n    }\r\n\r\n    if (shader.uniformLocations.cameraPosition) {\r\n      gl.uniform3fv(shader.uniformLocations.cameraPosition, options.cameraPosition);\r\n    }\r\n\r\n    if (shader.uniformLocations.textureDiffuse) {\r\n      gl.activeTexture(gl.TEXTURE0);\r\n      gl.bindTexture(gl.TEXTURE_2D, texture.diffuse);\r\n      gl.uniform1i(shader.uniformLocations.textureDiffuse, 0);\r\n    }\r\n\r\n    if (shader.uniformLocations.textureNormal) {\r\n      gl.activeTexture(gl.TEXTURE1);\r\n      gl.bindTexture(gl.TEXTURE_2D, texture.normal);\r\n      gl.uniform1i(shader.uniformLocations.textureNormal, 1);\r\n    }\r\n\r\n    if (shader.uniformLocations.textureHeight) {\r\n      gl.activeTexture(gl.TEXTURE2);\r\n      gl.bindTexture(gl.TEXTURE_2D, texture.height);\r\n      gl.uniform1i(shader.uniformLocations.textureHeight, 2);\r\n    }\r\n\r\n    if (shader.uniformLocations.textureOcclusion) {\r\n      gl.activeTexture(gl.TEXTURE3);\r\n      gl.bindTexture(gl.TEXTURE_2D, texture.occlusion);\r\n      gl.uniform1i(shader.uniformLocations.textureOcclusion, 3);\r\n    }\r\n\r\n    {\r\n      const vertexCount = buffers.vertexCount;\r\n      const type = gl.UNSIGNED_SHORT;\r\n      const offset = 0;\r\n      gl.drawElements(gl.TRIANGLES, vertexCount, type, offset);\r\n    }\r\n  }\r\n}\r\n\r\nexport default Model;\r\n","import Model from './Model';\r\nimport { getShape } from '../lib/utility';\r\n\r\nclass ColoredModel extends Model {\r\n  constructor(gl, shapeName, colors) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: ({ addFaces }) => {\r\n        const shape = getShape(shapeName);\r\n        addFaces(shape.vertices, shape.faces, { colors });\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/colored/vertex.glsl',\r\n        fragment: 'shaders/colored/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix, lights, material) {\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      lights,\r\n      material\r\n    });\r\n  }\r\n}\r\n\r\nexport default ColoredModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen } from '../lib/utility'\r\nimport ColoredModel from '../models/ColoredModel';\r\n\r\nclass ColoredCubeScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n  }\r\n\r\n  initScene(gl) {\r\n    const colors1 = [\r\n      [0.0, 0.0, 1.0],    // Bottom face: blue\r\n      [0.0, 1.0, 0.0],    // Top face: green\r\n      [1.0, 0.0, 1.0],    // Left face: purple\r\n      [1.0, 1.0, 0.0],    // Right face: yellow\r\n      [1.0, 1.0, 1.0],    // Front face: white\r\n      [1.0, 0.0, 0.0]     // Back face: red\r\n    ];\r\n    const model6 = new ColoredModel(gl, 'cube', colors1);\r\n    const colors2 = [\r\n      [1.0, 0.0, 0.0],\r\n      [0.0, 0.0, 1.0],\r\n      [0.0, 1.0, 0.0],\r\n      [1.0, 1.0, 0.0],\r\n      [0.0, 1.0, 1.0],\r\n      [1.0, 0.0, 1.0],\r\n      [1.0, 0.5, 0.0],\r\n      [0.0, 1.0, 0.5],\r\n      [1.0, 0.0, 0.5],\r\n      [0.5, 1.0, 0.0],\r\n      [0.0, 0.5, 1.0],\r\n      [0.5, 0.0, 1.0]\r\n    ];\r\n    const model12 = new ColoredModel(gl, 'dodecahedron', colors2);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model: model6,\r\n          location: [-1.6, 0.0, -6.0],\r\n          scale: [3.0, 3.0, 3.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 1.0\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.7\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model12,\r\n          location: [1.6, 0.0, -6.0],\r\n          scale: [2.8, 2.8, 2.8],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 1.0\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.7\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    if (actor.scale) {\r\n      mat4.scale(modelMatrix, modelMatrix, actor.scale);\r\n    }\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      mat4.rotate(modelMatrix, modelMatrix, rotation.angle, rotation.axis);\r\n    }\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      rotation.angle += deltaTime * rotation.speed;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ColoredCubeScene;\r\n","import Model from './Model';\r\n\r\nclass TexturedCubeModel extends Model {\r\n  constructor(gl) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: this._geometry,\r\n      texture: {\r\n        diffuse: 'images/cubetexture.png'\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/texturedcube/vertex.glsl',\r\n        fragment: 'shaders/texturedcube/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix) {\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix\r\n    });\r\n  }\r\n\r\n  _geometry({ addSquare }) {\r\n    const f0 = [-1, -1, 1];\r\n    const f1 = [1, -1, 1];\r\n    const f2 = [1, 1, 1];\r\n    const f3 = [-1, 1, 1];\r\n    const b0 = [-1, -1, -1];\r\n    const b1 = [1, -1, -1];\r\n    const b2 = [1, 1, -1];\r\n    const b3 = [-1, 1, -1];\r\n    addSquare(f0, f1, f2, f3);  // front\r\n    addSquare(b1, b0, b3, b2);  // back\r\n    addSquare(b0, f0, f3, b3);  // left\r\n    addSquare(f1, b1, b2, f2);  // right\r\n    addSquare(b0, b1, f1, f0);  // bottom\r\n    addSquare(b2, b3, f3, f2);  // top\r\n  }\r\n}\r\n\r\nexport default TexturedCubeModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen } from '../lib/utility'\r\nimport TexturedCubeModel from '../models/TexturedCubeModel';\r\n\r\nclass TexturedCubeScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n  }\r\n\r\n  initScene(gl) {\r\n    const model = new TexturedCubeModel(gl);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model,\r\n          location: [0.0, 0.0, -6.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 1.0\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.7\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      mat4.rotate(modelMatrix, modelMatrix, rotation.angle, rotation.axis);\r\n    }\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      rotation.angle += deltaTime * rotation.speed;\r\n    }\r\n  }\r\n}\r\n\r\nexport default TexturedCubeScene;\r\n","import Model from './Model';\r\n\r\nclass LightedCubeModel extends Model {\r\n  constructor(gl) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: this._geometry,\r\n      texture: {\r\n        diffuse: 'images/cubetexture.png'\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/lightedcube/vertex.glsl',\r\n        fragment: 'shaders/lightedcube/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix, perPixel) {\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      ambientLight: [0.3, 0.3, 0.3],\r\n      directionalLight: {\r\n        color: [0.5, 0.5, 0.5],\r\n        direction: [0.0, 1.0, 0.0]\r\n      },\r\n      pointLight: {\r\n        color: [0.7, 0.7, 0.7],\r\n        position: [0.0, 0.0, 0.0]\r\n      },\r\n      cameraPosition: [0.0, 0.0, 0.0],\r\n      perPixel\r\n    });\r\n  }\r\n\r\n  _geometry({ addSquare }) {\r\n    const f0 = [-1, -1, 1];\r\n    const f1 = [1, -1, 1];\r\n    const f2 = [1, 1, 1];\r\n    const f3 = [-1, 1, 1];\r\n    const b0 = [-1, -1, -1];\r\n    const b1 = [1, -1, -1];\r\n    const b2 = [1, 1, -1];\r\n    const b3 = [-1, 1, -1];\r\n    addSquare(f0, f1, f2, f3);  // front\r\n    addSquare(b1, b0, b3, b2);  // back\r\n    addSquare(b0, f0, f3, b3);  // left\r\n    addSquare(f1, b1, b2, f2);  // right\r\n    addSquare(b0, b1, f1, f0);  // bottom\r\n    addSquare(b2, b3, f3, f2);  // top\r\n  }\r\n}\r\n\r\nexport default LightedCubeModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen } from '../lib/utility'\r\nimport LightedCubeModel from '../models/LightedCubeModel';\r\n\r\nclass LightedCubeScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n  }\r\n\r\n  initScene(gl) {\r\n    const model = new LightedCubeModel(gl);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model,\r\n          location: [-2.0, 0.0, -5.5],\r\n          rotation: 0.0,\r\n          rotationSpeed: 1.0,\r\n          perPixel: false\r\n        },\r\n        {\r\n          model,\r\n          location: [2.0, 0.0, -5.5],\r\n          rotation: 0.0,\r\n          rotationSpeed: 1.0,\r\n          perPixel: true\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0],\r\n      cameraDir: [0.0, 0.0, 2.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n\r\n    if (scene.camera[2] > 16.0) {\r\n      scene.camera[2] = 16.0;\r\n      scene.cameraDir[2] = -2.0;\r\n    } else if (scene.camera[2] < 0.0) {\r\n      scene.camera[2] = 0.0;\r\n      scene.cameraDir[2] = 2.0;\r\n    }\r\n\r\n    scene.camera[0] += scene.cameraDir[0] * deltaTime;\r\n    scene.camera[1] += scene.cameraDir[1] * deltaTime;\r\n    scene.camera[2] += scene.cameraDir[2] * deltaTime;\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    mat4.rotate(modelMatrix, modelMatrix, actor.rotation, [0, 0, 1]);\r\n    mat4.rotate(modelMatrix, modelMatrix, actor.rotation * 0.7, [0, 1, 0]);\r\n    mat4.rotate(modelMatrix, modelMatrix, actor.rotation * 0.3, [1, 0, 0]);\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix, actor.perPixel);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    actor.rotation += deltaTime * actor.rotationSpeed;\r\n  }\r\n}\r\n\r\nexport default LightedCubeScene;\r\n","import Model from './Model';\r\n\r\nclass MazeModel extends Model {\r\n  constructor(gl, maze) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this.update = this.update.bind(this);\r\n    this.geometry = this.geometry.bind(this);\r\n    this.maze = maze;\r\n    this._initModel({\r\n      gl,\r\n      geometry: this.geometry,\r\n      shaders: [\r\n        {\r\n          vertex: 'shaders/colored/vertex.glsl',\r\n          fragment: 'shaders/colored/fragment.glsl'\r\n        },\r\n        {\r\n          vertex: 'shaders/material/vertex.glsl',\r\n          fragment: 'shaders/material/fragment.glsl'\r\n        }\r\n      ]\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix, shaderIndex, lights, material) {\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      shaderIndex,\r\n      lights,\r\n      material\r\n    });\r\n  }\r\n\r\n  update(maze) {\r\n    const gl = this.gl;\r\n    this._deleteBuffers(gl, this.model.buffers);\r\n    this.maze = maze;\r\n    this.model.buffers = this._initBuffers(gl, this.model.shaders, this.geometry);\r\n  }\r\n\r\n  geometry({ addSquare }) {\r\n    const maze = this.maze;\r\n\r\n    const floorColor = [.2, .2, .2];\r\n    const ceilingColor = [.7, .7, .7];\r\n    const wallColor_Back = [.5, 0, .5];\r\n    const wallColor_Front = [0, .5, 0];\r\n    const wallColor_Left = [.5, 0, 0];\r\n    const wallColor_Right = [0, .0, .5];\r\n\r\n    const ofs_x = -maze.width / 2;\r\n    const ofs_y = -maze.height / 2;\r\n    for (let y = 0; y < maze.height; y++) {\r\n      for (let x = 0; x < maze.width; x++) {\r\n        const left = x + ofs_x;\r\n        const right = left + 1;\r\n        const back = y + ofs_y;\r\n        const front = back + 1;\r\n        const top = 1;\r\n        const bottom = 0;\r\n\r\n        const f0 = [left, top, front];\r\n        const f1 = [right, top, front];\r\n        const f2 = [right, bottom, front];\r\n        const f3 = [left, bottom, front];\r\n        const b0 = [left, top, back];\r\n        const b1 = [right, top, back];\r\n        const b2 = [right, bottom, back];\r\n        const b3 = [left, bottom, back];\r\n\r\n        if (maze.data[y][x] === 0) {\r\n          addSquare(b2, b3, f3, f2, { color: floorColor });\r\n        } else {\r\n          addSquare(b1, b0, f0, f1, { color: ceilingColor });\r\n\r\n          if (y === 0 || maze.data[y - 1][x] === 0) {\r\n            addSquare(b0, b1, b2, b3, { color: wallColor_Back });\r\n          }\r\n\r\n          if (x === 0 || maze.data[y][x - 1] === 0) {\r\n            addSquare(f0, b0, b3, f3, { color: wallColor_Left });\r\n          }\r\n\r\n          if (y === maze.height - 1 || maze.data[y + 1][x] === 0) {\r\n            addSquare(f1, f0, f3, f2, { color: wallColor_Front });\r\n          }\r\n\r\n          if (x === maze.width - 1 || maze.data[y][x + 1] === 0) {\r\n            addSquare(b1, f1, f2, b2, { color: wallColor_Right });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default MazeModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen, degreesToRadians, generateMaze, getMaterialList, getMaterial } from '../lib/utility'\r\nimport MazeModel from '../models/MazeModel';\r\n\r\nclass MazeScene {\r\n  constructor() {\r\n    this.getOptions = this.getOptions.bind(this);\r\n    this.setOption = this.setOption.bind(this);\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n    this.totalDelta = 0.0;\r\n\r\n    this.options = [\r\n      {\r\n        name: 'Material',\r\n        type: 'select',\r\n        options: ['useColors', ...getMaterialList()]\r\n      }\r\n    ];\r\n  }\r\n\r\n  getOptions() {\r\n    return this.options\r\n  }\r\n\r\n  setOption(name, value) {\r\n    const option = this.options.find((option) => option.name === name);\r\n    option.value = Number(value);\r\n\r\n    const actor = this.scene.actors[0];\r\n\r\n    if (option.name === 'Material') {\r\n      const materialName = option.options[option.value];\r\n      if (materialName !== 'useColors') {\r\n        actor.material = getMaterial(materialName);\r\n      } else {\r\n        actor.material = undefined;\r\n      }\r\n    }\r\n  }\r\n\r\n  initScene(gl) {\r\n    const { size, maze } = this._generateMaze();\r\n\r\n    const model = new MazeModel(gl, maze);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model,\r\n          location: [0.0, 0.0, -2.0 * size],\r\n          rotation: { angle: 0.0, axis: [0, 1, 0], speed: 0.5 }\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n\r\n    this.setOption('Material', 1);\r\n  }\r\n\r\n  _generateMaze() {\r\n    const size = Math.floor(Math.random() * 35) * 2 + 11;\r\n    const maze = generateMaze(size, size);\r\n    return { size, maze };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 500.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    mat4.rotate(modelMatrix, modelMatrix, degreesToRadians(45), [1, 0, 0]);\r\n    mat4.rotate(modelMatrix, modelMatrix, actor.rotation.angle, actor.rotation.axis);\r\n\r\n    if (actor.material) {\r\n      const lights = [\r\n        {\r\n          position: [10.0, -10.0, 0.0],\r\n          ambient: [0.2, 0.2, 0.2],\r\n          diffuse: [0.5, 0.5, 0.5],\r\n          specular: [0.9, 0.9, 0.9]\r\n        },\r\n        {\r\n          position: [-10.0, 10.0, 0.0],\r\n          ambient: [0.2, 0.2, 0.2],\r\n          diffuse: [0.5, 0.5, 0.5],\r\n          specular: [0.9, 0.9, 0.9]\r\n        }\r\n      ];\r\n\r\n      model.draw(projectionMatrix, viewMatrix, modelMatrix, 1, lights, actor.material);\r\n    } else {\r\n      model.draw(projectionMatrix, viewMatrix, modelMatrix);\r\n    }\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    actor.rotation.angle += deltaTime * actor.rotation.speed;\r\n  }\r\n}\r\n\r\nexport default MazeScene;\r\n","import Model from './Model';\r\n\r\nclass BrickWallModel extends Model {\r\n  constructor(gl) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: this._geometry,\r\n      texture: {\r\n        diffuse: 'images/Brick_Wall_017_basecolor.jpg',\r\n        normal: 'images/Brick_Wall_017_normal.jpg',\r\n        height: 'images/Brick_Wall_017_height.png',\r\n        occlusion: 'images/Brick_Wall_017_ambientOcclusion.jpg'\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/brickwall/vertex.glsl',\r\n        fragment: 'shaders/brickwall/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix) {\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      showDiffuseMap: 1,\r\n      showNormalMap: 1,\r\n      showAmbientOcclusionMap: 1,\r\n      parallaxHeightScale: 0.04,\r\n      parallaxSteps: 32,\r\n      parallaxOcclusionMapping: 1,\r\n      ambientLight: [0.3, 0.3, 0.3],\r\n      directionalLight: {\r\n        color: [0.4, 0.4, 0.4],\r\n        direction: [0.0, -1.0, 1.0]\r\n      },\r\n      pointLight: {\r\n        color: [1.0, 1.0, 1.0],\r\n        position: [0.0, 0.0, 0.0]\r\n      },\r\n      cameraPosition: [0.0, 0.0, 0.0]\r\n    });\r\n  }\r\n\r\n  _geometry({ addSquare }) {\r\n    const f0 = [-1, -1, 1];\r\n    const f1 = [1, -1, 1];\r\n    const f2 = [1, 1, 1];\r\n    const f3 = [-1, 1, 1];\r\n    const b0 = [-1, -1, -1];\r\n    const b1 = [1, -1, -1];\r\n    const b2 = [1, 1, -1];\r\n    const b3 = [-1, 1, -1];\r\n    addSquare(f0, f1, f2, f3);  // front\r\n    addSquare(b1, b0, b3, b2);  // back\r\n    addSquare(b0, f0, f3, b3);  // left\r\n    addSquare(f1, b1, b2, f2);  // right\r\n    addSquare(b0, b1, f1, f0);  // top\r\n    addSquare(b2, b3, f3, f2);  // bottom\r\n  }\r\n}\r\n\r\nexport default BrickWallModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen } from '../lib/utility'\r\nimport BrickWallModel from '../models/BrickWallModel';\r\n\r\nclass BrickWallScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n  }\r\n\r\n  initScene(gl) {\r\n    const model = new BrickWallModel(gl);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model,\r\n          location: [0.0, 0.0, -5.5],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.4\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.2\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      mat4.rotate(modelMatrix, modelMatrix, rotation.angle, rotation.axis);\r\n    }\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      rotation.angle += deltaTime * rotation.speed;\r\n    }\r\n  }\r\n}\r\n\r\nexport default BrickWallScene;\r\n","import Model from './Model';\r\nimport { getShape } from '../lib/utility';\r\n\r\nclass MaterialModel extends Model {\r\n  constructor(gl, shapeName) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: ({ addFaces }) => {\r\n        const shape = getShape(shapeName);\r\n        addFaces(shape.vertices, shape.faces);\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/material/vertex.glsl',\r\n        fragment: 'shaders/material/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix, lights, material) {\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      lights,\r\n      material\r\n    });\r\n  }\r\n}\r\n\r\nexport default MaterialModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen, getMaterial } from '../lib/utility'\r\nimport MaterialModel from '../models/MaterialModel';\r\n\r\nclass MaterialScene {\r\n  constructor() {\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n  }\r\n\r\n  initScene(gl) {\r\n    const model4 = new MaterialModel(gl, 'tetrahedron');\r\n    const model6 = new MaterialModel(gl, 'cube');\r\n    const model8 = new MaterialModel(gl, 'octahedron');\r\n    const model10 = new MaterialModel(gl, 'pentagonaltrapezohedron');\r\n    const model12 = new MaterialModel(gl, 'dodecahedron');\r\n    const model20 = new MaterialModel(gl, 'icosahedron');\r\n\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model: model4,\r\n          material: getMaterial('gold'),\r\n          location: [-3.75, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model6,\r\n          material: getMaterial('gold'),\r\n          location: [-2.25, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model8,\r\n          material: getMaterial('gold'),\r\n          location: [-0.75, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model10,\r\n          material: getMaterial('gold'),\r\n          location: [0.75, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model12,\r\n          material: getMaterial('gold'),\r\n          location: [2.25, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model20,\r\n          material: getMaterial('gold'),\r\n          location: [3.75, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model4,\r\n          material: getMaterial('chrome'),\r\n          location: [-3.75, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model6,\r\n          material: getMaterial('chrome'),\r\n          location: [-2.25, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model8,\r\n          material: getMaterial('chrome'),\r\n          location: [-0.75, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model10,\r\n          material: getMaterial('chrome'),\r\n          location: [0.75, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model12,\r\n          material: getMaterial('chrome'),\r\n          location: [2.25, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model20,\r\n          material: getMaterial('chrome'),\r\n          location: [3.75, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model4,\r\n          material: getMaterial('obsidian'),\r\n          location: [-3.75, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model6,\r\n          material: getMaterial('obsidian'),\r\n          location: [-2.25, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model8,\r\n          material: getMaterial('obsidian'),\r\n          location: [-0.75, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model10,\r\n          material: getMaterial('obsidian'),\r\n          location: [0.75, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model12,\r\n          material: getMaterial('obsidian'),\r\n          location: [2.25, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model20,\r\n          material: getMaterial('obsidian'),\r\n          location: [3.75, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      mat4.rotate(modelMatrix, modelMatrix, rotation.angle, rotation.axis);\r\n    }\r\n\r\n    const lights = [\r\n      {\r\n        position: [10.0, -10.0, 0.0],\r\n        ambient: [0.2, 0.2, 0.2],\r\n        diffuse: [0.5, 0.5, 0.5],\r\n        specular: [0.9, 0.9, 0.9]\r\n      },\r\n      {\r\n        position: [-10.0, 10.0, 0.0],\r\n        ambient: [0.2, 0.2, 0.2],\r\n        diffuse: [0.5, 0.5, 0.5],\r\n        specular: [0.9, 0.9, 0.9]\r\n      }\r\n    ];\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix, lights, actor.material);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      rotation.angle += deltaTime * rotation.speed;\r\n    }\r\n  }\r\n}\r\n\r\nexport default MaterialScene;\r\n","import ColoredSquareScene from '../scenes/ColoredSquareScene';\r\nimport ColoredCubeScene from '../scenes/ColoredCubeScene';\r\nimport TexturedCubeScene from '../scenes/TexturedCubeScene';\r\nimport LightedCubeScene from '../scenes/LightedCubeScene';\r\nimport MazeScene from '../scenes/MazeScene';\r\nimport BrickWallScene from '../scenes/BrickWallScene';\r\nimport MaterialScene from '../scenes/MaterialScene';\r\n\r\nclass SceneManager {\r\n  constructor(canvas) {\r\n    this.canvas = canvas;\r\n\r\n    this.resizeViewport = this.resizeViewport.bind(this);\r\n    this.getScene = this.getScene.bind(this);\r\n    this.previousScene = this.previousScene.bind(this);\r\n    this.nextScene = this.nextScene.bind(this);\r\n    this.renderScene = this.renderScene.bind(this);\r\n\r\n    this.scenes = [\r\n      { init: false, render: new ColoredSquareScene() },\r\n      { init: false, render: new ColoredCubeScene() },\r\n      { init: false, render: new TexturedCubeScene() },\r\n      { init: false, render: new LightedCubeScene() },\r\n      { init: false, render: new MazeScene() },\r\n      { init: false, render: new BrickWallScene() },\r\n      { init: false, render: new MaterialScene() }\r\n    ];\r\n    this.sceneIndex = this.scenes.length - 1;\r\n\r\n    this.gl = canvas.getContext('webgl');\r\n    if (this.gl === null) {\r\n      alert(\"Unable to initialize WebGL. Your browser or machine may not support it.\");\r\n    } else {\r\n      this.resizeViewport();\r\n      this.gl.enable(this.gl.CULL_FACE);\r\n      this.gl.cullFace(this.gl.BACK);\r\n      const scene = this.scenes[this.sceneIndex];\r\n      if (!scene.init) {\r\n        scene.init = true;\r\n        scene.render.initScene(this.gl);\r\n        if (scene.render.getOptions) {\r\n          scene.options = scene.render.getOptions();\r\n          scene.setOption = scene.render.setOption;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  resizeViewport() {\r\n    const canvas = this.canvas;\r\n    const rect = canvas.getBoundingClientRect()\r\n    canvas.width = rect.width;\r\n    canvas.height = rect.height;\r\n    this.gl.viewport(0, 0, canvas.width, canvas.height);\r\n  }\r\n\r\n  getScene() {\r\n    return this.scenes[this.sceneIndex];\r\n  }\r\n\r\n  previousScene() {\r\n    this.sceneIndex = (this.sceneIndex - 1) % this.scenes.length;\r\n    if (this.sceneIndex < 0) {\r\n      this.sceneIndex = this.scenes.length - 1;\r\n    }\r\n    const scene = this.scenes[this.sceneIndex];\r\n    if (!scene.init) {\r\n      scene.init = true;\r\n      scene.render.initScene(this.gl);\r\n      if (scene.render.getOptions) {\r\n        scene.options = scene.render.getOptions();\r\n        scene.setOption = scene.render.setOption;\r\n      }\r\n    }\r\n    return this.scenes[this.sceneIndex];\r\n  }\r\n\r\n  nextScene() {\r\n    this.sceneIndex = (this.sceneIndex + 1) % this.scenes.length;\r\n    const scene = this.scenes[this.sceneIndex];\r\n    if (!scene.init) {\r\n      scene.init = true;\r\n      scene.render.initScene(this.gl);\r\n      if (scene.render.getOptions) {\r\n        scene.options = scene.render.getOptions();\r\n        scene.setOption = scene.render.setOption;\r\n      }\r\n    }\r\n    return this.scenes[this.sceneIndex];\r\n  }\r\n\r\n  renderScene(timeStamp) {\r\n    timeStamp *= 0.001;\r\n    if (!this.timeStamp) {\r\n      this.timeStamp = timeStamp;\r\n    }\r\n    const deltaTime = timeStamp - this.timeStamp;\r\n    this.timeStamp = timeStamp;\r\n    const scene = this.scenes[this.sceneIndex];\r\n    scene.render.drawScene(this.gl, deltaTime);\r\n  }\r\n}\r\n\r\nexport default SceneManager;\r\n","import React from 'react';\r\nimport Message from './Message';\r\nimport Controls from './Controls';\r\nimport SceneManager from '../lib/SceneManager';\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onResize = this.onResize.bind(this);\r\n    this.onKeyDown = this.onKeyDown.bind(this);\r\n    this.onKeyUp = this.onKeyUp.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onClickPrevious = this.onClickPrevious.bind(this);\r\n    this.onClickNext = this.onClickNext.bind(this);\r\n    this.onAnimationFrame = this.onAnimationFrame.bind(this);\r\n    this.state = {\r\n      showControls: false,\r\n      keys: []\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.sceneManager = new SceneManager(this.canvas);\r\n    this.setState({ scene: this.sceneManager.getScene() });\r\n    this.frame = window.requestAnimationFrame(this.onAnimationFrame);\r\n    window.addEventListener('resize', this.onResize);\r\n    window.addEventListener('keydown', this.onKeyDown);\r\n    window.addEventListener('keyup', this.onKeyUp);\r\n    this.showMessage(['Press Escape to toggle menu', 'Press Page Up for previous screen', 'Press Page Down for next screen']);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.cancelAnimationFrame(this.frame);\r\n    window.removeEventListener('resize', this.onResize);\r\n    window.removeEventListener('keydown', this.onKeyDown);\r\n    window.removeEventListener('keyup', this.onKeyUp);\r\n  }\r\n\r\n  onResize() {\r\n    this.sceneManager.resizeViewport();\r\n  }\r\n\r\n  onKeyDown(event) {\r\n    event.preventDefault();\r\n    if (this.state.keys.indexOf(event.key) === -1) {\r\n      this.onKeyPress(event.key);\r\n      this.setState({ keys: [event.key, ...this.state.keys] });\r\n    }\r\n  }\r\n\r\n  onKeyUp(event) {\r\n    event.preventDefault();\r\n    this.setState({ keys: this.state.keys.filter((v) => v !== event.key) });\r\n  }\r\n\r\n  onKeyPress(key) {\r\n    if (key === 'Escape') {\r\n      if (this.messageTimer) {\r\n        this.cancelMessage();\r\n      } else {\r\n        this.setState({ showControls: !this.state.showControls });\r\n      }\r\n    } else if (key === 'PageUp') {\r\n      this.setState({ scene: this.sceneManager.previousScene() });\r\n    } else if (key === 'PageDown') {\r\n      this.setState({ scene: this.sceneManager.nextScene() });\r\n    }\r\n  }\r\n\r\n  onChange(control, value) {\r\n    if (value !== control.value) {\r\n      this.state.scene.setOption(control.name, value);\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n\r\n  onClickPrevious(event) {\r\n    event.preventDefault();\r\n    this.setState({ scene: this.sceneManager.previousScene() });\r\n  }\r\n\r\n  onClickNext(event) {\r\n    event.preventDefault();\r\n    this.sceneManager.nextScene();\r\n    this.setState({ scene: this.sceneManager.nextScene() });\r\n  }\r\n\r\n  showMessage(message) {\r\n    this.setState({ message });\r\n    this.messageTimer = setTimeout(this.clearMessage.bind(this), 10000);\r\n  }\r\n\r\n  clearMessage() {\r\n    this.setState({ message: undefined });\r\n    this.messageTimer = undefined;\r\n  }\r\n\r\n  cancelMessage() {\r\n    clearTimeout(this.messageTimer);\r\n    this.clearMessage();\r\n  }\r\n\r\n  onAnimationFrame(timeStamp) {\r\n    this.sceneManager.renderScene(timeStamp);\r\n    this.frame = window.requestAnimationFrame(this.onAnimationFrame);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"screen\">\r\n        <canvas id=\"canvas\" ref={elem => this.canvas = elem}></canvas>\r\n        <Message message={this.state.message} />\r\n        <Controls show={this.state.showControls} onClickPrevious={this.onClickPrevious} onClickNext={this.onClickNext} onChange={this.onChange} options={this.state.scene ? this.state.scene.options : undefined} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}