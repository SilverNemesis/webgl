(this.webpackJsonpwebgl=this.webpackJsonpwebgl||[]).push([[0],{13:function(e,t,a){e.exports=a(19)},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var n=a(2),i=a.n(n),r=a(12),o=a.n(r),s=(a(18),a(4)),c=a(5),l=a(9),u=a(8),h=a(6),d=a(10),m=function(e){var t=e.message,a=e.onClick;return t?i.a.createElement("div",{id:"message",onClick:a},t.map((function(e,t){return i.a.createElement("div",{key:t},e)}))):null},f=function(e){var t=e.control;return i.a.createElement("div",{className:"control"},t.description)},v=function(e){for(var t=e.control,a=[],n=0;n<t.options.length;n++)a.push(i.a.createElement("option",{key:n,value:n},t.options[n]));return i.a.createElement("div",{className:"control"},i.a.createElement("label",{htmlFor:t.name},t.name),i.a.createElement("select",{id:t.name,className:"select-css",value:t.value,onChange:function(a){e.onChange(t,a.target.value)}},a))},p=function(e){var t=e.control;return i.a.createElement("div",{className:"control"},i.a.createElement("label",{className:"clickable",htmlFor:t.name},i.a.createElement("input",{className:"clickable",id:t.name,type:"checkbox",checked:t.value,onChange:function(a){e.onChange(t,a.target.checked)}}),t.name))},g=function(e){var t=e.control;return i.a.createElement("div",{className:"control"},i.a.createElement("label",{htmlFor:t.name},t.name," ",t.value),i.a.createElement("input",{id:t.name,className:"clickable",type:"range",min:t.min,max:t.max,value:t.value,onChange:function(a){e.onChange(t,a.target.value)}}))},b=function(e){var t=1e3;var a=e.control;return i.a.createElement("div",{className:"control"},i.a.createElement("label",{htmlFor:a.name},a.name," ",a.value.toFixed(3)),i.a.createElement("input",{id:a.name,className:"clickable",type:"range",min:Math.floor(a.min*t),max:Math.floor(a.max*t),value:Math.floor(a.value*t),onChange:function(n){e.onChange(a,n.target.value/t)}}))},x=function(e){var t=e.control;return i.a.createElement("div",{className:"control"},i.a.createElement("button",{onClick:function(e){t.function()}},t.name))},y=function(e){var t,a=e.show,n=e.onClickPrevious,r=e.onClickNext,o=e.onChange,s=e.options;return a?(s&&(t=s.map((function(e,t){switch(e.type){case"description":return i.a.createElement(f,{key:t,control:e});case"select":return i.a.createElement(v,{key:t,control:e,onChange:o});case"bool":return i.a.createElement(p,{key:t,control:e,onChange:o});case"int":return i.a.createElement(g,{key:t,control:e,onChange:o});case"float":return i.a.createElement(b,{key:t,control:e,onChange:o});case"function":return i.a.createElement(x,{key:t,control:e});default:return i.a.createElement("div",{key:t,className:"control"},e.type," is not supported")}}))),i.a.createElement("div",{id:"overlay"},i.a.createElement("div",{className:"none"},i.a.createElement("span",{className:"left",onClick:n},"\u276e PREV"),i.a.createElement("span",{className:"right",onClick:r},"NEXT \u276f")),i.a.createElement("div",null,t))):null},O=function(e){var t,a=e.show,n=e.credits;return a?(n&&(t=n.map((function(e,t){return i.a.createElement("div",{key:t,className:"credit"},e)}))),i.a.createElement("div",{id:"credits"},i.a.createElement("div",null,t))):null},w=a(0);function _(e){return e*(Math.PI/180)}function M(e,t){switch(t){case e.FLOAT:return"FLOAT";case e.FLOAT_VEC2:return"FLOAT_VEC2";case e.FLOAT_VEC3:return"FLOAT_VEC3";case e.FLOAT_VEC4:return"FLOAT_VEC4";case e.INT:return"INT";case e.INT_VEC2:return"INT_VEC2";case e.INT_VEC3:return"INT_VEC3";case e.INT_VEC4:return"INT_VEC4";case e.BOOL:return"BOOL";case e.BOOL_VEC2:return"BOOL_VEC2";case e.BOOL_VEC3:return"BOOL_VEC3";case e.BOOL_VEC4:return"BOOL_VEC4";case e.FLOAT_MAT2:return"FLOAT_MAT2";case e.FLOAT_MAT3:return"FLOAT_MAT3";case e.FLOAT_MAT4:return"FLOAT_MAT4";case e.SAMPLER_2D:return"SAMPLER_2D";case e.SAMPLER_CUBE:return"SAMPLER_CUBE";default:return"UNKNOWN"}}function L(e,t,a){var n=e.createShader(t);return e.shaderSource(n,a),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(n)),e.deleteShader(n),null)}function k(e,t){var a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);var n=e.RGBA,i=e.RGBA,r=e.UNSIGNED_BYTE,o=new Uint8Array([0,0,255,255]);e.texImage2D(e.TEXTURE_2D,0,n,1,1,0,i,r,o);var s=new Image;return s.onload=function(){e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,n,i,r,s),A(s.width)&&A(s.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))},s.src=t,a}function A(e){return 0===(e&e-1)}function E(e){e.clearColor(0,0,0,1),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}var S=[{x:-1,y:0},{x:0,y:-1},{x:1,y:0},{x:0,y:1}];function j(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,n=function(e){s[e.y][e.x]=0},i=function(e,t){if(!r(o(e,t,3)))return!1;var a=o(e,t,2);return 1===s[a.y][a.x]},r=function(a){return!(a.x<0||a.y<0||a.x>=e||a.y>=t)},o=function(e,t,a){return{x:e.x+t.x*a,y:e.y+t.y*a}},s=[],c=0;c<t;c++)s.push(new Array(e).fill(1));var l,u={x:1,y:1},h=[];for(n(u),h.push(u);h.length>0;){for(var d=h[h.length-1],m=[],f=0;f<S.length;f++){var v=S[f];i(d,v)&&m.push(v)}if(m.length>0){var p=void 0;p=m.includes(l)&&Math.random()>a?l:m[Math.floor(Math.random()*m.length)],n(o(d,p,1)),n(o(d,p,2)),h.push(o(d,p,2)),l=p}else h.pop(),l=null}return{width:e,height:t,data:s}}function T(e){if("tetrahedron"===e){var t=Math.sqrt(3),a=Math.sqrt(6);return{vertices:[[t/3,-a/3*.333+.025*a,0],[-t/6,-a/3*.333+.025*a,.5],[-t/6,-a/3*.333+.025*a,-.5],[0,a/3*.666+.025*a,0]],faces:[[0,1,2],[3,1,0],[3,0,2],[3,2,1]]}}if("cube"===e){var n=.3;return{vertices:[[-n,-n,-n],[-n,-n,n],[n,-n,n],[n,-n,-n],[-n,n,-n],[-n,n,n],[n,n,n],[n,n,-n]],faces:[[0,3,2,1],[4,5,6,7],[0,1,5,4],[2,3,7,6],[1,2,6,5],[3,0,4,7]]}}if("octahedron"===e){var i=1/(2*Math.sqrt(2));return{vertices:[[-i,0,i],[i,0,i],[i,0,-i],[-i,0,-i],[0,.5,0],[0,-.5,0]],faces:[[3,0,4],[2,3,4],[1,2,4],[0,1,4],[3,2,5],[0,3,5],[2,1,5],[1,0,5]]}}if("pentagonaltrapezohedron"===e){return{vertices:[[.21029244,.1527864,.34026032],[-.08032456,.2472136,.34026032],[-.25993576,0,.34026032],[.21029244,-.6472136,.34026032],[.4205848,0,-.08032456],[.34026032,.2472136,.08032456],[-.21029244,.6472136,-.34026032],[-.4205848,0,.08032456],[-.34026032,-.2472136,-.08032456],[.08032456,-.2472136,-.34026032],[.25993576,0,-.34026032],[-.21029244,-.1527864,-.34026032]],faces:[[3,0,1,2],[0,3,4,5],[1,0,5,6],[2,1,6,7],[3,2,7,8],[4,3,9,10],[5,4,10,6],[7,6,11,8],[3,8,11,9],[10,9,11,6]]}}if("dodecahedron"===e){var r=(1+Math.sqrt(5))/2,o=.5/r,s=.5*(2-r);return{vertices:[[s,0,.5],[-s,0,.5],[-o,o,o],[0,.5,s],[o,o,o],[o,-o,o],[0,-.5,s],[-o,-o,o],[s,0,-.5],[-s,0,-.5],[-o,-o,-o],[0,-.5,-s],[o,-o,-o],[o,o,-o],[0,.5,-s],[-o,o,-o],[.5,s,0],[-.5,s,0],[-.5,-s,0],[.5,-s,0]],faces:[[4,3,2,1,0],[7,6,5,0,1],[12,11,10,9,8],[15,14,13,8,9],[14,3,4,16,13],[3,14,15,17,2],[11,6,7,18,10],[6,11,12,19,5],[4,0,5,19,16],[12,8,13,16,19],[15,9,10,18,17],[7,1,2,17,18]]}}if("icosahedron"===e){var c=1/(2*((1+Math.sqrt(5))/2));return{vertices:[[0,c,-.5],[c,.5,0],[-c,.5,0],[0,c,.5],[0,-c,.5],[-.5,0,c],[.5,0,c],[0,-c,-.5],[.5,0,-c],[-.5,0,-c],[c,-.5,0],[-c,-.5,0]],faces:[[1,0,2],[2,3,1],[4,3,5],[6,3,4],[7,0,8],[9,0,7],[10,4,11],[11,7,10],[5,2,9],[9,11,5],[8,1,6],[6,10,8],[5,3,2],[1,3,6],[2,0,9],[8,0,1],[9,7,11],[10,7,8],[11,4,5],[6,4,10]]}}}var C={emerald:{ambient:[.0215,.1745,.0215],diffuse:[.07568,.61424,.07568],specular:[.633,.727811,.633],shininess:.6},jade:{ambient:[.135,.2225,.1575],diffuse:[.54,.89,.63],specular:[.316228,.316228,.316228],shininess:.1},obsidian:{ambient:[.05375,.05,.06625],diffuse:[.18275,.17,.22525],specular:[.332741,.328634,.346435],shininess:.3},pearl:{ambient:[.25,.20725,.20725],diffuse:[1,.829,.829],specular:[.296648,.296648,.296648],shininess:.088},ruby:{ambient:[.1745,.01175,.01175],diffuse:[.61424,.04136,.04136],specular:[.727811,.626959,.626959],shininess:.6},turquoise:{ambient:[.1,.18725,.1745],diffuse:[.396,.74151,.69102],specular:[.297254,.30829,.306678],shininess:.1},brass:{ambient:[.329412,.223529,.027451],diffuse:[.780392,.568627,.113725],specular:[.992157,.941176,.807843],shininess:.21794872},bronze:{ambient:[.2125,.1275,.054],diffuse:[.714,.4284,.18144],specular:[.393548,.271906,.166721],shininess:.2},chrome:{ambient:[.25,.25,.25],diffuse:[.4,.4,.4],specular:[.774597,.774597,.774597],shininess:.6},copper:{ambient:[.19125,.0735,.0225],diffuse:[.7038,.27048,.0828],specular:[.256777,.137622,.086014],shininess:.1},gold:{ambient:[.24725,.1995,.0745],diffuse:[.75164,.60648,.22648],specular:[.628281,.555802,.366065],shininess:.4},silver:{ambient:[.19225,.19225,.19225],diffuse:[.50754,.50754,.50754],specular:[.508273,.508273,.508273],shininess:.4},blackPlastic:{ambient:[0,0,0],diffuse:[.01,.01,.01],specular:[.5,.5,.5],shininess:.25},cyanPlastic:{ambient:[0,.1,.06],diffuse:[0,.50980392,.50980392],specular:[.50196078,.50196078,.50196078],shininess:.25},greenPlastic:{ambient:[0,0,0],diffuse:[.1,.35,.1],specular:[.45,.55,.45],shininess:.25},redPlastic:{ambient:[0,0,0],diffuse:[.5,0,0],specular:[.7,.6,.6],shininess:.25},whitePlastic:{ambient:[0,0,0],diffuse:[.55,.55,.55],specular:[.7,.7,.7],shininess:.25},yellowPlastic:{ambient:[0,0,0],diffuse:[.5,.5,0],specular:[.6,.6,.5],shininess:.25},blackRubber:{ambient:[.02,.02,.02],diffuse:[.01,.01,.01],specular:[.4,.4,.4],shininess:.078125},cyanRubber:{ambient:[0,.05,.05],diffuse:[.4,.5,.5],specular:[.04,.7,.7],shininess:.078125},greenRubber:{ambient:[0,.05,0],diffuse:[.4,.5,.4],specular:[.04,.7,.04],shininess:.078125},redRubber:{ambient:[.05,0,0],diffuse:[.5,.4,.4],specular:[.7,.04,.04],shininess:.078125},whiteRubber:{ambient:[.05,.05,.05],diffuse:[.5,.5,.5],specular:[.7,.7,.7],shininess:.078125},yellowRubber:{ambient:[.05,.05,0],diffuse:[.5,.5,.4],specular:[.7,.7,.04],shininess:.078125}};function R(){var e=[];for(var t in C)C.hasOwnProperty(t)&&e.push(t);return e}function P(e){return C[e]}var F=a(1),B=a(7),N=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"_initModel",value:function(e){var t,a,n=this,i=e.gl,r=e.geometry,o=[];if(e.texture){var s={};e.texture.diffuse&&(s.diffuse=k(i,e.texture.diffuse)),e.texture.normal&&(s.normal=k(i,e.texture.normal)),e.texture.height&&(s.height=k(i,e.texture.height)),e.texture.occlusion&&(s.occlusion=k(i,e.texture.occlusion)),o.push(s)}else if(e.textures)for(var c=0;c<e.textures.length;c++){var l={};e.textures[c].diffuse&&(l.diffuse=k(i,e.textures[c].diffuse)),e.textures[c].normal&&(l.normal=k(i,e.textures[c].normal)),e.textures[c].height&&(l.height=k(i,e.textures[c].height)),e.textures[c].occlusion&&(l.occlusion=k(i,e.textures[c].occlusion)),o.push(l)}e.shader?Promise.all([fetch(e.shader.vertex).then((function(e){return e.text()})).then((function(e){return t=e})),fetch(e.shader.fragment).then((function(e){return e.text()})).then((function(e){return a=e}))]).then((function(){var e=n._setupShader(i,t,a),s=n._initBuffers(i,[e],r,o.length||1);n.model={shaders:[e],buffers:s,textures:o}})):function(){for(var t=new Array(e.shaders.length).fill(null),a=new Array(e.shaders.length).fill(null),s=[],c=function(n){s.push(fetch(e.shaders[n].vertex).then((function(e){return e.text()})).then((function(e){return t[n]=e}))),s.push(fetch(e.shaders[n].fragment).then((function(e){return e.text()})).then((function(e){return a[n]=e})))},l=0;l<e.shaders.length;l++)c(l);Promise.all(s).then((function(){for(var s=[],c=0;c<e.shaders.length;c++)s.push(n._setupShader(i,t[c],a[c]));var l=n._initBuffers(i,s,r,o.length||1);n.model={shaders:s,buffers:l,textures:o}}))}()}},{key:"_updateModel",value:function(e){this._deleteBuffers(),this.model.buffers=this._initBuffers(this.gl,this.model.shaders,e,this.model.textures.length||1)}},{key:"_setupShader",value:function(e,t,a){var n=this,i=function(e,t,a){var n=L(e,e.VERTEX_SHADER,t),i=L(e,e.FRAGMENT_SHADER,a),r=e.createProgram();return e.attachShader(r,n),e.attachShader(r,i),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)?r:(alert("Unable to initialize the shader program: "+e.getProgramInfoLog(r)),null)}(e,t,a),r=function(e,t){for(var a=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=[],i=0;i<a;i++){var r=e.getActiveAttrib(t,i);n.push({name:r.name,type:M(e,r.type)})}for(var o=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=[],c=0;c<o;c++){var l=e.getActiveUniform(t,c);s.push({name:l.name,type:M(e,l.type)})}return{attributes:n,uniforms:s}}(e,i),o={program:i,attribLocations:{},uniformLocations:{}};return r.attributes.forEach((function(t){var a=e.getAttribLocation(i,t.name);n._addShaderNameToJavascript(o.attribLocations,t.name,a)})),r.uniforms.forEach((function(t){var a=e.getUniformLocation(i,t.name);n._addShaderNameToJavascript(o.uniformLocations,t.name,a)})),o}},{key:"_addShaderNameToJavascript",value:function(e,t,a){if("a"===t[0]||"u"===t[0])for(var n=(t[1].toLowerCase()+t.slice(2)).split("."),i=e,r=0;r<n.length;r++){var o=n[r],s=o.indexOf("[");if(-1!==s){var c=o.indexOf("]");if(c<s+2)return void alert("shader name of "+t+" is not valid");var l=Number(o.slice(s+1,c));o=o.slice(0,s),r<n.length-1?(i[o]||(i[o]=[]),i[o].length<=l&&(i[o].length=l+1),i[o][l]||(i[o][l]={}),i=i[o][l]):(i[o]||(i[o]=[]),i[o].length<=l&&(i[o].length=l+1),i[o][l]=a)}else r<n.length-1?(i[o]||(i[o]={}),i=i[o]):i[o]=a}else alert("shader name of "+t+" is not valid")}},{key:"_initBuffers",value:function(e,t,a,n){for(var i={},r=0;r<t.length;r++){var o=t[r];o.attribLocations.vertexNormal&&(i.vertexNormal=!0),o.attribLocations.vertexTangent&&(i.vertexTangent=!0),o.attribLocations.vertexBitangent&&(i.vertexBitangent=!0),o.attribLocations.textureCoord&&(i.textureCoord=!0),o.attribLocations.vertexColor&&(i.vertexColor=!0)}for(var s=B.b(),c=B.b(),l=B.b(),u=[],h=0;h<n;h++)u.push({positions:[],normals:[],tangents:[],bitangents:[],textureCoordinates:[],colors:[],indices:[],offset:0});var d=function(e,t,a,n,r){var o,h=o=r&&r.bufferIndex?u[r.bufferIndex]:u[0],d=h.positions,m=h.normals,f=h.tangents,v=h.bitangents,p=h.textureCoordinates,g=h.colors,b=h.indices,x=h.offset;d.push.apply(d,Object(F.a)(e).concat(Object(F.a)(t),Object(F.a)(a),Object(F.a)(n))),b.push(x+0,x+1,x+2,x+2,x+3,x+0),o.offset+=4,(i.vertexNormal||i.vertexTangent||i.vertexBitangent)&&(B.e(c,t,e),B.e(l,n,e),i.vertexNormal&&(B.c(s,c,l),B.d(s,s),m.push.apply(m,Object(F.a)(s).concat(Object(F.a)(s),Object(F.a)(s),Object(F.a)(s)))),i.vertexTangent&&(B.d(c,c),f.push.apply(f,Object(F.a)(c).concat(Object(F.a)(c),Object(F.a)(c),Object(F.a)(c)))),i.vertexBitangent&&(B.d(l,l),v.push.apply(v,Object(F.a)(l).concat(Object(F.a)(l),Object(F.a)(l),Object(F.a)(l))))),i.textureCoord&&p.push(0,0,1,0,1,1,0,1),i.vertexColor&&g.push.apply(g,Object(F.a)(r.color).concat(Object(F.a)(r.color),Object(F.a)(r.color),Object(F.a)(r.color)))},m=function(e,t,a){switch(t.length){case 3:!function(e,t,a,n){var r,o=r=n.bufferIndex?u[n.bufferIndex]:u[0],h=o.positions,d=o.normals,m=o.tangents,f=o.bitangents,v=o.colors,p=o.indices,g=o.offset;h.push.apply(h,Object(F.a)(e).concat(Object(F.a)(t),Object(F.a)(a))),p.push(g+0,g+1,g+2),r.offset+=3,(i.vertexNormal||i.vertexTangent||i.vertexBitangent)&&(B.e(c,t,e),B.e(l,a,e),i.vertexNormal&&(B.c(s,c,l),B.d(s,s),d.push.apply(d,Object(F.a)(s).concat(Object(F.a)(s),Object(F.a)(s)))),i.vertexTangent&&(B.d(c,c),m.push.apply(m,Object(F.a)(c).concat(Object(F.a)(c),Object(F.a)(c)))),i.vertexBitangent&&(B.d(l,l),f.push.apply(f,Object(F.a)(l).concat(Object(F.a)(l),Object(F.a)(l))))),i.vertexColor&&v.push.apply(v,Object(F.a)(n.color).concat(Object(F.a)(n.color),Object(F.a)(n.color)))}(e[t[0]],e[t[1]],e[t[2]],a);break;case 4:d(e[t[0]],e[t[1]],e[t[2]],e[t[3]],a);break;case 5:!function(e,t,a,n,r,o){var h,d=h=o.bufferIndex?u[o.bufferIndex]:u[0],m=d.positions,f=d.normals,v=d.tangents,p=d.bitangents,g=d.colors,b=d.indices,x=d.offset;m.push.apply(m,Object(F.a)(e).concat(Object(F.a)(t),Object(F.a)(a),Object(F.a)(n),Object(F.a)(r))),b.push(x+0,x+3,x+4,x+0,x+1,x+3,x+1,x+2,x+3),h.offset+=5,(i.vertexNormal||i.vertexTangent||i.vertexBitangent)&&(B.e(c,t,e),B.e(l,r,e),i.vertexNormal&&(B.c(s,c,l),B.d(s,s),f.push.apply(f,Object(F.a)(s).concat(Object(F.a)(s),Object(F.a)(s),Object(F.a)(s),Object(F.a)(s)))),i.vertexTangent&&(B.d(c,c),v.push.apply(v,Object(F.a)(c).concat(Object(F.a)(c),Object(F.a)(c),Object(F.a)(c),Object(F.a)(c)))),i.vertexBitangent&&(B.d(l,l),p.push.apply(p,Object(F.a)(l).concat(Object(F.a)(l),Object(F.a)(l),Object(F.a)(l),Object(F.a)(l))))),i.vertexColor&&g.push.apply(g,Object(F.a)(o.color).concat(Object(F.a)(o.color),Object(F.a)(o.color),Object(F.a)(o.color),Object(F.a)(o.color)))}(e[t[0]],e[t[1]],e[t[2]],e[t[3]],e[t[4]],a);break;default:alert("faces with "+t.length+" vertices are not supported")}};a({addSquare:d,addFaces:function(e,t,a){for(var n=0;n<t.length;n++){var i={};a&&a.colors&&(i.color=a.colors[n%a.colors.length]),m(e,t[n],i)}}});for(var f=[],v=0;v<n;v++){var p=u[v],g=p.positions,b=p.normals,x=p.tangents,y=p.bitangents,O=p.textureCoordinates,w=p.colors,_=p.indices,M=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,M),e.bufferData(e.ARRAY_BUFFER,new Float32Array(g),e.STATIC_DRAW);var L=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,L),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(_),e.STATIC_DRAW);var k={position:M,indices:L,vertexCount:_.length};if(i.vertexNormal){var A=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,A),e.bufferData(e.ARRAY_BUFFER,new Float32Array(b),e.STATIC_DRAW),k.normal=A}if(i.vertexTangent){var E=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,E),e.bufferData(e.ARRAY_BUFFER,new Float32Array(x),e.STATIC_DRAW),k.tangent=E}if(i.vertexBitangent){var S=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,S),e.bufferData(e.ARRAY_BUFFER,new Float32Array(y),e.STATIC_DRAW),k.bitangent=S}if(i.textureCoord){var j=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,j),e.bufferData(e.ARRAY_BUFFER,new Float32Array(O),e.STATIC_DRAW),k.textureCoord=j}if(i.vertexColor){var T=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,T),e.bufferData(e.ARRAY_BUFFER,new Float32Array(w),e.STATIC_DRAW),k.color=T}f.push(k)}return f}},{key:"_deleteBuffers",value:function(){for(var e=this.model.buffers,t=0;t<e.length;t++){var a=e[t];for(var n in a.vertexCount=0,a)a.hasOwnProperty(n)&&"object"===typeof a[n]&&this.gl.deleteBuffer(a[n])}}},{key:"_drawModel",value:function(e){if(e.model)for(var t=e.gl,a=e.model,n=e.projectionMatrix,i=e.viewMatrix,r=e.modelMatrix,o=a.shaders,s=a.buffers,c=a.textures,l=o[e.shaderIndex?e.shaderIndex:0],u=0;u<s.length;u++){var h=s[u],d=c[u],m=t.FLOAT;if(t.bindBuffer(t.ARRAY_BUFFER,h.position),t.vertexAttribPointer(l.attribLocations.vertexPosition,3,m,!1,0,0),t.enableVertexAttribArray(l.attribLocations.vertexPosition),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,h.indices),l.attribLocations.vertexNormal){var f=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,h.normal),t.vertexAttribPointer(l.attribLocations.vertexNormal,3,f,!1,0,0),t.enableVertexAttribArray(l.attribLocations.vertexNormal)}if(l.attribLocations.vertexTangent){var v=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,h.tangent),t.vertexAttribPointer(l.attribLocations.vertexTangent,3,v,!1,0,0),t.enableVertexAttribArray(l.attribLocations.vertexTangent)}if(l.attribLocations.vertexBitangent){var p=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,h.bitangent),t.vertexAttribPointer(l.attribLocations.vertexBitangent,3,p,!1,0,0),t.enableVertexAttribArray(l.attribLocations.vertexBitangent)}if(l.attribLocations.textureCoord){var g=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,h.textureCoord),t.vertexAttribPointer(l.attribLocations.textureCoord,2,g,!1,0,0),t.enableVertexAttribArray(l.attribLocations.textureCoord)}if(l.attribLocations.vertexColor){var b=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,h.color),t.vertexAttribPointer(l.attribLocations.vertexColor,3,b,!1,0,0),t.enableVertexAttribArray(l.attribLocations.vertexColor)}if(t.useProgram(l.program),t.uniformMatrix4fv(l.uniformLocations.projectionMatrix,!1,n),t.uniformMatrix4fv(l.uniformLocations.modelMatrix,!1,r),t.uniformMatrix4fv(l.uniformLocations.viewMatrix,!1,i),l.uniformLocations.normalMatrix){var x=w.a();w.c(x,r),w.h(x,x),t.uniformMatrix4fv(l.uniformLocations.normalMatrix,!1,x)}if(l.uniformLocations.showDiffuseMap&&t.uniform1i(l.uniformLocations.showDiffuseMap,e.showDiffuseMap),l.uniformLocations.showNormalMap&&t.uniform1i(l.uniformLocations.showNormalMap,e.showNormalMap),l.uniformLocations.showAmbientOcclusionMap&&t.uniform1i(l.uniformLocations.showAmbientOcclusionMap,e.showAmbientOcclusionMap),l.uniformLocations.perPixel&&t.uniform1i(l.uniformLocations.perPixel,e.perPixel),l.uniformLocations.parallaxHeightScale&&t.uniform1f(l.uniformLocations.parallaxHeightScale,e.parallaxHeightScale),l.uniformLocations.parallaxSteps&&t.uniform1i(l.uniformLocations.parallaxSteps,e.parallaxSteps),l.uniformLocations.parallaxOcclusionMapping&&t.uniform1i(l.uniformLocations.parallaxOcclusionMapping,e.parallaxOcclusionMapping),l.uniformLocations.ambientLight&&t.uniform3fv(l.uniformLocations.ambientLight,e.ambientLight),l.uniformLocations.directionalLight){var y=B.a(e.directionalLight.direction);B.d(y,y),t.uniform3fv(l.uniformLocations.directionalLight.color,e.directionalLight.color),t.uniform3fv(l.uniformLocations.directionalLight.direction,y)}if(l.uniformLocations.pointLight&&(t.uniform3fv(l.uniformLocations.pointLight.color,e.pointLight.color),t.uniform3fv(l.uniformLocations.pointLight.position,e.pointLight.position)),e.lights)for(var O=e.lights,_=0;_<O.length;_++){var M=O[_];t.uniform3fv(l.uniformLocations.lights[_].position,M.position),t.uniform3fv(l.uniformLocations.lights[_].ambient,M.ambient),t.uniform3fv(l.uniformLocations.lights[_].diffuse,M.diffuse),t.uniform3fv(l.uniformLocations.lights[_].specular,M.specular)}if(e.material){var L=e.material;t.uniform3fv(l.uniformLocations.material.ambient,L.ambient),t.uniform3fv(l.uniformLocations.material.diffuse,L.diffuse),t.uniform3fv(l.uniformLocations.material.specular,L.specular),t.uniform1f(l.uniformLocations.material.shininess,L.shininess)}l.uniformLocations.cameraPos&&t.uniform3fv(l.uniformLocations.cameraPos,e.cameraPos),l.uniformLocations.samplerDiffuse&&(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,d.diffuse),t.uniform1i(l.uniformLocations.samplerDiffuse,0)),l.uniformLocations.samplerNormal&&(t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,d.normal),t.uniform1i(l.uniformLocations.samplerNormal,1)),l.uniformLocations.samplerHeight&&(t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,d.height),t.uniform1i(l.uniformLocations.samplerHeight,2)),l.uniformLocations.samplerOcclusion&&(t.activeTexture(t.TEXTURE3),t.bindTexture(t.TEXTURE_2D,d.occlusion),t.uniform1i(l.uniformLocations.samplerOcclusion,3));var k=h.vertexCount,A=t.UNSIGNED_SHORT;t.drawElements(t.TRIANGLES,k,A,0)}}}]),e}(),I=function(e){function t(e,a,n){var i;return Object(s.a)(this,t),(i=Object(l.a)(this,Object(u.a)(t).call(this,e))).gl=e,i.draw=i.draw.bind(Object(h.a)(i)),i._initModel({gl:e,geometry:function(e){var t=e.addFaces,i=T(a);t(i.vertices,i.faces,{colors:n})},shader:{vertex:"shaders/color/vertex.glsl",fragment:"shaders/color/fragment.glsl"}}),i}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a,n,i){this._drawModel({gl:this.gl,model:this.model,projectionMatrix:e,viewMatrix:t,modelMatrix:a,lights:n,material:i})}}]),t}(N),D=function(){function e(){Object(s.a)(this,e),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this),this.options=[{description:"Colored cube and dodecahedron with no lighting",type:"description"}]}return Object(c.a)(e,[{key:"initScene",value:function(e){var t=new I(e,"cube",[[0,0,1],[0,1,0],[1,0,1],[1,1,0],[1,1,1],[1,0,0]]),a=new I(e,"dodecahedron",[[1,0,0],[0,0,1],[0,1,0],[1,1,0],[0,1,1],[1,0,1],[1,.5,0],[0,1,.5],[1,0,.5],[.5,1,0],[0,.5,1],[.5,0,1]]);this.scene={actors:[{model:t,location:[-1.6,0,-6],scale:[3,3,3],rotations:[{angle:0,axis:[1,0,0],speed:1},{angle:0,axis:[0,1,0],speed:.7}]},{model:a,location:[1.6,0,-6],scale:[2.8,2.8,2.8],rotations:[{angle:0,axis:[1,0,0],speed:1},{angle:0,axis:[0,1,0],speed:.7}]}],camera:[0,0,0]}}},{key:"drawScene",value:function(e,t){var a=this.scene;E(e);var n=45*Math.PI/180,i=e.canvas.clientWidth/e.canvas.clientHeight,r=w.a();w.d(r,n,i,.1,100);var o=w.a();w.g(o,o,a.camera),w.c(o,o);for(var s=0;s<a.actors.length;s++){var c=a.actors[s];this._renderActor(r,o,c),this._animateActor(t,c)}}},{key:"_renderActor",value:function(e,t,a){var n=a.model,i=w.a();w.g(i,i,a.location),a.scale&&w.f(i,i,a.scale);for(var r=0;r<a.rotations.length;r++){var o=a.rotations[r];w.e(i,i,o.angle,o.axis)}n.draw(e,t,i)}},{key:"_animateActor",value:function(e,t){for(var a=0;a<t.rotations.length;a++){var n=t.rotations[a];n.angle+=e*n.speed}}}]),e}(),U=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).gl=e,a.draw=a.draw.bind(Object(h.a)(a)),a._initModel({gl:e,geometry:a._geometry,texture:{diffuse:"images/cubetexture.png"},shader:{vertex:"shaders/texture_D/vertex.glsl",fragment:"shaders/texture_D/fragment.glsl"}}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a){this._drawModel({gl:this.gl,model:this.model,projectionMatrix:e,viewMatrix:t,modelMatrix:a})}},{key:"_geometry",value:function(e){var t=e.addSquare,a=[-1,-1,1],n=[1,-1,1],i=[1,1,1],r=[-1,1,1],o=[-1,-1,-1],s=[1,-1,-1],c=[1,1,-1],l=[-1,1,-1];t(a,n,i,r),t(s,o,l,c),t(o,a,r,l),t(n,s,c,i),t(o,s,n,a),t(c,l,r,i)}}]),t}(N),z=function(){function e(){Object(s.a)(this,e),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this),this.options=[{description:"Textured cube with diffuse map only and no lighting",type:"description"}],this.credits=["Texture from Mozilla WebGL Tutorial","https://developer.mozilla.org/"]}return Object(c.a)(e,[{key:"initScene",value:function(e){var t=new U(e);this.scene={actors:[{model:t,location:[0,0,-6],rotations:[{angle:0,axis:[1,0,0],speed:1},{angle:0,axis:[0,1,0],speed:.7}]}],camera:[0,0,0]}}},{key:"drawScene",value:function(e,t){var a=this.scene;E(e);var n=45*Math.PI/180,i=e.canvas.clientWidth/e.canvas.clientHeight,r=w.a();w.d(r,n,i,.1,100);var o=w.a();w.g(o,o,a.camera),w.c(o,o);for(var s=0;s<a.actors.length;s++){var c=a.actors[s];this._renderActor(r,o,c),this._animateActor(t,c)}}},{key:"_renderActor",value:function(e,t,a){var n=a.model,i=w.a();w.g(i,i,a.location);for(var r=0;r<a.rotations.length;r++){var o=a.rotations[r];w.e(i,i,o.angle,o.axis)}n.draw(e,t,i)}},{key:"_animateActor",value:function(e,t){for(var a=0;a<t.rotations.length;a++){var n=t.rotations[a];n.angle+=e*n.speed}}}]),e}(),V=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).gl=e,a.draw=a.draw.bind(Object(h.a)(a)),a._initModel({gl:e,geometry:a._geometry,texture:{diffuse:"images/cubetexture.png"},shader:{vertex:"shaders/color_L/vertex.glsl",fragment:"shaders/color_L/fragment.glsl"}}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a,n){this._drawModel({gl:this.gl,model:this.model,projectionMatrix:e,viewMatrix:t,modelMatrix:a,ambientLight:[.3,.3,.3],directionalLight:{color:[.5,.5,.5],direction:[0,1,0]},pointLight:{color:[.7,.7,.7],position:[0,0,0]},cameraPos:[0,0,0],perPixel:n})}},{key:"_geometry",value:function(e){var t=e.addSquare,a=[-1,-1,1],n=[1,-1,1],i=[1,1,1],r=[-1,1,1],o=[-1,-1,-1],s=[1,-1,-1],c=[1,1,-1],l=[-1,1,-1];t(a,n,i,r),t(s,o,l,c),t(o,a,r,l),t(n,s,c,i),t(o,s,n,a),t(c,l,r,i)}}]),t}(N),W=function(){function e(){Object(s.a)(this,e),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this),this.options=[{description:"Textured cubes with diffuse map only, vertex lighting on left cube, fragment lighting on right cube",type:"description"}],this.credits=["Texture from Mozilla WebGL Tutorial","https://developer.mozilla.org/"]}return Object(c.a)(e,[{key:"initScene",value:function(e){var t=new V(e);this.scene={actors:[{model:t,location:[-2,0,-5.5],rotation:0,rotationSpeed:1,perPixel:!1},{model:t,location:[2,0,-5.5],rotation:0,rotationSpeed:1,perPixel:!0}],camera:[0,0,0],cameraDir:[0,0,2]}}},{key:"drawScene",value:function(e,t){var a=this.scene;E(e);var n=45*Math.PI/180,i=e.canvas.clientWidth/e.canvas.clientHeight,r=w.a();w.d(r,n,i,.1,100);var o=w.a();w.g(o,o,a.camera),w.c(o,o);for(var s=0;s<a.actors.length;s++){var c=a.actors[s];this._renderActor(r,o,c),this._animateActor(t,c)}a.camera[2]>16?(a.camera[2]=16,a.cameraDir[2]=-2):a.camera[2]<0&&(a.camera[2]=0,a.cameraDir[2]=2),a.camera[0]+=a.cameraDir[0]*t,a.camera[1]+=a.cameraDir[1]*t,a.camera[2]+=a.cameraDir[2]*t}},{key:"_renderActor",value:function(e,t,a){var n=a.model,i=w.a();w.g(i,i,a.location),w.e(i,i,a.rotation,[0,0,1]),w.e(i,i,.7*a.rotation,[0,1,0]),w.e(i,i,.3*a.rotation,[1,0,0]),n.draw(e,t,i,a.perPixel)}},{key:"_animateActor",value:function(e,t){t.rotation+=e*t.rotationSpeed}}]),e}(),Y=function(e){function t(e,a){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).gl=e,n.draw=n.draw.bind(Object(h.a)(n)),n.update=n.update.bind(Object(h.a)(n)),n._geometry=n._geometry.bind(Object(h.a)(n)),n.maze=a,n._initModel({gl:e,geometry:n._geometry,shaders:[{vertex:"shaders/color/vertex.glsl",fragment:"shaders/color/fragment.glsl"},{vertex:"shaders/material_L/vertex.glsl",fragment:"shaders/material_L/fragment.glsl"}]}),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a,n,i,r){this._drawModel({gl:this.gl,model:this.model,projectionMatrix:e,viewMatrix:t,modelMatrix:a,shaderIndex:n,lights:i,material:r})}},{key:"update",value:function(e){this.maze=e,this._updateModel(this._geometry)}},{key:"_geometry",value:function(e){for(var t=e.addSquare,a=this.maze,n=[.2,.2,.2],i=[.7,.7,.7],r=[.5,0,.5],o=[0,.5,0],s=[.5,0,0],c=[0,0,.5],l=-a.width/2,u=-a.height/2,h=0;h<a.height;h++)for(var d=0;d<a.width;d++){var m=d+l,f=m+1,v=h+u,p=v+1,g=[m,1,p],b=[f,1,p],x=[f,0,p],y=[m,0,p],O=[m,1,v],w=[f,1,v],_=[f,0,v],M=[m,0,v];0===a.data[h][d]?t(_,M,y,x,{color:n}):(t(w,O,g,b,{color:i}),0!==h&&0!==a.data[h-1][d]||t(O,w,_,M,{color:r}),0!==d&&0!==a.data[h][d-1]||t(g,O,M,y,{color:s}),h!==a.height-1&&0!==a.data[h+1][d]||t(b,g,y,x,{color:o}),d!==a.width-1&&0!==a.data[h][d+1]||t(w,b,x,_,{color:c}))}}}]),t}(N),H=function(){function e(){Object(s.a)(this,e),this.setOption=this.setOption.bind(this),this.initScene=this.initScene.bind(this),this.updateScene=this.updateScene.bind(this),this.drawScene=this.drawScene.bind(this),this.totalDelta=0,this.options=[{description:"Random maze geometry with colors or materials using Phong shading",type:"description"},{name:"Material",type:"select",options:["useColors"].concat(Object(F.a)(R()))},{name:"Update Maze",type:"function",function:this.updateScene}]}return Object(c.a)(e,[{key:"setOption",value:function(e,t){var a=this.options.find((function(t){return t.name===e}));a.value=Number(t);var n=this.scene.actors[0];if("Material"===a.name){var i=a.options[a.value];n.material="useColors"!==i?P(i):void 0}}},{key:"initScene",value:function(e){var t=this._generateMaze(),a=t.size,n=t.maze,i=new Y(e,n);this.scene={actors:[{model:i,location:[0,0,-2*a],rotation:{angle:0,axis:[0,1,0],speed:.5}}],camera:[0,0,0]},this.setOption("Material",1)}},{key:"updateScene",value:function(){var e=this._generateMaze(),t=e.size,a=e.maze;this.scene.actors[0].location=[0,0,-2*t],this.scene.actors[0].model.update(a)}},{key:"_generateMaze",value:function(){var e=2*Math.floor(35*Math.random())+11;return{size:e,maze:j(e,e)}}},{key:"drawScene",value:function(e,t){var a=this.scene;E(e);var n=45*Math.PI/180,i=e.canvas.clientWidth/e.canvas.clientHeight,r=w.a();w.d(r,n,i,.1,500);var o=w.a();w.g(o,o,a.camera),w.c(o,o);for(var s=0;s<a.actors.length;s++){var c=a.actors[s];this._renderActor(r,o,c),this._animateActor(t,c)}}},{key:"_renderActor",value:function(e,t,a){var n=a.model,i=w.a();if(w.g(i,i,a.location),w.e(i,i,_(45),[1,0,0]),w.e(i,i,a.rotation.angle,a.rotation.axis),a.material){n.draw(e,t,i,1,[{position:[10,-10,0],ambient:[.2,.2,.2],diffuse:[.5,.5,.5],specular:[.9,.9,.9]},{position:[-10,10,0],ambient:[.2,.2,.2],diffuse:[.5,.5,.5],specular:[.9,.9,.9]}],a.material)}else n.draw(e,t,i)}},{key:"_animateActor",value:function(e,t){t.rotation.angle+=e*t.rotation.speed}}]),e}(),X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).gl=e,a.draw=a.draw.bind(Object(h.a)(a)),a._initModel({gl:e,geometry:a._geometry,texture:{diffuse:"images/Brick_Wall_017_basecolor.jpg",normal:"images/Brick_Wall_017_normal.jpg",height:"images/Brick_Wall_017_height.png",occlusion:"images/Brick_Wall_017_ambientOcclusion.jpg"},shader:{vertex:"shaders/texture_LDNOP/vertex.glsl",fragment:"shaders/texture_LDNOP/fragment.glsl"}}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a,n){var i=n.showDiffuseMap,r=n.showNormalMap,o=n.showAmbientOcclusionMap,s=n.parallaxHeightScale,c=n.parallaxSteps,l=n.parallaxOcclusionMapping;this._drawModel({gl:this.gl,model:this.model,projectionMatrix:e,viewMatrix:t,modelMatrix:a,showDiffuseMap:i,showNormalMap:r,showAmbientOcclusionMap:o,parallaxHeightScale:s,parallaxSteps:c,parallaxOcclusionMapping:l,ambientLight:[.3,.3,.3],directionalLight:{color:[.4,.4,.4],direction:[0,-1,1]},pointLight:{color:[1,1,1],position:[0,0,0]},cameraPos:[0,0,0]})}},{key:"_geometry",value:function(e){var t=e.addSquare,a=[-1,-1,1],n=[1,-1,1],i=[1,1,1],r=[-1,1,1],o=[-1,-1,-1],s=[1,-1,-1],c=[1,1,-1],l=[-1,1,-1];t(a,n,i,r),t(s,o,l,c),t(o,a,r,l),t(n,s,c,i),t(o,s,n,a),t(c,l,r,i)}}]),t}(N),K=function(){function e(){Object(s.a)(this,e),this.setOption=this.setOption.bind(this),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this),this.renderOptions={showDiffuseMap:!0,showNormalMap:!0,showAmbientOcclusionMap:!0,parallaxHeightScale:.04,parallaxSteps:32,parallaxOcclusionMapping:!0},this.options=[{description:"Brick cube with diffuse, normal, height, and ambient occlusion maps",type:"description"},{name:"Show Diffuse Map",id:"showDiffuseMap",type:"bool"},{name:"Show Normal Map",id:"showNormalMap",type:"bool"},{name:"Show Ambient Occlusion Map",id:"showAmbientOcclusionMap",type:"bool"},{name:"Parallax Height Scale",id:"parallaxHeightScale",type:"float",min:0,max:.1},{name:"Parallax Steps",id:"parallaxSteps",type:"int",min:0,max:32},{name:"Use Parallax Occlusion Mapping",id:"parallaxOcclusionMapping",type:"bool"}];for(var t=0;t<this.options.length;t++)this.options[t].value=this.renderOptions[this.options[t].id];this.credits=["Textures created by Jo\xe3o Paulo","https://3dtextures.me/about/"]}return Object(c.a)(e,[{key:"setOption",value:function(e,t){var a=this.options.find((function(t){return t.name===e}));a.value=Number(t),this.renderOptions[a.id]=a.value}},{key:"initScene",value:function(e){var t=new X(e);this.scene={actors:[{model:t,location:[0,0,-5.5],rotations:[{angle:0,axis:[0,1,0],speed:.4},{angle:0,axis:[1,0,0],speed:.2}]}],camera:[0,0,0]}}},{key:"drawScene",value:function(e,t){var a=this.scene;E(e);var n=45*Math.PI/180,i=e.canvas.clientWidth/e.canvas.clientHeight,r=w.a();w.d(r,n,i,.1,100);var o=w.a();w.g(o,o,a.camera),w.c(o,o);for(var s=0;s<a.actors.length;s++){var c=a.actors[s];this._renderActor(r,o,c),this._animateActor(t,c)}}},{key:"_renderActor",value:function(e,t,a){var n=a.model,i=w.a();w.g(i,i,a.location);for(var r=0;r<a.rotations.length;r++){var o=a.rotations[r];w.e(i,i,o.angle,o.axis)}n.draw(e,t,i,this.renderOptions)}},{key:"_animateActor",value:function(e,t){for(var a=0;a<t.rotations.length;a++){var n=t.rotations[a];n.angle+=e*n.speed}}}]),e}(),q=function(e){function t(e,a){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).gl=e,n.draw=n.draw.bind(Object(h.a)(n)),n._initModel({gl:e,geometry:function(e){var t=e.addFaces,n=T(a);t(n.vertices,n.faces)},shader:{vertex:"shaders/material_L/vertex.glsl",fragment:"shaders/material_L/fragment.glsl"}}),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a,n,i){this._drawModel({gl:this.gl,model:this.model,projectionMatrix:e,viewMatrix:t,modelMatrix:a,lights:n,material:i})}}]),t}(N),G=function(){function e(){Object(s.a)(this,e),this.setOption=this.setOption.bind(this),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this),this.materials=new Array(3).fill(0);var t=R();this.options=[{description:"Various solid geometries with various materials using Phong shading",type:"description"},{name:"Material 1",type:"select",options:t},{name:"Material 2",type:"select",options:t},{name:"Material 3",type:"select",options:t}]}return Object(c.a)(e,[{key:"setOption",value:function(e,t){var a=this.options.find((function(t){return t.name===e}));if(a.value=Number(t),"Material 1"===a.name){var n=a.options[a.value];this.materials[0]=P(n)}else if("Material 2"===a.name){var i=a.options[a.value];this.materials[1]=P(i)}else if("Material 3"===a.name){var r=a.options[a.value];this.materials[2]=P(r)}}},{key:"initScene",value:function(e){var t=new q(e,"tetrahedron"),a=new q(e,"cube"),n=new q(e,"octahedron"),i=new q(e,"pentagonaltrapezohedron"),r=new q(e,"dodecahedron"),o=new q(e,"icosahedron");this.scene={actors:[{model:t,materialIndex:1,location:[-3.75,0,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:a,materialIndex:1,location:[-2.25,0,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:n,materialIndex:1,location:[-.75,0,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:i,materialIndex:1,location:[.75,0,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:r,materialIndex:1,location:[2.25,0,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:o,materialIndex:1,location:[3.75,0,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:t,materialIndex:0,location:[-3.75,2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:a,materialIndex:0,location:[-2.25,2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:n,materialIndex:0,location:[-.75,2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:i,materialIndex:0,location:[.75,2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:r,materialIndex:0,location:[2.25,2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:o,materialIndex:0,location:[3.75,2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:t,materialIndex:2,location:[-3.75,-2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:a,materialIndex:2,location:[-2.25,-2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:n,materialIndex:2,location:[-.75,-2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:i,materialIndex:2,location:[.75,-2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:r,materialIndex:2,location:[2.25,-2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:o,materialIndex:2,location:[3.75,-2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]}],camera:[0,0,0]},this.setOption("Material 1",8),this.setOption("Material 2",10),this.setOption("Material 3",2)}},{key:"drawScene",value:function(e,t){var a=this.scene;E(e);var n=45*Math.PI/180,i=e.canvas.clientWidth/e.canvas.clientHeight,r=w.a();w.d(r,n,i,.1,100);var o=w.a();w.g(o,o,a.camera),w.c(o,o);for(var s=0;s<a.actors.length;s++){var c=a.actors[s];this._renderActor(r,o,c),this._animateActor(t,c)}}},{key:"_renderActor",value:function(e,t,a){var n=a.model,i=w.a();w.g(i,i,a.location);for(var r=0;r<a.rotations.length;r++){var o=a.rotations[r];w.e(i,i,o.angle,o.axis)}n.draw(e,t,i,[{position:[10,-10,0],ambient:[.2,.2,.2],diffuse:[.5,.5,.5],specular:[.9,.9,.9]},{position:[-10,10,0],ambient:[.2,.2,.2],diffuse:[.5,.5,.5],specular:[.9,.9,.9]}],this.materials[a.materialIndex])}},{key:"_animateActor",value:function(e,t){for(var a=0;a<t.rotations.length;a++){var n=t.rotations[a];n.angle+=e*n.speed}}}]),e}(),J=function(e){function t(e,a){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).gl=e,n.map=a,n.draw=n.draw.bind(Object(h.a)(n)),n.update=n.update.bind(Object(h.a)(n)),n._geometry=n._geometry.bind(Object(h.a)(n)),n._initModel({gl:e,geometry:n._geometry,textures:[{diffuse:"images/Brick_Wall_017_basecolor.jpg",normal:"images/Brick_Wall_017_normal.jpg",occlusion:"images/Brick_Wall_017_ambientOcclusion.jpg"},{diffuse:"images/Tiles_035_basecolor.jpg",normal:"images/Tiles_035_normal.jpg",occlusion:"images/Tiles_035_ambientOcclusion.jpg"}],shader:{vertex:"shaders/texture_LDNO/vertex.glsl",fragment:"shaders/texture_LDNO/fragment.glsl"}}),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a,n){var i=n.showDiffuseMap,r=n.showNormalMap,o=n.showAmbientOcclusionMap,s=n.ambientLight,c=n.directionalLight,l=n.pointLight,u=n.cameraPos;this._drawModel({gl:this.gl,model:this.model,projectionMatrix:e,viewMatrix:t,modelMatrix:a,showDiffuseMap:i,showNormalMap:r,showAmbientOcclusionMap:o,ambientLight:s,directionalLight:c,pointLight:l,cameraPos:u})}},{key:"update",value:function(e){this.map=e,this._updateModel(this._geometry)}},{key:"_geometry",value:function(e){for(var t=e.addSquare,a=this.map,n=a.width,i=a.height,r=a.data,o=-n/2,s=-i/2,c=0;c<i;c++)for(var l=0;l<n;l++){var u=l+o,h=u+1,d=c+s,m=d+1,f=[u,1,m],v=[h,1,m],p=[h,0,m],g=[u,0,m],b=[u,1,d],x=[h,1,d],y=[h,0,d],O=[u,0,d];0===r[c][l]&&(t(y,O,g,p,{bufferIndex:1}),0!==c&&0===r[c-1][l]||t(x,b,O,y),0!==l&&0===r[c][l-1]||t(b,f,g,O),c!==i-1&&0===r[c+1][l]||t(f,v,p,g),l!==n-1&&0===r[c][l+1]||t(v,x,y,p))}}}]),t}(N),Q=function(){function e(){Object(s.a)(this,e),this.setOption=this.setOption.bind(this),this.mouseMovement=this.mouseMovement.bind(this),this.keyboardState=this.keyboardState.bind(this),this.initScene=this.initScene.bind(this),this.updateScene=this.updateScene.bind(this),this.drawScene=this.drawScene.bind(this),this.renderOptions={showDiffuseMap:!0,showNormalMap:!0,showAmbientOcclusionMap:!0,ambientLight:[.1,.1,.1],directionalLight:{color:[0,0,0],direction:[0,0,0]},pointLight:{color:[.6,.6,.6],position:[0,1,0]}},this.options=[{description:"Explorable random maze geometry with diffuse, normal, and ambient occlusion maps",type:"description"},{name:"Show Diffuse Map",id:"showDiffuseMap",type:"bool"},{name:"Show Normal Map",id:"showNormalMap",type:"bool"},{name:"Show Ambient Occlusion Map",id:"showAmbientOcclusionMap",type:"bool"},{name:"Update Geometry",type:"function",function:this.updateScene}];for(var t=0;t<this.options.length;t++)this.options[t].value=this.renderOptions[this.options[t].id];this.credits=["Textures created by Jo\xe3o Paulo","https://3dtextures.me/about/"],this.movement={front:0,side:0}}return Object(c.a)(e,[{key:"setOption",value:function(e,t){var a=this.options.find((function(t){return t.name===e}));a.value=Number(t),this.renderOptions[a.id]=a.value}},{key:"mouseMovement",value:function(e,t){var a=this.scene.camera;a.rotations[0].angle-=.001*e,a.rotations[1].angle-=.001*t}},{key:"keyboardState",value:function(e){var t=0;e.w&&(t-=1),e.s&&(t+=1);var a=0;e.a&&(a-=1),e.d&&(a+=1),this.movement.front=t,this.movement.side=a}},{key:"initScene",value:function(e){var t=j(11,11),a=this._findStartLocation(t),n=a.location,i=a.angle,r=new J(e,t);this.scene={actors:[{model:r,location:[0,0,0],rotations:[]}],camera:{location:n,rotations:[{angle:i,axis:[0,1,0]},{angle:0,axis:[1,0,0]}]}}}},{key:"updateScene",value:function(){var e=j(11,11),t=this._findStartLocation(e),a=t.location,n=t.angle;this.scene.camera.location=a,this.scene.camera.rotations[0].angle=n,this.scene.actors[0].model.update(e)}},{key:"_findStartLocation",value:function(e){for(var t=e.width,a=e.height,n=e.data,i=function(e,i){return e<0||e>=t||i<0||i>=a||0!==n[i][e]},r=-t/2,o=-a/2,s=0;s<a;s++)for(var c=0;c<t;c++)if(0===n[s][c]){for(var l=0,u=[],h=-1;h<2;h++)for(var d=-1;d<2;d++)i(c+d,s+h)?u.push("1"):u.push("0");return"0"===u[0]?l=-45:"0"===u[2]?l=45:"0"===u[6]?l=-225:"0"===u[8]?l=225:"0"===u[3]?l=90:"0"===u[5]?l=-90:"0"===u[7]&&(l=180),{location:[c+r+.5,.5,s+o+.5],angle:_(l)}}return{location:[0,.5,0]}}},{key:"drawScene",value:function(e,t){var a=this.scene,n=a.camera;E(e);var i=45*Math.PI/180,r=e.canvas.clientWidth/e.canvas.clientHeight,o=w.a();w.d(o,i,r,.1,100);var s=w.a();w.g(s,s,n.location);for(var c=0;c<n.rotations.length;c++){var l=n.rotations[c];w.e(s,s,l.angle,l.axis)}w.c(s,s),this.renderOptions.cameraPos=n.location,this.renderOptions.pointLight.position=n.location;for(var u=0;u<a.actors.length;u++){var h=a.actors[u];this._renderActor(o,s,h),this._animateActor(t,h)}w.b(s),w.e(s,s,n.rotations[0].angle,n.rotations[0].axis),w.c(s,s),n.location[0]+=t*this.movement.front*s[2],n.location[1]+=t*this.movement.front*s[6],n.location[2]+=t*this.movement.front*s[10],n.location[0]+=t*this.movement.side*s[0],n.location[1]+=t*this.movement.side*s[4],n.location[2]+=t*this.movement.side*s[8]}},{key:"_renderActor",value:function(e,t,a){var n=a.model,i=w.a();w.g(i,i,a.location);for(var r=0;r<a.rotations.length;r++){var o=a.rotations[r];w.e(i,i,o.angle,o.axis)}n.draw(e,t,i,this.renderOptions)}},{key:"_animateActor",value:function(e,t){for(var a=0;a<t.rotations.length;a++){var n=t.rotations[a];n.angle+=e*n.speed}}}]),e}(),$=function(){function e(t){if(Object(s.a)(this,e),this.canvas=t,this.resizeViewport=this.resizeViewport.bind(this),this.getScene=this.getScene.bind(this),this.previousScene=this.previousScene.bind(this),this.nextScene=this.nextScene.bind(this),this.renderScene=this.renderScene.bind(this),this.scenes=[{init:!1,render:new D},{init:!1,render:new z},{init:!1,render:new G},{init:!1,render:new H},{init:!1,render:new W},{init:!1,render:new K},{init:!1,render:new Q}],this.sceneIndex=0,this.gl=t.getContext("webgl"),null===this.gl)alert("Unable to initialize WebGL. Your browser or machine may not support it.");else{this.resizeViewport(),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK);var a=this.scenes[this.sceneIndex];this.initScene(a)}}return Object(c.a)(e,[{key:"resizeViewport",value:function(){var e=this.canvas,t=e.getBoundingClientRect();e.width=t.width,e.height=t.height,this.gl.viewport(0,0,e.width,e.height)}},{key:"initScene",value:function(e){e.init||(e.init=!0,e.render.initScene(this.gl),e.render.options&&(e.options=e.render.options,e.setOption=e.render.setOption),e.render.credits&&(e.credits=e.render.credits),e.render.mouseMovement&&(e.mouseMovement=e.render.mouseMovement),e.render.keyboardState&&(e.keyboardState=e.render.keyboardState))}},{key:"getScene",value:function(){return this.scenes[this.sceneIndex]}},{key:"previousScene",value:function(){this.sceneIndex=(this.sceneIndex-1)%this.scenes.length,this.sceneIndex<0&&(this.sceneIndex=this.scenes.length-1);var e=this.scenes[this.sceneIndex];return this.initScene(e),this.scenes[this.sceneIndex]}},{key:"nextScene",value:function(){this.sceneIndex=(this.sceneIndex+1)%this.scenes.length;var e=this.scenes[this.sceneIndex];return this.initScene(e),this.scenes[this.sceneIndex]}},{key:"renderScene",value:function(e){e*=.001,this.timeStamp||(this.timeStamp=e);var t=e-this.timeStamp;this.timeStamp=e;var a=this.scenes[this.sceneIndex];a.fps=Math.round(1/t),a.render.drawScene(this.gl,t)}}]),e}(),Z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).onResize=a.onResize.bind(Object(h.a)(a)),a.onKeyDown=a.onKeyDown.bind(Object(h.a)(a)),a.onKeyUp=a.onKeyUp.bind(Object(h.a)(a)),a.onMouseMove=a.onMouseMove.bind(Object(h.a)(a)),a.onLockChange=a.onLockChange.bind(Object(h.a)(a)),a.onClickCanvas=a.onClickCanvas.bind(Object(h.a)(a)),a.onChange=a.onChange.bind(Object(h.a)(a)),a.onClickPrevious=a.onClickPrevious.bind(Object(h.a)(a)),a.onClickNext=a.onClickNext.bind(Object(h.a)(a)),a.onClickMessage=a.onClickMessage.bind(Object(h.a)(a)),a.onAnimationFrame=a.onAnimationFrame.bind(Object(h.a)(a)),a.state={showControls:!1},a.keys={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.sceneManager=new $(this.canvas);var e=this.sceneManager.getScene(),t=e.mouseMovement?"Click the canvas to explore the scene":void 0;this.setState({scene:e,note:t}),this.canvas.requestPointerLock=this.canvas.requestPointerLock||this.canvas.mozRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock,this.frame=window.requestAnimationFrame(this.onAnimationFrame),window.addEventListener("resize",this.onResize),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),document.addEventListener("pointerlockchange",this.onLockChange),document.addEventListener("mozpointerlockchange",this.onLockChange),this.showMessage(["Press Escape to toggle menu","Press Page Up for previous screen","Press Page Down for next screen"])}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.frame),window.removeEventListener("resize",this.onResize),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("pointerlockchange",this.onLockChange),document.removeEventListener("mozpointerlockchange",this.onLockChange)}},{key:"cancelLock",value:function(){this.captureMouse=!1,this.captureKeys=!1,document.exitPointerLock()}},{key:"onResize",value:function(){this.sceneManager.resizeViewport()}},{key:"onKeyDown",value:function(e){e.preventDefault(),this.keys[e.key]||(this.onKeyPress(e.key),this.keys[e.key]=!0,this.captureKeys&&this.state.scene.keyboardState(this.keys))}},{key:"onKeyUp",value:function(e){e.preventDefault(),this.keys[e.key]=!1,this.captureKeys&&this.state.scene.keyboardState(this.keys)}},{key:"onKeyPress",value:function(e){if("Escape"===e)this.messageTimer?this.cancelMessage():this.setState({showControls:!this.state.showControls});else if("PageUp"===e){this.cancelLock();var t=this.sceneManager.previousScene(),a=t.mouseMovement?"Click the canvas to explore the scene":void 0;this.setState({scene:t,note:a})}else if("PageDown"===e){this.cancelLock();var n=this.sceneManager.nextScene(),i=n.mouseMovement?"Click the canvas to explore the scene":void 0;this.setState({scene:n,note:i})}}},{key:"onMouseMove",value:function(e){this.captureMouse&&this.state.scene.mouseMovement(e.movementX,e.movementY)}},{key:"onLockChange",value:function(e){e.preventDefault(),document.pointerLockElement===this.canvas||document.mozPointerLockElement===this.canvas?(document.addEventListener("mousemove",this.onMouseMove),this.captureMouse=!0,this.state.scene.keyboardState&&(this.captureKeys=!0)):(document.removeEventListener("mousemove",this.onMouseMove),this.captureMouse=!1,this.captureKeys=!1,this.forceUpdate())}},{key:"onClickCanvas",value:function(e){e.preventDefault(),this.state.scene.mouseMovement&&(this.canvas.requestPointerLock(),this.setState({showControls:!1,note:void 0}))}},{key:"onChange",value:function(e,t){t!==e.value&&(this.state.scene.setOption(e.name,t),this.forceUpdate())}},{key:"onClickPrevious",value:function(e){e.preventDefault(),this.cancelLock();var t=this.sceneManager.previousScene(),a=t.mouseMovement?"Click the canvas to explore the scene":void 0;this.setState({scene:t,note:a})}},{key:"onClickNext",value:function(e){e.preventDefault(),this.cancelLock();var t=this.sceneManager.nextScene(),a=t.mouseMovement?"Click the canvas to explore the scene":void 0;this.setState({scene:t,note:a})}},{key:"onClickMessage",value:function(e){e.preventDefault(),this.messageTimer&&this.cancelMessage()}},{key:"showMessage",value:function(e){this.setState({message:e}),this.messageTimer=setTimeout(this.clearMessage.bind(this),1e4)}},{key:"clearMessage",value:function(){this.setState({message:void 0}),this.messageTimer=void 0}},{key:"cancelMessage",value:function(){clearTimeout(this.messageTimer),this.clearMessage()}},{key:"onAnimationFrame",value:function(e){this.sceneManager.renderScene(e),this.setState({fps:this.state.scene.fps}),this.frame=window.requestAnimationFrame(this.onAnimationFrame)}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"screen"},i.a.createElement("canvas",{id:"canvas",ref:function(t){return e.canvas=t},onClick:this.onClickCanvas}),i.a.createElement("div",{id:"note"},this.state.fps?i.a.createElement("div",null,this.state.fps," fps"):null,this.state.note?i.a.createElement("div",null,this.state.note):null),i.a.createElement(m,{message:this.state.message,onClick:this.onClickMessage}),i.a.createElement(y,{show:this.state.showControls,onClickPrevious:this.onClickPrevious,onClickNext:this.onClickNext,onChange:this.onChange,options:this.state.scene?this.state.scene.options:void 0}),i.a.createElement(O,{show:this.state.showControls,credits:this.state.scene?this.state.scene.credits:void 0}))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(Z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.8c7a6c51.chunk.js.map