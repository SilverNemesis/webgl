(this.webpackJsonpwebgl=this.webpackJsonpwebgl||[]).push([[0],{13:function(e,t,a){e.exports=a(19)},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var i=a(2),n=a.n(i),o=a(12),r=a.n(o),s=(a(18),a(5)),c=a(6),l=a(9),h=a(8),u=a(4),d=a(10),m=function(e){var t=e.message,a=e.onClick;return t?n.a.createElement("div",{id:"message",onClick:a},t.map((function(e,t){return n.a.createElement("div",{key:t},e)}))):null},f=function(e){var t=e.control;return n.a.createElement("div",{className:"control"},t.description)},g=function(e){for(var t=e.control,a=[],i=0;i<t.options.length;i++)a.push(n.a.createElement("option",{key:i,value:i},t.options[i]));return n.a.createElement("div",{className:"control"},n.a.createElement("label",{htmlFor:t.name},t.name),n.a.createElement("select",{id:t.name,className:"select-css",value:t.value,onChange:function(a){e.onChange(t,a.target.value)}},a))},p=function(e){var t=e.control;return n.a.createElement("div",{className:"control"},n.a.createElement("label",{className:"clickable",htmlFor:t.name},n.a.createElement("input",{className:"clickable",id:t.name,type:"checkbox",checked:t.value,onChange:function(a){e.onChange(t,a.target.checked)}}),t.name))},v=function(e){var t=e.control;return n.a.createElement("div",{className:"control"},n.a.createElement("label",{htmlFor:t.name},t.name," ",t.value),n.a.createElement("input",{id:t.name,className:"clickable",type:"range",min:t.min,max:t.max,value:t.value,onChange:function(a){e.onChange(t,a.target.value)}}))},b=function(e){var t=1e3;var a=e.control;return n.a.createElement("div",{className:"control"},n.a.createElement("label",{htmlFor:a.name},a.name," ",a.value.toFixed(3)),n.a.createElement("input",{id:a.name,className:"clickable",type:"range",min:Math.floor(a.min*t),max:Math.floor(a.max*t),value:Math.floor(a.value*t),onChange:function(i){e.onChange(a,i.target.value/t)}}))},x=function(e){var t=e.control;return n.a.createElement("div",{className:"control"},n.a.createElement("button",{onClick:function(e){t.function()}},t.name))},O=function(e){var t,a=e.show,i=e.onClickPrevious,o=e.onClickNext,r=e.onChange,s=e.options;return a?(s&&(t=s.map((function(e,t){switch(e.type){case"description":return n.a.createElement(f,{key:t,control:e});case"select":return n.a.createElement(g,{key:t,control:e,onChange:r});case"bool":return n.a.createElement(p,{key:t,control:e,onChange:r});case"int":return n.a.createElement(v,{key:t,control:e,onChange:r});case"float":return n.a.createElement(b,{key:t,control:e,onChange:r});case"function":return n.a.createElement(x,{key:t,control:e});default:return n.a.createElement("div",{key:t,className:"control"},e.type," is not supported")}}))),n.a.createElement("div",{id:"overlay"},n.a.createElement("div",{className:"none"},n.a.createElement("span",{className:"left",onClick:i},"\u276e PREV"),n.a.createElement("span",{className:"right",onClick:o},"NEXT \u276f")),n.a.createElement("div",null,t))):null},y=function(e){var t,a=e.show,i=e.credits;return a?(i&&(t=i.map((function(e,t){if(e.startsWith("link:")){var a=e.slice(5);return n.a.createElement("div",{key:t,className:"credit"},n.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},a))}return""===e?n.a.createElement("div",{key:t,className:"credit"}):n.a.createElement("div",{key:t,className:"credit"},e)}))),n.a.createElement("div",{id:"credits"},t)):null},M=a(0);function L(e){return e*(Math.PI/180)}function w(e,t){switch(t){case e.FLOAT:return"FLOAT";case e.FLOAT_VEC2:return"FLOAT_VEC2";case e.FLOAT_VEC3:return"FLOAT_VEC3";case e.FLOAT_VEC4:return"FLOAT_VEC4";case e.INT:return"INT";case e.INT_VEC2:return"INT_VEC2";case e.INT_VEC3:return"INT_VEC3";case e.INT_VEC4:return"INT_VEC4";case e.BOOL:return"BOOL";case e.BOOL_VEC2:return"BOOL_VEC2";case e.BOOL_VEC3:return"BOOL_VEC3";case e.BOOL_VEC4:return"BOOL_VEC4";case e.FLOAT_MAT2:return"FLOAT_MAT2";case e.FLOAT_MAT3:return"FLOAT_MAT3";case e.FLOAT_MAT4:return"FLOAT_MAT4";case e.SAMPLER_2D:return"SAMPLER_2D";case e.SAMPLER_CUBE:return"SAMPLER_CUBE";default:return"UNKNOWN"}}function _(e,t,a){var i=e.createShader(t);return e.shaderSource(i,a),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS)?i:(alert("An error occurred compiling the shaders: "+e.getShaderInfoLog(i)),e.deleteShader(i),null)}function k(e,t){var a=e.createTexture();e.bindTexture(e.TEXTURE_2D,a);var i=e.RGBA,n=e.RGBA,o=e.UNSIGNED_BYTE,r=new Uint8Array([0,0,255,255]);e.texImage2D(e.TEXTURE_2D,0,i,1,1,0,n,o,r);var s=new Image;return s.onload=function(){e.bindTexture(e.TEXTURE_2D,a),e.texImage2D(e.TEXTURE_2D,0,i,n,o,s),A(s.width)&&A(s.height)?e.generateMipmap(e.TEXTURE_2D):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR))},s.src=t,a}function A(e){return 0===(e&e-1)}function E(e){e.clearColor(0,0,0,1),e.clearDepth(1),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function S(e){return e[Math.floor(Math.random()*e.length)]}function T(e){if("tetrahedron"===e){var t=Math.sqrt(3),a=Math.sqrt(6);return{vertices:[[t/3,-a/3*.333+.025*a,0],[-t/6,-a/3*.333+.025*a,.5],[-t/6,-a/3*.333+.025*a,-.5],[0,a/3*.666+.025*a,0]],faces:[[0,1,2],[3,1,0],[3,0,2],[3,2,1]]}}if("cube"===e){var i=.35;return{vertices:[[-i,-i,-i],[-i,-i,i],[i,-i,i],[i,-i,-i],[-i,i,-i],[-i,i,i],[i,i,i],[i,i,-i]],faces:[[0,3,2,1],[4,5,6,7],[0,1,5,4],[2,3,7,6],[1,2,6,5],[3,0,4,7]]}}if("octahedron"===e){var n=1/(2*Math.sqrt(2))*1.3;return{vertices:[[-n,0,n],[n,0,n],[n,0,-n],[-n,0,-n],[0,.65,0],[0,-.65,0]],faces:[[3,0,4],[2,3,4],[1,2,4],[0,1,4],[3,2,5],[0,3,5],[2,1,5],[1,0,5]]}}if("pentagonaltrapezohedron"===e){return{vertices:[[.21029244,.1527864,.34026032],[-.08032456,.2472136,.34026032],[-.25993576,0,.34026032],[.21029244,-.6472136,.34026032],[.4205848,0,-.08032456],[.34026032,.2472136,.08032456],[-.21029244,.6472136,-.34026032],[-.4205848,0,.08032456],[-.34026032,-.2472136,-.08032456],[.08032456,-.2472136,-.34026032],[.25993576,0,-.34026032],[-.21029244,-.1527864,-.34026032]],faces:[[3,0,1,2],[0,3,4,5],[1,0,5,6],[2,1,6,7],[3,2,7,8],[4,3,9,10],[5,4,10,6],[7,6,11,8],[3,8,11,9],[10,9,11,6]]}}if("dodecahedron"===e){var o=(1+Math.sqrt(5))/2,r=.5/o,s=.5*(2-o);return{vertices:[[s,0,.5],[-s,0,.5],[-r,r,r],[0,.5,s],[r,r,r],[r,-r,r],[0,-.5,s],[-r,-r,r],[s,0,-.5],[-s,0,-.5],[-r,-r,-r],[0,-.5,-s],[r,-r,-r],[r,r,-r],[0,.5,-s],[-r,r,-r],[.5,s,0],[-.5,s,0],[-.5,-s,0],[.5,-s,0]],faces:[[4,3,2,1,0],[7,6,5,0,1],[12,11,10,9,8],[15,14,13,8,9],[14,3,4,16,13],[3,14,15,17,2],[11,6,7,18,10],[6,11,12,19,5],[4,0,5,19,16],[12,8,13,16,19],[15,9,10,18,17],[7,1,2,17,18]]}}if("icosahedron"===e){var c=1/(2*((1+Math.sqrt(5))/2));return{vertices:[[0,c,-.5],[c,.5,0],[-c,.5,0],[0,c,.5],[0,-c,.5],[-.5,0,c],[.5,0,c],[0,-c,-.5],[.5,0,-c],[-.5,0,-c],[c,-.5,0],[-c,-.5,0]],faces:[[1,0,2],[2,3,1],[4,3,5],[6,3,4],[7,0,8],[9,0,7],[10,4,11],[11,7,10],[5,2,9],[9,11,5],[8,1,6],[6,10,8],[5,3,2],[1,3,6],[2,0,9],[8,0,1],[9,7,11],[10,7,8],[11,4,5],[6,4,10]]}}}var j={emerald:{ambient:[.0215,.1745,.0215],diffuse:[.07568,.61424,.07568],specular:[.633,.727811,.633],shininess:.6},jade:{ambient:[.135,.2225,.1575],diffuse:[.54,.89,.63],specular:[.316228,.316228,.316228],shininess:.1},obsidian:{ambient:[.05375,.05,.06625],diffuse:[.18275,.17,.22525],specular:[.332741,.328634,.346435],shininess:.3},pearl:{ambient:[.25,.20725,.20725],diffuse:[1,.829,.829],specular:[.296648,.296648,.296648],shininess:.088},ruby:{ambient:[.1745,.01175,.01175],diffuse:[.61424,.04136,.04136],specular:[.727811,.626959,.626959],shininess:.6},turquoise:{ambient:[.1,.18725,.1745],diffuse:[.396,.74151,.69102],specular:[.297254,.30829,.306678],shininess:.1},brass:{ambient:[.329412,.223529,.027451],diffuse:[.780392,.568627,.113725],specular:[.992157,.941176,.807843],shininess:.21794872},bronze:{ambient:[.2125,.1275,.054],diffuse:[.714,.4284,.18144],specular:[.393548,.271906,.166721],shininess:.2},chrome:{ambient:[.25,.25,.25],diffuse:[.4,.4,.4],specular:[.774597,.774597,.774597],shininess:.6},copper:{ambient:[.19125,.0735,.0225],diffuse:[.7038,.27048,.0828],specular:[.256777,.137622,.086014],shininess:.1},gold:{ambient:[.24725,.1995,.0745],diffuse:[.75164,.60648,.22648],specular:[.628281,.555802,.366065],shininess:.4},silver:{ambient:[.19225,.19225,.19225],diffuse:[.50754,.50754,.50754],specular:[.508273,.508273,.508273],shininess:.4},blackPlastic:{ambient:[0,0,0],diffuse:[.01,.01,.01],specular:[.5,.5,.5],shininess:.25},cyanPlastic:{ambient:[0,.1,.06],diffuse:[0,.50980392,.50980392],specular:[.50196078,.50196078,.50196078],shininess:.25},greenPlastic:{ambient:[0,0,0],diffuse:[.1,.35,.1],specular:[.45,.55,.45],shininess:.25},redPlastic:{ambient:[0,0,0],diffuse:[.5,0,0],specular:[.7,.6,.6],shininess:.25},whitePlastic:{ambient:[0,0,0],diffuse:[.55,.55,.55],specular:[.7,.7,.7],shininess:.25},yellowPlastic:{ambient:[0,0,0],diffuse:[.5,.5,0],specular:[.6,.6,.5],shininess:.25},blackRubber:{ambient:[.02,.02,.02],diffuse:[.01,.01,.01],specular:[.4,.4,.4],shininess:.078125},cyanRubber:{ambient:[0,.05,.05],diffuse:[.4,.5,.5],specular:[.04,.7,.7],shininess:.078125},greenRubber:{ambient:[0,.05,0],diffuse:[.4,.5,.4],specular:[.04,.7,.04],shininess:.078125},redRubber:{ambient:[.05,0,0],diffuse:[.5,.4,.4],specular:[.7,.04,.04],shininess:.078125},whiteRubber:{ambient:[.05,.05,.05],diffuse:[.5,.5,.5],specular:[.7,.7,.7],shininess:.078125},yellowRubber:{ambient:[.05,.05,0],diffuse:[.5,.5,.4],specular:[.7,.7,.04],shininess:.078125}};function C(){var e=[];for(var t in j)j.hasOwnProperty(t)&&e.push(t);return e}function R(e){return j[e]}var P=a(1),D=a(7),F=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"_initModel",value:function(e){var t,a,i=this,n=e.gl,o=e.geometry,r=e.bufferCount,s=[];if(e.texture){var c={};e.texture.diffuse&&(c.diffuse=k(n,e.texture.diffuse)),e.texture.normal&&(c.normal=k(n,e.texture.normal)),e.texture.height&&(c.height=k(n,e.texture.height)),e.texture.occlusion&&(c.occlusion=k(n,e.texture.occlusion)),s.push(c)}else if(e.textures)for(var l=0;l<e.textures.length;l++){var h={};e.textures[l].diffuse&&(h.diffuse=k(n,e.textures[l].diffuse)),e.textures[l].normal&&(h.normal=k(n,e.textures[l].normal)),e.textures[l].height&&(h.height=k(n,e.textures[l].height)),e.textures[l].occlusion&&(h.occlusion=k(n,e.textures[l].occlusion)),s.push(h)}e.shader?Promise.all([fetch(e.shader.vertex).then((function(e){return e.text()})).then((function(e){return t=e})),fetch(e.shader.fragment).then((function(e){return e.text()})).then((function(e){return a=e}))]).then((function(){var e=i._setupShader(n,t,a),c=i._initBuffers(n,[e],o,r||s.length||1);i.model={shaders:[e],buffers:c,textures:s}})):function(){for(var t=new Array(e.shaders.length).fill(null),a=new Array(e.shaders.length).fill(null),c=[],l=function(i){c.push(fetch(e.shaders[i].vertex).then((function(e){return e.text()})).then((function(e){return t[i]=e}))),c.push(fetch(e.shaders[i].fragment).then((function(e){return e.text()})).then((function(e){return a[i]=e})))},h=0;h<e.shaders.length;h++)l(h);Promise.all(c).then((function(){for(var c=[],l=0;l<e.shaders.length;l++)c.push(i._setupShader(n,t[l],a[l]));var h=i._initBuffers(n,c,o,r||s.length||1);i.model={shaders:c,buffers:h,textures:s}}))}()}},{key:"_updateModel",value:function(e){var t=this.model.buffers.length;this._deleteBuffers(),this.model.buffers=this._initBuffers(this.gl,this.model.shaders,e,t)}},{key:"_setupShader",value:function(e,t,a){var i=this,n=function(e,t,a){var i=_(e,e.VERTEX_SHADER,t),n=_(e,e.FRAGMENT_SHADER,a),o=e.createProgram();return e.attachShader(o,i),e.attachShader(o,n),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)?o:(alert("Unable to initialize the shader program: "+e.getProgramInfoLog(o)),null)}(e,t,a),o=function(e,t){for(var a=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=[],n=0;n<a;n++){var o=e.getActiveAttrib(t,n);i.push({name:o.name,type:w(e,o.type)})}for(var r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),s=[],c=0;c<r;c++){var l=e.getActiveUniform(t,c);s.push({name:l.name,type:w(e,l.type)})}return{attributes:i,uniforms:s}}(e,n),r={program:n,attribLocations:{},uniformLocations:{}};return o.attributes.forEach((function(t){var a=e.getAttribLocation(n,t.name);i._addShaderNameToJavascript(r.attribLocations,t.name,a)})),o.uniforms.forEach((function(t){var a=e.getUniformLocation(n,t.name);i._addShaderNameToJavascript(r.uniformLocations,t.name,a)})),r}},{key:"_addShaderNameToJavascript",value:function(e,t,a){if("a"===t[0]||"u"===t[0])for(var i=(t[1].toLowerCase()+t.slice(2)).split("."),n=e,o=0;o<i.length;o++){var r=i[o],s=r.indexOf("[");if(-1!==s){var c=r.indexOf("]");if(c<s+2)return void alert("shader name of "+t+" is not valid");var l=Number(r.slice(s+1,c));r=r.slice(0,s),o<i.length-1?(n[r]||(n[r]=[]),n[r].length<=l&&(n[r].length=l+1),n[r][l]||(n[r][l]={}),n=n[r][l]):(n[r]||(n[r]=[]),n[r].length<=l&&(n[r].length=l+1),n[r][l]=a)}else o<i.length-1?(n[r]||(n[r]={}),n=n[r]):n[r]=a}else alert("shader name of "+t+" is not valid")}},{key:"_initBuffers",value:function(e,t,a,i){for(var n={},o=0;o<t.length;o++){var r=t[o];r.attribLocations.vertexNormal&&(n.vertexNormal=!0),r.attribLocations.vertexTangent&&(n.vertexTangent=!0),r.attribLocations.vertexBitangent&&(n.vertexBitangent=!0),r.attribLocations.textureCoord&&(n.textureCoord=!0),r.attribLocations.vertexColor&&(n.vertexColor=!0)}for(var s=D.b(),c=D.b(),l=D.b(),h=[],u=0;u<i;u++)h.push({positions:[],normals:[],tangents:[],bitangents:[],textureCoordinates:[],colors:[],indices:[],offset:0});var d=function(e,t,a,i,o){var r,u=r=o&&o.bufferIndex?h[o.bufferIndex]:h[0],d=u.positions,m=u.normals,f=u.tangents,g=u.bitangents,p=u.textureCoordinates,v=u.colors,b=u.indices,x=u.offset;d.push.apply(d,Object(P.a)(e).concat(Object(P.a)(t),Object(P.a)(a),Object(P.a)(i))),b.push(x+0,x+1,x+2,x+2,x+3,x+0),r.offset+=4,(n.vertexNormal||n.vertexTangent||n.vertexBitangent)&&(D.e(c,t,e),D.e(l,i,e),n.vertexNormal&&(D.c(s,c,l),D.d(s,s),m.push.apply(m,Object(P.a)(s).concat(Object(P.a)(s),Object(P.a)(s),Object(P.a)(s)))),n.vertexTangent&&(D.d(c,c),f.push.apply(f,Object(P.a)(c).concat(Object(P.a)(c),Object(P.a)(c),Object(P.a)(c)))),n.vertexBitangent&&(D.d(l,l),g.push.apply(g,Object(P.a)(l).concat(Object(P.a)(l),Object(P.a)(l),Object(P.a)(l))))),n.textureCoord&&p.push(0,0,1,0,1,1,0,1),n.vertexColor&&v.push.apply(v,Object(P.a)(o.color).concat(Object(P.a)(o.color),Object(P.a)(o.color),Object(P.a)(o.color)))},m=function(e,t,a){switch(t.length){case 3:!function(e,t,a,i){var o,r=o=i.bufferIndex?h[i.bufferIndex]:h[0],u=r.positions,d=r.normals,m=r.tangents,f=r.bitangents,g=r.colors,p=r.indices,v=r.offset;u.push.apply(u,Object(P.a)(e).concat(Object(P.a)(t),Object(P.a)(a))),p.push(v+0,v+1,v+2),o.offset+=3,(n.vertexNormal||n.vertexTangent||n.vertexBitangent)&&(D.e(c,t,e),D.e(l,a,e),n.vertexNormal&&(D.c(s,c,l),D.d(s,s),d.push.apply(d,Object(P.a)(s).concat(Object(P.a)(s),Object(P.a)(s)))),n.vertexTangent&&(D.d(c,c),m.push.apply(m,Object(P.a)(c).concat(Object(P.a)(c),Object(P.a)(c)))),n.vertexBitangent&&(D.d(l,l),f.push.apply(f,Object(P.a)(l).concat(Object(P.a)(l),Object(P.a)(l))))),n.vertexColor&&g.push.apply(g,Object(P.a)(i.color).concat(Object(P.a)(i.color),Object(P.a)(i.color)))}(e[t[0]],e[t[1]],e[t[2]],a);break;case 4:d(e[t[0]],e[t[1]],e[t[2]],e[t[3]],a);break;case 5:!function(e,t,a,i,o,r){var u,d=u=r.bufferIndex?h[r.bufferIndex]:h[0],m=d.positions,f=d.normals,g=d.tangents,p=d.bitangents,v=d.colors,b=d.indices,x=d.offset;m.push.apply(m,Object(P.a)(e).concat(Object(P.a)(t),Object(P.a)(a),Object(P.a)(i),Object(P.a)(o))),b.push(x+0,x+3,x+4,x+0,x+1,x+3,x+1,x+2,x+3),u.offset+=5,(n.vertexNormal||n.vertexTangent||n.vertexBitangent)&&(D.e(c,t,e),D.e(l,o,e),n.vertexNormal&&(D.c(s,c,l),D.d(s,s),f.push.apply(f,Object(P.a)(s).concat(Object(P.a)(s),Object(P.a)(s),Object(P.a)(s),Object(P.a)(s)))),n.vertexTangent&&(D.d(c,c),g.push.apply(g,Object(P.a)(c).concat(Object(P.a)(c),Object(P.a)(c),Object(P.a)(c),Object(P.a)(c)))),n.vertexBitangent&&(D.d(l,l),p.push.apply(p,Object(P.a)(l).concat(Object(P.a)(l),Object(P.a)(l),Object(P.a)(l),Object(P.a)(l))))),n.vertexColor&&v.push.apply(v,Object(P.a)(r.color).concat(Object(P.a)(r.color),Object(P.a)(r.color),Object(P.a)(r.color),Object(P.a)(r.color)))}(e[t[0]],e[t[1]],e[t[2]],e[t[3]],e[t[4]],a);break;default:alert("faces with "+t.length+" vertices are not supported")}};a({addSquare:d,addFaces:function(e,t,a){for(var i=0;i<t.length;i++){var n={};a&&a.colors&&(n.color=a.colors[i%a.colors.length]),m(e,t[i],n)}}});for(var f=[],g=0;g<i;g++){var p=h[g],v=p.positions,b=p.normals,x=p.tangents,O=p.bitangents,y=p.textureCoordinates,M=p.colors,L=p.indices,w=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,w),e.bufferData(e.ARRAY_BUFFER,new Float32Array(v),e.STATIC_DRAW);var _=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,_),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(L),e.STATIC_DRAW);var k={position:w,indices:_,vertexCount:L.length};if(n.vertexNormal){var A=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,A),e.bufferData(e.ARRAY_BUFFER,new Float32Array(b),e.STATIC_DRAW),k.normal=A}if(n.vertexTangent){var E=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,E),e.bufferData(e.ARRAY_BUFFER,new Float32Array(x),e.STATIC_DRAW),k.tangent=E}if(n.vertexBitangent){var S=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,S),e.bufferData(e.ARRAY_BUFFER,new Float32Array(O),e.STATIC_DRAW),k.bitangent=S}if(n.textureCoord){var T=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,T),e.bufferData(e.ARRAY_BUFFER,new Float32Array(y),e.STATIC_DRAW),k.textureCoord=T}if(n.vertexColor){var j=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,j),e.bufferData(e.ARRAY_BUFFER,new Float32Array(M),e.STATIC_DRAW),k.color=j}f.push(k)}return f}},{key:"_deleteBuffers",value:function(){for(var e=this.model.buffers,t=0;t<e.length;t++){var a=e[t];for(var i in a.vertexCount=0,a)a.hasOwnProperty(i)&&"object"===typeof a[i]&&this.gl.deleteBuffer(a[i])}}},{key:"_drawModel",value:function(e){if(this.model)for(var t=this.gl,a=this.model,i=e.projectionMatrix,n=e.viewMatrix,o=e.modelMatrix,r=a.shaders,s=a.buffers,c=a.textures,l=r[e.shaderIndex?e.shaderIndex:0],h=0;h<s.length;h++){var u=s[h],d=c[h],m=e.material?e.material:e.materials?e.materials[h]:void 0,f=t.FLOAT;if(t.bindBuffer(t.ARRAY_BUFFER,u.position),t.vertexAttribPointer(l.attribLocations.vertexPosition,3,f,!1,0,0),t.enableVertexAttribArray(l.attribLocations.vertexPosition),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,u.indices),l.attribLocations.vertexNormal&&u.normal){var g=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,u.normal),t.vertexAttribPointer(l.attribLocations.vertexNormal,3,g,!1,0,0),t.enableVertexAttribArray(l.attribLocations.vertexNormal)}if(l.attribLocations.vertexTangent&&u.tangent){var p=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,u.tangent),t.vertexAttribPointer(l.attribLocations.vertexTangent,3,p,!1,0,0),t.enableVertexAttribArray(l.attribLocations.vertexTangent)}if(l.attribLocations.vertexBitangent&&u.bitangent){var v=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,u.bitangent),t.vertexAttribPointer(l.attribLocations.vertexBitangent,3,v,!1,0,0),t.enableVertexAttribArray(l.attribLocations.vertexBitangent)}if(l.attribLocations.textureCoord&&u.textureCoord){var b=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,u.textureCoord),t.vertexAttribPointer(l.attribLocations.textureCoord,2,b,!1,0,0),t.enableVertexAttribArray(l.attribLocations.textureCoord)}if(l.attribLocations.vertexColor&&u.color){var x=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,u.color),t.vertexAttribPointer(l.attribLocations.vertexColor,3,x,!1,0,0),t.enableVertexAttribArray(l.attribLocations.vertexColor)}if(t.useProgram(l.program),t.uniformMatrix4fv(l.uniformLocations.projectionMatrix,!1,i),t.uniformMatrix4fv(l.uniformLocations.modelMatrix,!1,o),t.uniformMatrix4fv(l.uniformLocations.viewMatrix,!1,n),l.uniformLocations.normalMatrix){var O=M.a();M.c(O,o),M.h(O,O),t.uniformMatrix4fv(l.uniformLocations.normalMatrix,!1,O)}if(l.uniformLocations.showDiffuseMap&&void 0!==e.showDiffuseMap&&t.uniform1i(l.uniformLocations.showDiffuseMap,e.showDiffuseMap),l.uniformLocations.showNormalMap&&void 0!==e.showNormalMap&&t.uniform1i(l.uniformLocations.showNormalMap,e.showNormalMap),l.uniformLocations.showAmbientOcclusionMap&&void 0!==e.showAmbientOcclusionMap&&t.uniform1i(l.uniformLocations.showAmbientOcclusionMap,e.showAmbientOcclusionMap),l.uniformLocations.showParallaxMap&&void 0!==e.showParallaxMap&&t.uniform1i(l.uniformLocations.showParallaxMap,e.showParallaxMap),l.uniformLocations.lightingModel&&void 0!==e.lightingModel&&t.uniform1i(l.uniformLocations.lightingModel,e.lightingModel),l.uniformLocations.parallaxHeightScale&&void 0!==e.parallaxHeightScale&&t.uniform1f(l.uniformLocations.parallaxHeightScale,e.parallaxHeightScale),l.uniformLocations.parallaxSteps&&void 0!==e.parallaxSteps&&t.uniform1i(l.uniformLocations.parallaxSteps,e.parallaxSteps),l.uniformLocations.parallaxOcclusionMapping&&void 0!==e.parallaxOcclusionMapping&&t.uniform1i(l.uniformLocations.parallaxOcclusionMapping,e.parallaxOcclusionMapping),l.uniformLocations.ambientLight&&e.ambientLight&&t.uniform3fv(l.uniformLocations.ambientLight,e.ambientLight),l.uniformLocations.directionalLight&&e.directionalLight){var y=D.a(e.directionalLight.direction);D.d(y,y),t.uniform3fv(l.uniformLocations.directionalLight.color,e.directionalLight.color),t.uniform3fv(l.uniformLocations.directionalLight.direction,y)}if(l.uniformLocations.pointLight&&e.pointLight&&(t.uniform3fv(l.uniformLocations.pointLight.color,e.pointLight.color),t.uniform3fv(l.uniformLocations.pointLight.position,e.pointLight.position),t.uniform1f(l.uniformLocations.pointLight.brightness,e.pointLight.brightness)),l.uniformLocations.lights&&e.lights)for(var L=e.lights,w=0;w<L.length;w++){var _=L[w];t.uniform3fv(l.uniformLocations.lights[w].position,_.position),t.uniform3fv(l.uniformLocations.lights[w].ambient,_.ambient),t.uniform3fv(l.uniformLocations.lights[w].diffuse,_.diffuse),t.uniform3fv(l.uniformLocations.lights[w].specular,_.specular)}l.uniformLocations.material&&m&&(t.uniform3fv(l.uniformLocations.material.ambient,m.ambient),t.uniform3fv(l.uniformLocations.material.diffuse,m.diffuse),t.uniform3fv(l.uniformLocations.material.specular,m.specular),t.uniform1f(l.uniformLocations.material.shininess,m.shininess)),l.uniformLocations.cameraPos&&e.cameraPos&&t.uniform3fv(l.uniformLocations.cameraPos,e.cameraPos),l.uniformLocations.samplerDiffuse&&d.diffuse&&(t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,d.diffuse),t.uniform1i(l.uniformLocations.samplerDiffuse,0)),l.uniformLocations.samplerNormal&&d.normal&&(t.activeTexture(t.TEXTURE1),t.bindTexture(t.TEXTURE_2D,d.normal),t.uniform1i(l.uniformLocations.samplerNormal,1)),l.uniformLocations.samplerHeight&&d.height&&(t.activeTexture(t.TEXTURE2),t.bindTexture(t.TEXTURE_2D,d.height),t.uniform1i(l.uniformLocations.samplerHeight,2)),l.uniformLocations.samplerOcclusion&&d.occlusion&&(t.activeTexture(t.TEXTURE3),t.bindTexture(t.TEXTURE_2D,d.occlusion),t.uniform1i(l.uniformLocations.samplerOcclusion,3));var k=u.vertexCount,A=t.UNSIGNED_SHORT;t.drawElements(t.TRIANGLES,k,A,0);for(var E=t.getProgramParameter(l.program,t.ACTIVE_ATTRIBUTES),S=0;S<E;S++)t.disableVertexAttribArray(S)}}}]),e}(),I=function(e){function t(e,a,i){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(h.a)(t).call(this,e))).gl=e,n.draw=n.draw.bind(Object(u.a)(n)),n._initModel({gl:e,geometry:function(e){var t=e.addFaces,n=T(a);t(n.vertices,n.faces,{colors:i})},shader:{vertex:"shaders/color_L/vertex.glsl",fragment:"shaders/color_L/fragment.glsl"}}),n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a,i){var n=i.ambientLight,o=i.directionalLight,r=i.pointLight,s=i.cameraPos,c=i.lightingModel;this._drawModel({projectionMatrix:e,viewMatrix:t,modelMatrix:a,ambientLight:n,directionalLight:o,pointLight:r,cameraPos:s,lightingModel:c})}}]),t}(F),B=function(){function e(t){Object(s.a)(this,e),this.gl=t,this.setOption=this.setOption.bind(this),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this),this.renderOptions={ambientLight:[.2,.2,.2],directionalLight:{color:[1,1,1],direction:[-1,1,0]},pointLight:{color:[1,1,1],position:[1,-1,0],brightness:25},cameraPos:[0,0,0],lightingModel:0},this.options=[{description:"Colored cube and dodecahedron with no lighting",type:"description"},{name:"Lighting Model",id:"lightingModel",type:"select",options:["Unlit","Vertex Lighting","Fragment Lighting"],value:this.renderOptions.lightingModel}]}return Object(c.a)(e,[{key:"setOption",value:function(e,t){e.value=Number(t),this.renderOptions[e.id]=e.value}},{key:"initScene",value:function(){var e=this.gl,t=new I(e,"cube",[[0,0,1],[0,1,0],[1,0,1],[1,1,0],[1,1,1],[1,0,0]]),a=new I(e,"dodecahedron",[[1,0,0],[0,0,1],[0,1,0],[1,1,0],[0,1,1],[1,0,1],[1,.5,0],[0,1,.5],[1,0,.5],[.5,1,0],[0,.5,1],[.5,0,1]]);this.scene={actors:[{model:t,location:[-1.6,0,-6],scale:[2.8,2.8,2.8],rotations:[{angle:0,axis:[1,0,0],speed:1},{angle:0,axis:[0,1,0],speed:.7}]},{model:a,location:[1.6,0,-6],scale:[2.8,2.8,2.8],rotations:[{angle:0,axis:[1,0,0],speed:1},{angle:0,axis:[0,1,0],speed:.7}]}],camera:[0,0,0]}}},{key:"drawScene",value:function(e){var t=this.gl,a=this.scene;E(t);var i=45*Math.PI/180,n=t.canvas.clientWidth/t.canvas.clientHeight,o=M.a();M.d(o,i,n,.1,100);var r=M.a();M.g(r,r,a.camera),M.c(r,r);for(var s=0;s<a.actors.length;s++){var c=a.actors[s];this._renderActor(o,r,c),this._animateActor(e,c)}}},{key:"_renderActor",value:function(e,t,a){var i=a.model,n=M.a();M.g(n,n,a.location),a.scale&&M.f(n,n,a.scale);for(var o=0;o<a.rotations.length;o++){var r=a.rotations[o];M.e(n,n,r.angle,r.axis)}i.draw(e,t,n,this.renderOptions)}},{key:"_animateActor",value:function(e,t){for(var a=0;a<t.rotations.length;a++){var i=t.rotations[a];i.angle+=e*i.speed}}}]),e}(),N=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).gl=e,a.draw=a.draw.bind(Object(u.a)(a)),a._initModel({gl:e,geometry:a._geometry,texture:{diffuse:"images/cubetexture.png"},shader:{vertex:"shaders/texture_LD/vertex.glsl",fragment:"shaders/texture_LD/fragment.glsl"}}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a,i){var n=i.ambientLight,o=i.directionalLight,r=i.pointLight,s=i.cameraPos,c=i.lightingModel;this._drawModel({projectionMatrix:e,viewMatrix:t,modelMatrix:a,ambientLight:n,directionalLight:o,pointLight:r,cameraPos:s,lightingModel:c})}},{key:"_geometry",value:function(e){var t=e.addSquare,a=[-1,-1,1],i=[1,-1,1],n=[1,1,1],o=[-1,1,1],r=[-1,-1,-1],s=[1,-1,-1],c=[1,1,-1],l=[-1,1,-1];t(a,i,n,o),t(s,r,l,c),t(r,a,o,l),t(i,s,c,n),t(r,s,i,a),t(c,l,o,n)}}]),t}(F),U=function(){function e(t){Object(s.a)(this,e),this.gl=t,this.setOption=this.setOption.bind(this),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this),this.renderOptions={ambientLight:[.2,.2,.2],directionalLight:{color:[1,1,1],direction:[-1,1,0]},pointLight:{color:[1,1,1],position:[1,-1,0],brightness:25},cameraPos:[0,0,0],lightingModel:0},this.options=[{description:"Textured cube with diffuse map only and no lighting",type:"description"},{name:"Lighting Model",id:"lightingModel",type:"select",options:["Unlit","Vertex Lighting","Fragment Lighting"],value:this.renderOptions.lightingModel}],this.credits=["Texture from MDN WebGL Tutorial","link:https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial"]}return Object(c.a)(e,[{key:"setOption",value:function(e,t){e.value=Number(t),this.renderOptions[e.id]=e.value}},{key:"initScene",value:function(){var e=this.gl,t=new N(e);this.scene={actors:[{model:t,location:[0,0,-6],rotations:[{angle:0,axis:[1,0,0],speed:1},{angle:0,axis:[0,1,0],speed:.7}]}],camera:[0,0,0]}}},{key:"drawScene",value:function(e){var t=this.gl,a=this.scene;E(t);var i=45*Math.PI/180,n=t.canvas.clientWidth/t.canvas.clientHeight,o=M.a();M.d(o,i,n,.1,100);var r=M.a();M.g(r,r,a.camera),M.c(r,r);for(var s=0;s<a.actors.length;s++){var c=a.actors[s];this._renderActor(o,r,c),this._animateActor(e,c)}}},{key:"_renderActor",value:function(e,t,a){var i=a.model,n=M.a();M.g(n,n,a.location);for(var o=0;o<a.rotations.length;o++){var r=a.rotations[o];M.e(n,n,r.angle,r.axis)}i.draw(e,t,n,this.renderOptions)}},{key:"_animateActor",value:function(e,t){for(var a=0;a<t.rotations.length;a++){var i=t.rotations[a];i.angle+=e*i.speed}}}]),e}(),z=[{x:-1,y:0},{x:0,y:-1},{x:1,y:0},{x:0,y:1}];function V(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,i=function(e){s[e.y][e.x]=0},n=function(e,t){if(!o(r(e,t,3)))return!1;var a=r(e,t,2);return 1===s[a.y][a.x]},o=function(a){return!(a.x<0||a.y<0||a.x>=e||a.y>=t)},r=function(e,t,a){return{x:e.x+t.x*a,y:e.y+t.y*a}},s=[],c=0;c<t;c++)s.push(new Array(e).fill(1));var l,h={x:1,y:1},u=[];for(i(h),u.push(h);u.length>0;){for(var d=u[u.length-1],m=[],f=0;f<z.length;f++){var g=z[f];n(d,g)&&m.push(g)}if(m.length>0){var p=void 0;p=m.includes(l)&&Math.random()>a?l:m[Math.floor(Math.random()*m.length)],i(r(d,p,1)),i(r(d,p,2)),u.push(r(d,p,2)),l=p}else u.pop(),l=null}return{width:e,height:t,data:s}}function W(e){for(var t=e.width,a=e.height,i=e.data,n=[],o=-t/2,r=-a/2,s=0;s<a;s++)for(var c=0;c<t;c++)1===i[s][c]&&n.push({x1:c+o,y1:s+r,x2:c+o+1,y2:s+r+1});return n}function H(e,t,a,i){return[t+-e.width/2+.5,i,a+-e.height/2+.5]}var Y=function(e){function t(e,a){var i;return Object(s.a)(this,t),(i=Object(l.a)(this,Object(h.a)(t).call(this,e))).gl=e,i.draw=i.draw.bind(Object(u.a)(i)),i.update=i.update.bind(Object(u.a)(i)),i._geometry=i._geometry.bind(Object(u.a)(i)),i.maze=a,i._initModel({gl:e,geometry:i._geometry,bufferCount:3,shaders:[{vertex:"shaders/color_L/vertex.glsl",fragment:"shaders/color_L/fragment.glsl"},{vertex:"shaders/material_L/vertex.glsl",fragment:"shaders/material_L/fragment.glsl"}]}),i}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a,i){var n=i.shaderIndex,o=i.lights,r=i.material,s=i.materials,c=i.ambientLight,l=i.directionalLight,h=i.pointLight,u=i.lightingModel;this._drawModel({projectionMatrix:e,viewMatrix:t,modelMatrix:a,shaderIndex:n,lights:o,material:r,materials:s,ambientLight:c,directionalLight:l,pointLight:h,lightingModel:u})}},{key:"update",value:function(e){this.maze=e,this._updateModel(this._geometry)}},{key:"_geometry",value:function(e){for(var t=e.addSquare,a=this.maze,i=[.2,.2,.2],n=[.7,.7,.7],o=[.5,0,.5],r=[0,.5,0],s=[.5,0,0],c=[0,0,.5],l=-a.width/2,h=-a.height/2,u=0;u<a.height;u++)for(var d=0;d<a.width;d++){var m=d+l,f=m+1,g=u+h,p=g+1,v=[m,1,p],b=[f,1,p],x=[f,0,p],O=[m,0,p],y=[m,1,g],M=[f,1,g],L=[f,0,g],w=[m,0,g];0===a.data[u][d]?t(L,w,O,x,{color:i,bufferIndex:1}):(t(M,y,v,b,{color:n,bufferIndex:2}),0!==u&&0!==a.data[u-1][d]||t(y,M,L,w,{color:o}),0!==d&&0!==a.data[u][d-1]||t(v,y,w,O,{color:s}),u!==a.height-1&&0!==a.data[u+1][d]||t(b,v,O,x,{color:r}),d!==a.width-1&&0!==a.data[u][d+1]||t(M,b,x,L,{color:c}))}}}]),t}(F),X=function(){function e(t){Object(s.a)(this,e),this.gl=t,this.setOption=this.setOption.bind(this),this.initScene=this.initScene.bind(this),this.updateScene=this.updateScene.bind(this),this.drawScene=this.drawScene.bind(this),this.totalDelta=0,this.renderOptions={lights:[{position:[10,-10,0],ambient:[.2,.2,.2],diffuse:[.5,.5,.5],specular:[.9,.9,.9]},{position:[-10,10,0],ambient:[.2,.2,.2],diffuse:[.5,.5,.5],specular:[.9,.9,.9]}],ambientLight:[.2,.2,.2],directionalLight:{color:[1,1,1],direction:[-1,-1,0]},pointLight:{color:[1,1,1]},useMaterials:!1,materials:new Array(3).fill(void 0),lightingModel:0},this.options=[{description:"Random maze geometry with colors or materials using Phong shading",type:"description"},{name:"Use Materials",id:"useMaterials",type:"bool",value:!1},{name:"Wall Material",type:"select",options:C()},{name:"Floor Material",type:"select",options:C()},{name:"Ceiling Material",type:"select",options:C()},{name:"Lighting Model",id:"lightingModel",type:"select",options:["Unlit","Vertex Lighting","Fragment Lighting"],value:this.renderOptions.lightingModel},{name:"Update Maze",type:"function",function:this.updateScene}],this.setOption(this.options[2],0),this.setOption(this.options[3],9),this.setOption(this.options[4],10),this.credits=["Maze generation is based on this article","link:https://journal.stuffwithstuff.com/2014/12/21/rooms-and-mazes/"]}return Object(c.a)(e,[{key:"setOption",value:function(e,t){if(e.value=Number(t),e.id&&(this.renderOptions[e.id]=e.value),"Wall Material"===e.name){var a=e.options[e.value];this.renderOptions.materials[0]=R(a)}if("Floor Material"===e.name){var i=e.options[e.value];this.renderOptions.materials[1]=R(i)}if("Ceiling Material"===e.name){var n=e.options[e.value];this.renderOptions.materials[2]=R(n)}}},{key:"initScene",value:function(){var e=this.gl,t=this._generateMaze(),a=t.size,i=t.maze,n=new Y(e,i);this.scene={actors:[{model:n,location:[0,0,-2*a],rotation:{angle:0,axis:[0,1,0],speed:.5}}],camera:[0,0,0]},this.renderOptions.pointLight.position=[0,a,-2*a],this.renderOptions.pointLight.brightness=a*a}},{key:"updateScene",value:function(){var e=this._generateMaze(),t=e.size,a=e.maze;this.scene.actors[0].location=[0,0,-2*t],this.scene.actors[0].model.update(a),this.renderOptions.pointLight.position=[0,10,-2*t]}},{key:"_generateMaze",value:function(){var e=2*Math.floor(35*Math.random())+11;return{size:e,maze:V(e,e)}}},{key:"drawScene",value:function(e){var t=this.gl,a=this.scene;E(t);var i=45*Math.PI/180,n=t.canvas.clientWidth/t.canvas.clientHeight,o=M.a();M.d(o,i,n,.1,500);var r=M.a();M.g(r,r,a.camera),M.c(r,r);for(var s=0;s<a.actors.length;s++){var c=a.actors[s];this._renderActor(o,r,c),this._animateActor(e,c)}}},{key:"_renderActor",value:function(e,t,a){var i=a.model,n=M.a();M.g(n,n,a.location),M.e(n,n,L(45),[1,0,0]),M.e(n,n,a.rotation.angle,a.rotation.axis),this.renderOptions.useMaterials?this.renderOptions.shaderIndex=1:this.renderOptions.shaderIndex=0,i.draw(e,t,n,this.renderOptions)}},{key:"_animateActor",value:function(e,t){t.rotation.angle+=e*t.rotation.speed}}]),e}(),q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).gl=e,a.draw=a.draw.bind(Object(u.a)(a)),a._initModel({gl:e,geometry:a._geometry,texture:{diffuse:"images/Brick_Wall_017_basecolor.jpg",normal:"images/Brick_Wall_017_normal.jpg",height:"images/Brick_Wall_017_height.png",occlusion:"images/Brick_Wall_017_ambientOcclusion.jpg"},shader:{vertex:"shaders/texture_LDNOP/vertex.glsl",fragment:"shaders/texture_LDNOP/fragment.glsl"}}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a,i){var n=i.showDiffuseMap,o=i.showNormalMap,r=i.showAmbientOcclusionMap,s=i.showParallaxMap,c=i.parallaxHeightScale,l=i.parallaxSteps,h=i.parallaxOcclusionMapping;this._drawModel({projectionMatrix:e,viewMatrix:t,modelMatrix:a,showDiffuseMap:n,showNormalMap:o,showAmbientOcclusionMap:r,showParallaxMap:s,parallaxHeightScale:c,parallaxSteps:l,parallaxOcclusionMapping:h,ambientLight:[.3,.3,.3],directionalLight:{color:[.4,.4,.4],direction:[0,-1,1]},pointLight:{color:[1,1,1],position:[0,0,0],brightness:15},cameraPos:[0,0,0]})}},{key:"_geometry",value:function(e){var t=e.addSquare,a=[-1,-1,1],i=[1,-1,1],n=[1,1,1],o=[-1,1,1],r=[-1,-1,-1],s=[1,-1,-1],c=[1,1,-1],l=[-1,1,-1];t(a,i,n,o),t(s,r,l,c),t(r,a,o,l),t(i,s,c,n),t(r,s,i,a),t(c,l,o,n)}}]),t}(F),K=function(){function e(t){Object(s.a)(this,e),this.gl=t,this.setOption=this.setOption.bind(this),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this),this.renderOptions={showDiffuseMap:!0,showNormalMap:!0,showAmbientOcclusionMap:!0,showParallaxMap:!0,parallaxHeightScale:.04,parallaxSteps:32,parallaxOcclusionMapping:!0},this.options=[{description:"Brick cube with diffuse, normal, ambient occlusion, and parallax maps",type:"description"},{name:"Show Diffuse Map",id:"showDiffuseMap",type:"bool"},{name:"Show Normal Map",id:"showNormalMap",type:"bool"},{name:"Show Ambient Occlusion Map",id:"showAmbientOcclusionMap",type:"bool"},{name:"Show Parallax Map",id:"showParallaxMap",type:"bool"},{name:"Parallax Height Scale",id:"parallaxHeightScale",type:"float",min:0,max:.1},{name:"Parallax Steps",id:"parallaxSteps",type:"int",min:0,max:32},{name:"Use Parallax Occlusion Mapping",id:"parallaxOcclusionMapping",type:"bool"}];for(var a=0;a<this.options.length;a++)this.options[a].value=this.renderOptions[this.options[a].id];this.credits=["Textures created by Jo\xe3o Paulo","link:https://3dtextures.me/about/"]}return Object(c.a)(e,[{key:"setOption",value:function(e,t){e.value=Number(t),this.renderOptions[e.id]=e.value}},{key:"initScene",value:function(){var e=this.gl,t=new q(e);this.scene={actors:[{model:t,location:[0,0,-5.5],rotations:[{angle:0,axis:[0,1,0],speed:.4},{angle:0,axis:[1,0,0],speed:.2}]}],camera:[0,0,0]}}},{key:"drawScene",value:function(e){var t=this.gl,a=this.scene;E(t);var i=45*Math.PI/180,n=t.canvas.clientWidth/t.canvas.clientHeight,o=M.a();M.d(o,i,n,.1,100);var r=M.a();M.g(r,r,a.camera),M.c(r,r);for(var s=0;s<a.actors.length;s++){var c=a.actors[s];this._renderActor(o,r,c),this._animateActor(e,c)}}},{key:"_renderActor",value:function(e,t,a){var i=a.model,n=M.a();M.g(n,n,a.location);for(var o=0;o<a.rotations.length;o++){var r=a.rotations[o];M.e(n,n,r.angle,r.axis)}i.draw(e,t,n,this.renderOptions)}},{key:"_animateActor",value:function(e,t){for(var a=0;a<t.rotations.length;a++){var i=t.rotations[a];i.angle+=e*i.speed}}}]),e}(),G=function(e){function t(e,a){var i;return Object(s.a)(this,t),(i=Object(l.a)(this,Object(h.a)(t).call(this,e))).gl=e,i.draw=i.draw.bind(Object(u.a)(i)),i._initModel({gl:e,geometry:function(e){var t=e.addFaces,i=T(a);t(i.vertices,i.faces)},shader:{vertex:"shaders/material_L/vertex.glsl",fragment:"shaders/material_L/fragment.glsl"}}),i}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a,i){var n=i.cameraPos,o=i.lights,r=i.material,s=i.lightingModel;this._drawModel({projectionMatrix:e,viewMatrix:t,modelMatrix:a,cameraPos:n,lights:o,material:r,lightingModel:s})}}]),t}(F),J=function(){function e(t){Object(s.a)(this,e),this.gl=t,this.setOption=this.setOption.bind(this),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this),this.renderOptions={lights:[{position:[10,-10,0],ambient:[.2,.2,.2],diffuse:[.5,.5,.5],specular:[.9,.9,.9]},{position:[-10,10,0],ambient:[.2,.2,.2],diffuse:[.5,.5,.5],specular:[.9,.9,.9]}],materials:new Array(3).fill(0),lightingModel:2};var a=C();this.options=[{description:"Various solid geometries with various materials using Phong shading",type:"description"},{name:"Material 1",type:"select",options:a},{name:"Material 2",type:"select",options:a},{name:"Material 3",type:"select",options:a}],this.setOption(this.options[1],8),this.setOption(this.options[2],10),this.setOption(this.options[3],2)}return Object(c.a)(e,[{key:"setOption",value:function(e,t){if(e.value=Number(t),e.id&&(this.renderOptions[e.id]=e.value),"Material 1"===e.name){var a=e.options[e.value];this.renderOptions.materials[0]=R(a)}else if("Material 2"===e.name){var i=e.options[e.value];this.renderOptions.materials[1]=R(i)}else if("Material 3"===e.name){var n=e.options[e.value];this.renderOptions.materials[2]=R(n)}}},{key:"initScene",value:function(){var e=this.gl,t=new G(e,"tetrahedron"),a=new G(e,"cube"),i=new G(e,"octahedron"),n=new G(e,"pentagonaltrapezohedron"),o=new G(e,"dodecahedron"),r=new G(e,"icosahedron");this.scene={actors:[{model:t,materialIndex:1,location:[-3.75,0,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:a,materialIndex:1,location:[-2.25,0,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:i,materialIndex:1,location:[-.75,0,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:n,materialIndex:1,location:[.75,0,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:o,materialIndex:1,location:[2.25,0,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:r,materialIndex:1,location:[3.75,0,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:t,materialIndex:0,location:[-3.75,2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:a,materialIndex:0,location:[-2.25,2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:i,materialIndex:0,location:[-.75,2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:n,materialIndex:0,location:[.75,2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:o,materialIndex:0,location:[2.25,2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:r,materialIndex:0,location:[3.75,2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:t,materialIndex:2,location:[-3.75,-2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:a,materialIndex:2,location:[-2.25,-2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:i,materialIndex:2,location:[-.75,-2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:n,materialIndex:2,location:[.75,-2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:o,materialIndex:2,location:[2.25,-2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]},{model:r,materialIndex:2,location:[3.75,-2,-8],rotations:[{angle:0,axis:[0,1,0],speed:.8},{angle:0,axis:[1,0,0],speed:.4}]}],camera:[0,0,0]}}},{key:"drawScene",value:function(e){var t=this.gl,a=this.scene;E(t);var i=45*Math.PI/180,n=t.canvas.clientWidth/t.canvas.clientHeight,o=M.a();M.d(o,i,n,.1,100);var r=M.a();M.g(r,r,a.camera),M.c(r,r),this.renderOptions.cameraPos=a.camera;for(var s=0;s<a.actors.length;s++){var c=a.actors[s];this._renderActor(o,r,c),this._animateActor(e,c)}}},{key:"_renderActor",value:function(e,t,a){var i=a.model,n=M.a();M.g(n,n,a.location);for(var o=0;o<a.rotations.length;o++){var r=a.rotations[o];M.e(n,n,r.angle,r.axis)}this.renderOptions.material=this.renderOptions.materials[a.materialIndex],i.draw(e,t,n,this.renderOptions)}},{key:"_animateActor",value:function(e,t){for(var a=0;a<t.rotations.length;a++){var i=t.rotations[a];i.angle+=e*i.speed}}}]),e}();function Q(e,t,a,i,n,o){return(e-i)*(e-i)+(t-n)*(t-n)<(a+o)*(a+o)}function $(e,t,a,i,n,o,r){var s=a/3,c=0,l=e,h=t;e<i-s?(c|=1,l=i):e>o+s&&(c|=1,l=o),t<n-s?(c|=2,h=n):t>r+s&&(c|=2,h=r);var u=e-l,d=t-h;return u*u+d*d<=a*a?c:0}var Z=function(e){function t(e,a){var i;return Object(s.a)(this,t),(i=Object(l.a)(this,Object(h.a)(t).call(this,e))).gl=e,i.map=a,i.draw=i.draw.bind(Object(u.a)(i)),i.update=i.update.bind(Object(u.a)(i)),i._geometry=i._geometry.bind(Object(u.a)(i)),i._initModel({gl:e,geometry:i._geometry,textures:[{diffuse:"images/Brick_Wall_017_basecolor.jpg",normal:"images/Brick_Wall_017_normal.jpg",height:"images/Brick_Wall_017_height.png",occlusion:"images/Brick_Wall_017_ambientOcclusion.jpg"},{diffuse:"images/Tiles_035_basecolor.jpg",normal:"images/Tiles_035_normal.jpg",height:"images/Tiles_035_height.png",occlusion:"images/Tiles_035_ambientOcclusion.jpg"},{diffuse:"images/Wood_planks_011_basecolor.jpg",normal:"images/Wood_planks_011_normal.jpg",height:"images/Wood_planks_011_height.png",occlusion:"images/Wood_planks_011_ambientOcclusion.jpg"}],shader:{vertex:"shaders/texture_LDNOP/vertex.glsl",fragment:"shaders/texture_LDNOP/fragment.glsl"}}),i}return Object(d.a)(t,e),Object(c.a)(t,[{key:"draw",value:function(e,t,a,i){var n=i.showDiffuseMap,o=i.showNormalMap,r=i.showAmbientOcclusionMap,s=i.showParallaxMap,c=i.parallaxHeightScale,l=i.parallaxSteps,h=i.parallaxOcclusionMapping,u=i.ambientLight,d=i.directionalLight,m=i.pointLight,f=i.cameraPos;this._drawModel({projectionMatrix:e,viewMatrix:t,modelMatrix:a,showDiffuseMap:n,showNormalMap:o,showAmbientOcclusionMap:r,showParallaxMap:s,parallaxHeightScale:c,parallaxSteps:l,parallaxOcclusionMapping:h,ambientLight:u,directionalLight:d,pointLight:m,cameraPos:f})}},{key:"update",value:function(e){this.map=e,this._updateModel(this._geometry)}},{key:"_geometry",value:function(e){for(var t=e.addSquare,a=this.map,i=a.width,n=a.height,o=a.data,r=-i/2,s=-n/2,c=0;c<n;c++)for(var l=0;l<i;l++){var h=l+r,u=h+1,d=c+s,m=d+1,f=[h,1,m],g=[u,1,m],p=[u,0,m],v=[h,0,m],b=[h,1,d],x=[u,1,d],O=[u,0,d],y=[h,0,d];0===o[c][l]&&(t(O,y,v,p,{bufferIndex:1}),t(b,x,g,f,{bufferIndex:2}),0!==c&&0===o[c-1][l]||t(x,b,y,O),0!==l&&0===o[c][l-1]||t(b,f,v,y),c!==n-1&&0===o[c+1][l]||t(f,g,p,v),l!==i-1&&0===o[c][l+1]||t(g,x,O,p))}}}]),t}(F),ee=["tetrahedron","cube","octahedron","dodecahedron","icosahedron"],te=["gold","chrome","copper"],ae=function(){function e(t){Object(s.a)(this,e),this.gl=t,this.setOption=this.setOption.bind(this),this.mouseMovement=this.mouseMovement.bind(this),this.keyboardState=this.keyboardState.bind(this),this.registerDataChange=this.registerDataChange.bind(this),this.forceDataChange=this.forceDataChange.bind(this),this.initScene=this.initScene.bind(this),this.updateScene=this.updateScene.bind(this),this.drawScene=this.drawScene.bind(this);var a=[.1,.1,.1],i={color:[.6,.6,.6],brightness:15};this.renderOptions={showDiffuseMap:!0,showNormalMap:!0,showAmbientOcclusionMap:!0,showParallaxMap:!0,parallaxHeightScale:.02,parallaxSteps:32,parallaxOcclusionMapping:!0,ambientLight:a,directionalLight:{color:[0,0,0],direction:[0,0,0]},pointLight:i,lights:[{ambient:[Math.min(2*a[0],1),Math.min(2*a[1],1),Math.min(2*a[2],1)],diffuse:i.color,specular:[Math.min(2*i.color[0],1),Math.min(2*i.color[1],1),Math.min(2*i.color[2],1)]},{ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]}],lightingModel:2},this.options=[{description:"Explorable random maze geometry with diffuse, normal, ambient occlusion, and parallax maps",type:"description"},{name:"Show Diffuse Map",id:"showDiffuseMap",type:"bool"},{name:"Show Normal Map",id:"showNormalMap",type:"bool"},{name:"Show Ambient Occlusion Map",id:"showAmbientOcclusionMap",type:"bool"},{name:"Show Parallax Map",id:"showParallaxMap",type:"bool"},{name:"Parallax Height Scale",id:"parallaxHeightScale",type:"float",min:0,max:.1},{name:"Parallax Steps",id:"parallaxSteps",type:"int",min:0,max:32},{name:"Use Parallax Occlusion Mapping",id:"parallaxOcclusionMapping",type:"bool"},{name:"Update Geometry",type:"function",function:this.updateScene}];for(var n=0;n<this.options.length;n++)this.options[n].value=this.renderOptions[this.options[n].id];this.credits=["Textures created by Jo\xe3o Paulo","link:https://3dtextures.me/about/","","Maze generation is based on this article","link:https://journal.stuffwithstuff.com/2014/12/21/rooms-and-mazes/"],this.movement={front:0,side:0}}return Object(c.a)(e,[{key:"setOption",value:function(e,t){e.value=Number(t),this.renderOptions[e.id]=e.value}},{key:"mouseMovement",value:function(e,t){var a=this.scene.camera;a.rotations[0].angle-=.001*e,a.rotations[1].angle-=.001*t}},{key:"keyboardState",value:function(e){var t=0;e.w&&(t-=1),e.s&&(t+=1);var a=0;e.a&&(a-=1),e.d&&(a+=1),this.movement.front=t,this.movement.side=a}},{key:"registerDataChange",value:function(e){this.onDataChange=e}},{key:"forceDataChange",value:function(){this._updatePowerUpInfo(this.scene.actors)}},{key:"initScene",value:function(){this._updateMap(this.gl)}},{key:"updateScene",value:function(){this._updateMap(this.gl)}},{key:"_updateMap",value:function(e){this.ready=!1,this.map=V(11,11);var t=function(e){for(var t=e.width,a=e.height,i=e.data,n=function(e,n){return e<0||e>=t||n<0||n>=a||1===i[n][e]},o=-t/2,r=-a/2,s=0;s<a;s++)for(var c=0;c<t;c++)if(1!==i[s][c]){for(var l=0,h=[],u=-1;u<2;u++)for(var d=-1;d<2;d++)n(c+d,s+u)?h.push("1"):h.push("0");var m=void 0,f=void 0;return"0"===h[0]?(m=c+1,f=s+1,l=-45):"0"===h[2]?(m=c-1,f=s+1,l=45):"0"===h[6]?(m=c+1,f=s-1,l=-225):"0"===h[8]?(m=c-1,f=s-1,l=225):"0"===h[3]?(m=c-1,f=s,l=90):"0"===h[5]?(m=c+1,f=s,l=-90):"0"===h[7]?(m=c,f=s+1,l=180):(m=c,f=s-1,l=0),{location:[c+o+.5,.5,s+r+.5],angle:L(l),square:{x:c,y:s},nextSquare:{x:m,y:f}}}return{location:[0,.5,0]}}(this.map),a=t.location,i=t.angle,n=t.square,o=t.nextSquare;if(this.scene)this.scene.actors.length>1&&(this.scene.actors.length=1),this.scene.actors[0].boundingRectagles=W(this.map),this.scene.actors[0].model.update(this.map),this.scene.camera.location=a,this.scene.camera.rotations[0].angle=i;else{var r=new Z(e,this.map);this.scene={actors:[{active:!0,boundingRectagles:W(this.map),model:r,location:[0,0,0],rotations:[]}],camera:{location:a,rotations:[{angle:i,axis:[0,1,0]},{angle:0,axis:[1,0,0]}]}}}this._placePowerUps(this.scene,this.map,n.x,n.y,o.x,o.y),this.ready=!0}},{key:"_placePowerUps",value:function(e,t,a,i,n,o){for(var r=t.width,s=t.height,c=t.data,l=0;l<s;l++)for(var h=0;h<r;h++)if(1!==c[l][h]){if(h===a&&l===i)continue;if(h===n&&l===o||Math.random()<.2){var u=H(t,h,l,.4);e.actors.push({active:!0,boundingRadius:.1,model:new G(this.gl,S(ee)),material:R(S(te)),location:u,scale:[.15,.15,.15],rotations:[{angle:0,axis:[1,0,0],speed:1+Math.random()},{angle:0,axis:[0,1,0],speed:2+Math.random()+Math.random()}]})}}this._updatePowerUpInfo(e.actors)}},{key:"_updatePowerUpInfo",value:function(e){for(var t=0,a=0,i=0;i<e.length;i++){var n=e[i];n.boundingRadius&&(a++,n.active||t++)}this.onDataChange({collected:t,total:a})}},{key:"drawScene",value:function(e){if(this.ready){var t=this.gl,a=this.scene,i=a.camera;E(t);var n=45*Math.PI/180,o=t.canvas.clientWidth/t.canvas.clientHeight,r=M.a();M.d(r,n,o,.1,100);var s=M.a();M.g(s,s,i.location);for(var c=0;c<i.rotations.length;c++){var l=i.rotations[c];M.e(s,s,l.angle,l.axis)}M.c(s,s),this.renderOptions.cameraPos=i.location,this.renderOptions.pointLight.position=i.location,this.renderOptions.lights[0].position=i.location,this.renderOptions.lights[1].position=i.location;for(var h=0;h<a.actors.length;h++){var u=a.actors[h];u.active&&(this._renderActor(r,s,u),this._animateActor(e,u))}M.b(s),M.e(s,s,i.rotations[0].angle,i.rotations[0].axis),M.c(s,s);var d=i.location[0],m=i.location[2];i.location[0]+=e*this.movement.front*s[2],i.location[1]+=e*this.movement.front*s[6],i.location[2]+=e*this.movement.front*s[10],i.location[0]+=e*this.movement.side*s[0],i.location[1]+=e*this.movement.side*s[4],i.location[2]+=e*this.movement.side*s[8],this._detectCollisions(i,d,m,a)}}},{key:"_detectCollisions",value:function(e,t,a,i){for(var n=e.location[0],o=e.location[2],r=i.actors[0].boundingRectagles,s=r.length,c=0,l=0;l<s;l++){var h=r[l];c|=$(n,o,.2,h.x1,h.y1,h.x2,h.y2)}0!==c&&(1===c?e.location[0]=t:2===c?e.location[2]=a:(e.location[0]=t,e.location[2]=a)),c=0;for(var u=0;u<i.actors.length;u++){var d=i.actors[u];d.active&&d.boundingRadius&&Q(n,o,.2,d.location[0],d.location[2],d.boundingRadius)&&(c++,d.active=!1)}c>0&&this._updatePowerUpInfo(i.actors)}},{key:"_renderActor",value:function(e,t,a){var i=a.model,n=M.a();M.g(n,n,a.location),a.scale&&M.f(n,n,a.scale);for(var o=0;o<a.rotations.length;o++){var r=a.rotations[o];M.e(n,n,r.angle,r.axis)}a.material&&(this.renderOptions.material=a.material),i.draw(e,t,n,this.renderOptions)}},{key:"_animateActor",value:function(e,t){for(var a=0;a<t.rotations.length;a++){var i=t.rotations[a];i.angle+=e*i.speed}}}]),e}(),ie=function(){function e(t,a){if(Object(s.a)(this,e),this.canvas=t,this.onDataChange=a,this.resizeViewport=this.resizeViewport.bind(this),this.getScene=this.getScene.bind(this),this.previousScene=this.previousScene.bind(this),this.nextScene=this.nextScene.bind(this),this.renderScene=this.renderScene.bind(this),this.gl=t.getContext("webgl"),null===this.gl)alert("Unable to initialize WebGL. Your browser or machine may not support it.");else{this.resizeViewport(),this.gl.enable(this.gl.CULL_FACE),this.gl.cullFace(this.gl.BACK),this.scenes=[new B(this.gl),new U(this.gl),new J(this.gl),new X(this.gl),new K(this.gl),new ae(this.gl)],this.sceneIndex=0;for(var i=0;i<this.scenes.length;i++){var n=this.scenes[i];n.registerDataChange&&n.registerDataChange(this.onDataChange),n.initScene()}}}return Object(c.a)(e,[{key:"resizeViewport",value:function(){var e=this.canvas,t=e.getBoundingClientRect();e.width=t.width,e.height=t.height,this.gl.viewport(0,0,e.width,e.height)}},{key:"getScene",value:function(){return this.scenes[this.sceneIndex]}},{key:"previousScene",value:function(){this.sceneIndex=(this.sceneIndex-1)%this.scenes.length,this.sceneIndex<0&&(this.sceneIndex=this.scenes.length-1);var e=this.scenes[this.sceneIndex];return e.forceDataChange&&e.forceDataChange(),this.scenes[this.sceneIndex]}},{key:"nextScene",value:function(){this.sceneIndex=(this.sceneIndex+1)%this.scenes.length;var e=this.scenes[this.sceneIndex];return e.forceDataChange&&e.forceDataChange(),this.scenes[this.sceneIndex]}},{key:"renderScene",value:function(e){e*=.001,this.timeStamp||(this.timeStamp=e);var t=e-this.timeStamp;this.timeStamp=e,this.scenes[this.sceneIndex].drawScene(t)}}]),e}(),ne=["Click the canvas to explore the scene"],oe=["Use the mouse to look","Use the WASD keys to move around"],re=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(h.a)(t).call(this,e))).onResize=a.onResize.bind(Object(u.a)(a)),a.onKeyDown=a.onKeyDown.bind(Object(u.a)(a)),a.onKeyUp=a.onKeyUp.bind(Object(u.a)(a)),a.onMouseMove=a.onMouseMove.bind(Object(u.a)(a)),a.onDataChange=a.onDataChange.bind(Object(u.a)(a)),a.onLockChange=a.onLockChange.bind(Object(u.a)(a)),a.onClickCanvas=a.onClickCanvas.bind(Object(u.a)(a)),a.onChange=a.onChange.bind(Object(u.a)(a)),a.onClickPrevious=a.onClickPrevious.bind(Object(u.a)(a)),a.onClickNext=a.onClickNext.bind(Object(u.a)(a)),a.onClickMessage=a.onClickMessage.bind(Object(u.a)(a)),a.onAnimationFrame=a.onAnimationFrame.bind(Object(u.a)(a)),a.state={showControls:!1},a.keys={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.sceneManager=new ie(this.canvas,this.onDataChange);var e=this.sceneManager.getScene(),t=e.mouseMovement?ne:void 0;this.setState({scene:e,notes:t,sceneData:void 0}),this.canvas.requestPointerLock=this.canvas.requestPointerLock||this.canvas.mozRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock,this.frame=window.requestAnimationFrame(this.onAnimationFrame),window.addEventListener("resize",this.onResize),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),document.addEventListener("pointerlockchange",this.onLockChange),document.addEventListener("mozpointerlockchange",this.onLockChange),this.showMessage(["Press Escape to toggle menu","Press Page Up for previous screen","Press Page Down for next screen"])}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.frame),window.removeEventListener("resize",this.onResize),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp),document.removeEventListener("pointerlockchange",this.onLockChange),document.removeEventListener("mozpointerlockchange",this.onLockChange)}},{key:"cancelLock",value:function(){this.captureMouse=!1,this.captureKeys=!1,document.exitPointerLock()}},{key:"onResize",value:function(){this.sceneManager.resizeViewport()}},{key:"onKeyDown",value:function(e){e.preventDefault(),this.keys[e.key]||(this.onKeyPress(e.key),this.keys[e.key]=!0,this.captureKeys&&this.state.scene.keyboardState(this.keys))}},{key:"onKeyUp",value:function(e){e.preventDefault(),this.keys[e.key]=!1,this.captureKeys&&this.state.scene.keyboardState(this.keys)}},{key:"onKeyPress",value:function(e){if("Escape"===e)this.messageTimer?this.cancelMessage():this.setState({showControls:!this.state.showControls});else if("PageUp"===e){this.cancelLock(),this.setState({sceneData:void 0});var t=this.sceneManager.previousScene(),a=t.mouseMovement?ne:void 0;this.setState({scene:t,notes:a})}else if("PageDown"===e){this.cancelLock(),this.setState({sceneData:void 0});var i=this.sceneManager.nextScene(),n=i.mouseMovement?ne:void 0;this.setState({scene:i,notes:n})}}},{key:"onMouseMove",value:function(e){this.captureMouse&&this.state.scene.mouseMovement(e.movementX,e.movementY)}},{key:"onDataChange",value:function(e){this.setState({sceneData:e})}},{key:"onLockChange",value:function(e){e.preventDefault(),document.pointerLockElement===this.canvas||document.mozPointerLockElement===this.canvas?(document.addEventListener("mousemove",this.onMouseMove),this.captureMouse=!0,this.state.scene.keyboardState&&(this.captureKeys=!0),this.setState({notes:oe})):(document.removeEventListener("mousemove",this.onMouseMove),this.captureMouse=!1,this.captureKeys=!1,this.setState({notes:void 0}))}},{key:"onClickCanvas",value:function(e){e.preventDefault(),this.state.scene.mouseMovement&&(this.canvas.requestPointerLock(),this.setState({showControls:!1,notes:void 0}))}},{key:"onChange",value:function(e,t){t!==e.value&&(this.state.scene.setOption(e,t),this.forceUpdate())}},{key:"onClickPrevious",value:function(e){e.preventDefault(),this.cancelLock(),this.setState({sceneData:void 0});var t=this.sceneManager.previousScene(),a=t.mouseMovement?ne:void 0;this.setState({scene:t,notes:a})}},{key:"onClickNext",value:function(e){e.preventDefault(),this.cancelLock(),this.setState({sceneData:void 0});var t=this.sceneManager.nextScene(),a=t.mouseMovement?ne:void 0;this.setState({scene:t,notes:a})}},{key:"onClickMessage",value:function(e){e.preventDefault(),this.messageTimer&&this.cancelMessage()}},{key:"showMessage",value:function(e){this.setState({message:e}),this.messageTimer=setTimeout(this.clearMessage.bind(this),1e4)}},{key:"clearMessage",value:function(){this.setState({message:void 0}),this.messageTimer=void 0}},{key:"cancelMessage",value:function(){clearTimeout(this.messageTimer),this.clearMessage()}},{key:"onAnimationFrame",value:function(e){this.sceneManager.renderScene(e),this.frame=window.requestAnimationFrame(this.onAnimationFrame)}},{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"screen"},n.a.createElement("canvas",{id:"canvas",ref:function(t){return e.canvas=t},onClick:this.onClickCanvas}),n.a.createElement("div",{id:"note"},this.state.notes?this.state.notes.map((function(e,t){return n.a.createElement("div",{key:t},e)})):null,this.state.sceneData&&this.state.sceneData.total?n.a.createElement("div",null,this.state.sceneData.collected,"/",this.state.sceneData.total," power-ups collected"):null),n.a.createElement(m,{message:this.state.message,onClick:this.onClickMessage}),n.a.createElement(O,{show:this.state.showControls,onClickPrevious:this.onClickPrevious,onClickNext:this.onClickNext,onChange:this.onChange,options:this.state.scene?this.state.scene.options:void 0}),n.a.createElement(y,{show:this.state.showControls,credits:this.state.scene?this.state.scene.credits:void 0}))}}]),t}(n.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(n.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[13,1,2]]]);
//# sourceMappingURL=main.87d294e8.chunk.js.map