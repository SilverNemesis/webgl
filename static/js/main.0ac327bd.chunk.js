(this.webpackJsonpwebgl=this.webpackJsonpwebgl||[]).push([[0],{12:function(t,e,r){t.exports=r(18)},17:function(t,e,r){},18:function(t,e,r){"use strict";r.r(e);var i=r(4),o=r.n(i),n=r(8),a=r.n(n),c=(r(17),r(2)),u=r(3),s=r(10),f=r(9),l=r(5),v=r(11),m=r(0);function d(t,e,r){var i=h(t,t.VERTEX_SHADER,e),o=h(t,t.FRAGMENT_SHADER,r),n=t.createProgram();return t.attachShader(n,i),t.attachShader(n,o),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)?n:(alert("Unable to initialize the shader program: "+t.getProgramInfoLog(n)),null)}function h(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(alert("An error occurred compiling the shaders: "+t.getShaderInfoLog(i)),t.deleteShader(i),null)}function x(t,e){var r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var i=t.RGBA,o=t.RGBA,n=t.UNSIGNED_BYTE,a=new Uint8Array([0,0,255,255]);t.texImage2D(t.TEXTURE_2D,0,i,1,1,0,o,n,a);var c=new Image;return c.onload=function(){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,i,o,n,c),g(c.width)&&g(c.height)?t.generateMipmap(t.TEXTURE_2D):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR))},c.src=e,r}function g(t){return 0===(t&t-1)}function A(t){t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}var b=[{x:-1,y:0},{x:0,y:-1},{x:1,y:0},{x:0,y:1}];function R(t,e){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.8,i=function(t){c[t.y][t.x]=0},o=function(t,e){if(!n(a(t,e,3)))return!1;var r=a(t,e,2);return 1===c[r.y][r.x]},n=function(r){return!(r.x<0||r.y<0||r.x>=t||r.y>=e)},a=function(t,e,r){return{x:t.x+e.x*r,y:t.y+e.y*r}},c=[],u=0;u<e;u++)c.push(new Array(t).fill(1));var s,f={x:1,y:1},l=[];for(i(f),l.push(f);l.length>0;){for(var v=l[l.length-1],m=[],d=0;d<b.length;d++){var h=b[d];o(v,h)&&m.push(h)}if(m.length>0){var x=void 0;x=m.includes(s)&&Math.random()>r?s:m[Math.floor(Math.random()*m.length)],i(a(v,x,1)),i(a(v,x,2)),l.push(a(v,x,2)),s=x}else l.pop(),s=null}return{width:t,height:e,data:c}}var L=function(){function t(){Object(c.a)(this,t),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this)}return Object(u.a)(t,[{key:"initScene",value:function(t){var e=d(t,"\n    attribute vec4 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    varying lowp vec4 vColor;\n\n    void main(void) {\n      gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n      vColor = aVertexColor;\n    }\n  ","\n    varying lowp vec4 vColor;\n\n    void main(void) {\n      gl_FragColor = vColor;\n    }\n  "),r={program:e,attribLocations:{vertexPosition:t.getAttribLocation(e,"aVertexPosition"),vertexColor:t.getAttribLocation(e,"aVertexColor")},uniformLocations:{projectionMatrix:t.getUniformLocation(e,"uProjectionMatrix"),modelViewMatrix:t.getUniformLocation(e,"uModelViewMatrix")}},i=this._initBuffers(t);this.scene={programInfo:r,buffers:i,squareRotation:0}}},{key:"drawScene",value:function(t,e){var r=this.scene,i=r.programInfo,o=r.buffers;A(t);var n=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,o.color),t.vertexAttribPointer(i.attribLocations.vertexColor,4,n,!1,0,0),t.enableVertexAttribArray(i.attribLocations.vertexColor);var a=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,o.position),t.vertexAttribPointer(i.attribLocations.vertexPosition,2,a,!1,0,0),t.enableVertexAttribArray(i.attribLocations.vertexPosition);var c=45*Math.PI/180,u=t.canvas.clientWidth/t.canvas.clientHeight,s=m.a();m.d(s,c,u,.1,100);var f=m.a();m.f(f,f,[-0,0,-6]),m.e(f,f,r.squareRotation,[0,0,1]),t.useProgram(i.program),t.uniformMatrix4fv(i.uniformLocations.projectionMatrix,!1,s),t.uniformMatrix4fv(i.uniformLocations.modelViewMatrix,!1,f);t.drawArrays(t.TRIANGLE_STRIP,0,4),r.squareRotation+=e}},{key:"_initBuffers",value:function(t){var e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),t.STATIC_DRAW);var r=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array([1,1,1,1,1,0,0,1,0,1,0,1,0,0,1,1]),t.STATIC_DRAW),{position:e,color:r}}}]),t}(),E=function(){function t(){Object(c.a)(this,t),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this)}return Object(u.a)(t,[{key:"initScene",value:function(t){var e=d(t,"\n    attribute vec4 aVertexPosition;\n    attribute vec4 aVertexColor;\n\n    uniform mat4 uModelViewMatrix;\n    uniform mat4 uProjectionMatrix;\n\n    varying lowp vec4 vColor;\n\n    void main(void) {\n      gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n      vColor = aVertexColor;\n    }\n  ","\n    varying lowp vec4 vColor;\n\n    void main(void) {\n      gl_FragColor = vColor;\n    }\n  "),r={program:e,attribLocations:{vertexPosition:t.getAttribLocation(e,"aVertexPosition"),vertexColor:t.getAttribLocation(e,"aVertexColor")},uniformLocations:{projectionMatrix:t.getUniformLocation(e,"uProjectionMatrix"),modelViewMatrix:t.getUniformLocation(e,"uModelViewMatrix")}},i=this._initBuffers(t);this.scene={programInfo:r,buffers:i,cubeRotation:0}}},{key:"drawScene",value:function(t,e){var r=this.scene,i=r.programInfo,o=r.buffers;A(t);var n=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,o.position),t.vertexAttribPointer(i.attribLocations.vertexPosition,3,n,!1,0,0),t.enableVertexAttribArray(i.attribLocations.vertexPosition);var a=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,o.color),t.vertexAttribPointer(i.attribLocations.vertexColor,4,a,!1,0,0),t.enableVertexAttribArray(i.attribLocations.vertexColor),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o.indices);var c=45*Math.PI/180,u=t.canvas.clientWidth/t.canvas.clientHeight,s=m.a();m.d(s,c,u,.1,100);var f=m.a();m.f(f,f,[-0,0,-6]),m.e(f,f,r.cubeRotation,[0,0,1]),m.e(f,f,.7*r.cubeRotation,[0,1,0]),t.useProgram(i.program),t.uniformMatrix4fv(i.uniformLocations.projectionMatrix,!1,s),t.uniformMatrix4fv(i.uniformLocations.modelViewMatrix,!1,f);var l=t.UNSIGNED_SHORT;t.drawElements(t.TRIANGLES,36,l,0),r.cubeRotation+=e}},{key:"_initBuffers",value:function(t){var e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),t.STATIC_DRAW);for(var r=[[1,1,1,1],[1,0,0,1],[0,1,0,1],[0,0,1,1],[1,1,0,1],[1,0,1,1]],i=[],o=0;o<r.length;++o){var n=r[o];i=i.concat(n,n,n,n)}var a=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW);var c=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,c),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),t.STATIC_DRAW),{position:e,color:a,indices:c}}}]),t}(),_=function(){function t(){Object(c.a)(this,t),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this)}return Object(u.a)(t,[{key:"initScene",value:function(t){var e=d(t,"\n      attribute vec4 aVertexPosition;\n      attribute vec2 aTextureCoord;\n\n      uniform mat4 uModelViewMatrix;\n      uniform mat4 uProjectionMatrix;\n\n      varying highp vec2 vTextureCoord;\n\n      void main(void) {\n        gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n        vTextureCoord = aTextureCoord;\n      }\n    ","\n      varying highp vec2 vTextureCoord;\n\n      uniform sampler2D uSampler;\n\n      void main(void) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n      }\n    "),r={program:e,attribLocations:{vertexPosition:t.getAttribLocation(e,"aVertexPosition"),textureCoord:t.getAttribLocation(e,"aTextureCoord")},uniformLocations:{projectionMatrix:t.getUniformLocation(e,"uProjectionMatrix"),modelViewMatrix:t.getUniformLocation(e,"uModelViewMatrix"),uSampler:t.getUniformLocation(e,"uSampler")}},i=this._initBuffers(t),o=x(t,"images/cubetexture.png");this.scene={programInfo:r,buffers:i,texture:o,cubeRotation:0}}},{key:"drawScene",value:function(t,e){var r=this.scene,i=r.programInfo,o=r.buffers,n=r.texture;A(t);var a=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,o.position),t.vertexAttribPointer(i.attribLocations.vertexPosition,3,a,!1,0,0),t.enableVertexAttribArray(i.attribLocations.vertexPosition);var c=t.FLOAT;t.bindBuffer(t.ARRAY_BUFFER,o.textureCoord),t.vertexAttribPointer(i.attribLocations.textureCoord,2,c,!1,0,0),t.enableVertexAttribArray(i.attribLocations.textureCoord),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o.indices);var u=45*Math.PI/180,s=t.canvas.clientWidth/t.canvas.clientHeight,f=m.a();m.d(f,u,s,.1,100);var l=m.a();m.f(l,l,[-0,0,-6]),m.e(l,l,r.cubeRotation,[0,0,1]),m.e(l,l,.7*r.cubeRotation,[0,1,0]),t.useProgram(i.program),t.uniformMatrix4fv(i.uniformLocations.projectionMatrix,!1,f),t.uniformMatrix4fv(i.uniformLocations.modelViewMatrix,!1,l),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,n),t.uniform1i(i.uniformLocations.uSampler,0);var v=t.UNSIGNED_SHORT;t.drawElements(t.TRIANGLES,36,v,0),r.cubeRotation+=e}},{key:"_initBuffers",value:function(t){var e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),t.STATIC_DRAW);var r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]),t.STATIC_DRAW);var i=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),t.STATIC_DRAW),{position:e,textureCoord:r,indices:i}}}]),t}(),T=r(6),p=function(){function t(e){Object(c.a)(this,t),this.gl=e,this.draw=this.draw.bind(this);var r=this._initShaders(e),i=this._initShadersPerPixel(e);this.model={shader:{program:r,attribLocations:{vertexPosition:e.getAttribLocation(r,"aVertexPosition"),vertexNormal:e.getAttribLocation(r,"aVertexNormal"),textureCoord:e.getAttribLocation(r,"aTextureCoord")},uniformLocations:{projectionMatrix:e.getUniformLocation(r,"uProjectionMatrix"),modelViewMatrix:e.getUniformLocation(r,"uModelViewMatrix"),normalMatrix:e.getUniformLocation(r,"uNormalMatrix"),uSampler:e.getUniformLocation(r,"uSampler"),ambientLight:e.getUniformLocation(r,"uAmbientLight"),directionalLight:{direction:e.getUniformLocation(r,"uDirectionalLight.direction"),color:e.getUniformLocation(r,"uDirectionalLight.color")},pointLight:{position:e.getUniformLocation(r,"uPointLight.position"),color:e.getUniformLocation(r,"uPointLight.color")}}},shaderPerPixel:{program:i,attribLocations:{vertexPosition:e.getAttribLocation(i,"aVertexPosition"),vertexNormal:e.getAttribLocation(i,"aVertexNormal"),textureCoord:e.getAttribLocation(i,"aTextureCoord")},uniformLocations:{projectionMatrix:e.getUniformLocation(i,"uProjectionMatrix"),modelViewMatrix:e.getUniformLocation(i,"uModelViewMatrix"),normalMatrix:e.getUniformLocation(i,"uNormalMatrix"),uSampler:e.getUniformLocation(i,"uSampler"),ambientLight:e.getUniformLocation(i,"uAmbientLight"),directionalLight:{direction:e.getUniformLocation(i,"uDirectionalLight.direction"),color:e.getUniformLocation(i,"uDirectionalLight.color")},pointLight:{position:e.getUniformLocation(i,"uPointLight.position"),color:e.getUniformLocation(i,"uPointLight.color")}}},buffers:this._initBuffers(e),texture:x(e,"images/cubetexture.png")}}return Object(u.a)(t,[{key:"draw",value:function(t,e,r,i){var o,n=this.gl,a=this.model,c=a.buffers,u=a.texture;o=i?this.model.shaderPerPixel:this.model.shader;var s=n.FLOAT;n.bindBuffer(n.ARRAY_BUFFER,c.position),n.vertexAttribPointer(o.attribLocations.vertexPosition,3,s,!1,0,0),n.enableVertexAttribArray(o.attribLocations.vertexPosition);var f=n.FLOAT;n.bindBuffer(n.ARRAY_BUFFER,c.normal),n.vertexAttribPointer(o.attribLocations.vertexNormal,3,f,!1,0,0),n.enableVertexAttribArray(o.attribLocations.vertexNormal);var l=n.FLOAT;n.bindBuffer(n.ARRAY_BUFFER,c.textureCoord),n.vertexAttribPointer(o.attribLocations.textureCoord,2,l,!1,0,0),n.enableVertexAttribArray(o.attribLocations.textureCoord),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,c.indices);var v=m.a();m.b(v,r),m.g(v,v);var d=m.a();m.c(d,e,r);var h=T.a(0,1,0);T.b(h,h),n.useProgram(o.program),n.uniformMatrix4fv(o.uniformLocations.projectionMatrix,!1,t),n.uniformMatrix4fv(o.uniformLocations.modelViewMatrix,!1,d),n.uniformMatrix4fv(o.uniformLocations.normalMatrix,!1,v),n.uniform3f(o.uniformLocations.ambientLight,.3,.3,.3),n.uniform3f(o.uniformLocations.directionalLight.color,.5,.5,.5),n.uniform3fv(o.uniformLocations.directionalLight.direction,h),n.uniform3f(o.uniformLocations.pointLight.color,.7,.7,.7),n.uniform3f(o.uniformLocations.pointLight.position,0,0,0),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,u),n.uniform1i(o.uniformLocations.uSampler,0);var x=n.UNSIGNED_SHORT;n.drawElements(n.TRIANGLES,36,x,0)}},{key:"_initShaders",value:function(t){return d(t,"\n      attribute vec4 aVertexPosition;\n      attribute vec3 aVertexNormal;\n      attribute vec2 aTextureCoord;\n\n      uniform mat4 uProjectionMatrix;\n      uniform mat4 uModelViewMatrix;\n      uniform mat4 uNormalMatrix;\n      uniform vec3 uAmbientLight;\n      uniform struct {\n        vec3 direction;\n        vec3 color;\n      } uDirectionalLight;\n      uniform struct {\n        vec3 position;\n        vec3 color;\n      } uPointLight;\n\n      varying highp vec2 vTextureCoord;\n      varying highp vec3 vLighting;\n\n      void main(void) {\n        gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n        vTextureCoord = aTextureCoord;\n\n        highp vec3 transformedNormal = vec3(uNormalMatrix * vec4(aVertexNormal, 1.0));\n        highp float directional = max(dot(transformedNormal, uDirectionalLight.direction), 0.0);\n\n        vec3 surfaceToLight = uPointLight.position - aVertexPosition.xyz;\n        float bright = 50.0 * max(dot(transformedNormal, normalize(surfaceToLight)), 0.0) / (length(surfaceToLight) * length(surfaceToLight));\n        bright = clamp(bright, 0.0, 1.0);\n\n        vLighting = uAmbientLight + (uDirectionalLight.color * directional) + (uPointLight.color * bright);\n      }\n    ","\n      varying highp vec2 vTextureCoord;\n      varying highp vec3 vLighting;\n\n      uniform sampler2D uSampler;\n\n      void main(void) {\n        highp vec4 texelColor = texture2D(uSampler, vTextureCoord);\n        gl_FragColor = vec4(texelColor.rgb * vLighting, texelColor.a);\n      }\n    ")}},{key:"_initShadersPerPixel",value:function(t){return d(t,"\n      attribute vec4 aVertexPosition;\n      attribute vec2 aTextureCoord;\n      attribute vec3 aVertexNormal;\n\n      uniform mat4 uProjectionMatrix;\n      uniform mat4 uModelViewMatrix;\n      uniform mat4 uNormalMatrix;\n\n      varying vec3 vVertexPosition;\n      varying vec2 vTextureCoord;\n      varying vec3 vVertexNormal;\n\n      void main(void) {\n        gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n        vTextureCoord = aTextureCoord;\n        vVertexNormal = normalize(vec3(uNormalMatrix * vec4(aVertexNormal, 1.0)));\n        vVertexPosition = vec3(uModelViewMatrix * aVertexPosition);\n      }\n    ","\n      precision highp float;\n\n      uniform sampler2D uSampler;\n      uniform vec3 uAmbientLight;     \n      uniform struct {\n        vec3 direction;\n        vec3 color;\n      } uDirectionalLight;\n      uniform struct {\n        vec3 position;\n        vec3 color;\n      } uPointLight;\n\n      varying vec3 vVertexPosition;\n      varying vec2 vTextureCoord;\n      varying vec3 vVertexNormal;\n      \n      void main() {\n        highp float directional = max(dot(vVertexNormal, uDirectionalLight.direction), 0.0);\n\n        vec3 surfaceToLight = uPointLight.position - vVertexPosition;\n        float bright = 50.0 * max(dot(vVertexNormal, normalize(surfaceToLight)), 0.0) / (length(surfaceToLight) * length(surfaceToLight));\n        bright = clamp(bright, 0.0, 1.0);\n\n        highp vec3 lighting = uAmbientLight + (uDirectionalLight.color * directional) + (uPointLight.color * bright);\n\n        highp vec4 texelColor = texture2D(uSampler, vTextureCoord);\n        gl_FragColor = vec4(texelColor.rgb * lighting, texelColor.a);\n      }\n    ")}},{key:"_initBuffers",value:function(t){var e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),t.STATIC_DRAW);var r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),t.STATIC_DRAW);var i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,1,1,0,1]),t.STATIC_DRAW);var o=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),t.STATIC_DRAW),{position:e,normal:r,textureCoord:i,indices:o}}}]),t}(),M=function(){function t(){Object(c.a)(this,t),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this)}return Object(u.a)(t,[{key:"initScene",value:function(t){var e=new p(t);this.scene={actors:[{model:e,location:[-2,0,-5.5],rotation:0,rotationSpeed:1,perPixel:!1},{model:e,location:[2,0,-5.5],rotation:0,rotationSpeed:1,perPixel:!0}],camera:[0,0,0],cameraDir:[0,0,2]}}},{key:"drawScene",value:function(t,e){var r=this.scene;A(t);var i=45*Math.PI/180,o=t.canvas.clientWidth/t.canvas.clientHeight,n=m.a();m.d(n,i,o,.1,100);var a=m.a();m.f(a,a,r.camera),m.b(a,a);for(var c=0;c<r.actors.length;c++){var u=r.actors[c];this._renderActor(n,a,u),this._animateActor(e,u)}r.camera[2]>16?(r.camera[2]=16,r.cameraDir[2]=-2):r.camera[2]<0&&(r.camera[2]=0,r.cameraDir[2]=2),r.camera[0]+=r.cameraDir[0]*e,r.camera[1]+=r.cameraDir[1]*e,r.camera[2]+=r.cameraDir[2]*e}},{key:"_renderActor",value:function(t,e,r){var i=r.model,o=m.a();m.f(o,o,r.location),m.e(o,o,r.rotation,[0,0,1]),m.e(o,o,.7*r.rotation,[0,1,0]),m.e(o,o,.3*r.rotation,[1,0,0]),i.draw(t,e,o,r.perPixel)}},{key:"_animateActor",value:function(t,e){e.rotation+=t*e.rotationSpeed}}]),t}(),F=function(){function t(e,r){Object(c.a)(this,t),this.gl=e,this.maze=r,this.draw=this.draw.bind(this);var i=this._initShaders(e);this.model={program:i,attribLocations:{vertexPosition:e.getAttribLocation(i,"aVertexPosition"),vertexColor:e.getAttribLocation(i,"aVertexColor")},uniformLocations:{projectionMatrix:e.getUniformLocation(i,"uProjectionMatrix"),modelViewMatrix:e.getUniformLocation(i,"uModelViewMatrix")},buffers:this._initBuffers(e,r)}}return Object(u.a)(t,[{key:"update",value:function(t){this._freeBuffers(this.gl,this.model.buffers),this.maze=t,this.model.buffers=this._initBuffers(this.gl,t)}},{key:"draw",value:function(t,e,r){var i=this.gl,o=this.model,n=this.model.buffers,a=i.FLOAT;i.bindBuffer(i.ARRAY_BUFFER,n.position),i.vertexAttribPointer(o.attribLocations.vertexPosition,3,a,!1,0,0),i.enableVertexAttribArray(o.attribLocations.vertexPosition);var c=i.FLOAT;i.bindBuffer(i.ARRAY_BUFFER,n.color),i.vertexAttribPointer(o.attribLocations.vertexColor,4,c,!1,0,0),i.enableVertexAttribArray(o.attribLocations.vertexColor),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,n.indices);var u=m.a();m.c(u,e,r),i.useProgram(o.program),i.uniformMatrix4fv(o.uniformLocations.projectionMatrix,!1,t),i.uniformMatrix4fv(o.uniformLocations.modelViewMatrix,!1,u);var s=n.vertexCount,f=i.UNSIGNED_INT;i.drawElements(i.TRIANGLES,s,f,0)}},{key:"_initShaders",value:function(t){return d(t,"\n      attribute vec4 aVertexPosition;\n      attribute vec4 aVertexColor;\n\n      uniform mat4 uModelViewMatrix;\n      uniform mat4 uProjectionMatrix;\n\n      varying lowp vec4 vColor;\n\n      void main(void) {\n        gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n        vColor = aVertexColor;\n      }\n    ","\n      varying lowp vec4 vColor;\n\n      void main(void) {\n        gl_FragColor = vColor;\n      }\n    ")}},{key:"_initBuffers",value:function(t,e){for(var r=[],i=[],o=[],n=0,a=function(t,e,a,c,u,s){r.push(t,a,u,e,a,u,e,c,u,t,c,u),o.push(n+0,n+1,n+2,n+0,n+2,n+3),n+=4;for(var f=0;f<4;f++)for(var l=0;l<4;l++)i.push(s[l])},c=function(t,e,a,c,u,s){r.push(t,u,a,e,u,a,e,u,c,t,u,c),o.push(n+0,n+1,n+2,n+0,n+2,n+3),n+=4;for(var f=0;f<4;f++)for(var l=0;l<4;l++)i.push(s[l])},u=function(t,e,a,c,u,s){r.push(u,t,a,u,e,a,u,e,c,u,t,c),o.push(n+0,n+1,n+2,n+0,n+2,n+3),n+=4;for(var f=0;f<4;f++)for(var l=0;l<4;l++)i.push(s[l])},s=[.2,.2,.2,1],f=[.7,.7,.7,1],l=[.5,0,.5,1],v=[0,.5,0,1],m=[.5,0,0,1],d=[0,0,.5,1],h=-e.width/2,x=-e.height/2,g=0;g<e.height;g++)for(var A=0;A<e.width;A++){var b=A+h,R=b+1,L=g+x,E=L+1;0===e.data[g][A]?a(b,R,L,E,0,s):(a(b,R,L,E,1,f),0!==g&&0!==e.data[g-1][A]||c(b,R,0,1,L,l),0!==A&&0!==e.data[g][A-1]||u(L,E,0,1,b,m),g!==e.height-1&&0!==e.data[g+1][A]||c(b,R,0,1,E,v),A!==e.width-1&&0!==e.data[g][A+1]||u(L,E,0,1,R,d))}var _=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,_),t.bufferData(t.ARRAY_BUFFER,new Float32Array(r),t.STATIC_DRAW);var T=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,T),t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW);var p=t.createBuffer();return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,p),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint32Array(o),t.STATIC_DRAW),{position:_,color:T,indices:p,vertexCount:o.length}}},{key:"_freeBuffers",value:function(t,e){t.deleteBuffer(e.position),t.deleteBuffer(e.color),t.deleteBuffer(e.indices)}}]),t}(),P=function(){function t(){Object(c.a)(this,t),this.initScene=this.initScene.bind(this),this.drawScene=this.drawScene.bind(this),this.totalDelta=0}return Object(u.a)(t,[{key:"initScene",value:function(t){var e=2*Math.floor(45*Math.random())+11,r=R(e,e),i=new F(t,r);this.scene={actors:[{model:i,location:[0,0,-2*e],rotation:{angle:0,axis:[0,0,1],speed:.5}}],camera:[0,0,0],cameraDir:[0,0,8]}}},{key:"drawScene",value:function(t,e){var r=this.scene;A(t);var i=45*Math.PI/180,o=t.canvas.clientWidth/t.canvas.clientHeight,n=m.a();m.d(n,i,o,.1,500);var a=m.a();m.f(a,a,r.camera),m.b(a,a);for(var c=0;c<r.actors.length;c++){var u=r.actors[c];this._renderActor(n,a,u),this._animateActor(e,u)}}},{key:"_renderActor",value:function(t,e,r){var i=r.model,o=m.a();m.f(o,o,r.location),m.e(o,o,-45*(Math.PI/180),[1,0,0]),m.e(o,o,r.rotation.angle,r.rotation.axis),i.draw(t,e,o)}},{key:"_animateActor",value:function(t,e){if(e.rotation.angle+=t*e.rotation.speed,this.totalDelta+=t,this.totalDelta>=10){this.totalDelta-=10;var r=2*Math.floor(45*Math.random())+11,i=R(r,r);e.location[2]=-2*r,e.model.update(i)}}}]),t}(),B=function(t){function e(t){var r;return Object(c.a)(this,e),(r=Object(s.a)(this,Object(f.a)(e).call(this,t))).onClickCanvas=r.onClickCanvas.bind(Object(l.a)(r)),r.renderCanvas=r.renderCanvas.bind(Object(l.a)(r)),r.scenes=[{init:!1,render:new L},{init:!1,render:new E},{init:!1,render:new _},{init:!1,render:new M},{init:!1,render:new P}],r.sceneIndex=r.scenes.length-1,r}return Object(v.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){var t=this.canvas,e=t.getBoundingClientRect();if(t.width=e.width,t.height=e.height,this.gl=t.getContext("webgl"),null===this.gl)alert("Unable to initialize WebGL. Your browser or machine may not support it.");else{this.gl.getExtension("OES_element_index_uint");var r=this.scenes[this.sceneIndex];r.init||(r.init=!0,r.render.initScene(this.gl)),this.frame=window.requestAnimationFrame(this.renderCanvas)}}},{key:"componentWillUnmount",value:function(){window.cancelAnimationFrame(this.frame)}},{key:"onClickCanvas",value:function(t){t.preventDefault(),this.sceneIndex=(this.sceneIndex+1)%this.scenes.length;var e=this.scenes[this.sceneIndex];e.init||(e.init=!0,e.render.initScene(this.gl))}},{key:"renderCanvas",value:function(t){t*=.001,this.timeStamp||(this.timeStamp=t);var e=t-this.timeStamp;this.timeStamp=t,this.scenes[this.sceneIndex].render.drawScene(this.gl,e),this.frame=window.requestAnimationFrame(this.renderCanvas)}},{key:"render",value:function(){var t=this;return o.a.createElement("div",{className:"screen"},o.a.createElement("canvas",{className:"canvas",ref:function(e){return t.canvas=e},onClick:this.onClickCanvas}))}}]),e}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[12,1,2]]]);
//# sourceMappingURL=main.0ac327bd.chunk.js.map