{"version":3,"sources":["components/Message.js","components/Controls.js","components/Credits.js","lib/utility.js","models/Model.js","models/ColorModel.js","scenes/ColorScene.js","models/TexturedCubeModel.js","scenes/TexturedCubeScene.js","models/MazeModel.js","scenes/MazeScene.js","models/BrickWallModel.js","scenes/BrickWallScene.js","models/MaterialModel.js","scenes/MaterialScene.js","models/RoomModel.js","scenes/RoomScene.js","lib/SceneManager.js","components/App.js","serviceWorker.js","index.js"],"names":["Message","message","onClick","id","map","text","index","key","DescriptionControl","props","control","className","description","SelectControl","options","i","length","push","value","htmlFor","name","onChange","event","target","BoolControl","type","checked","IntControl","min","max","FloatControl","factor","toFixed","Math","floor","FunctionControl","function","Controls","controls","show","onClickPrevious","onClickNext","option","Credits","children","credits","credit","startsWith","url","slice","href","rel","degreesToRadians","degrees","PI","_typeToString","gl","FLOAT","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT","INT_VEC2","INT_VEC3","INT_VEC4","BOOL","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","SAMPLER_2D","SAMPLER_CUBE","_loadShader","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","alert","getShaderInfoLog","deleteShader","loadTexture","texture","createTexture","bindTexture","TEXTURE_2D","internalFormat","RGBA","srcFormat","srcType","UNSIGNED_BYTE","pixel","Uint8Array","texImage2D","image","Image","onload","_isPowerOf2","width","height","generateMipmap","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","LINEAR","src","clearScreen","clearColor","clearDepth","enable","DEPTH_TEST","depthFunc","LEQUAL","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","_directions","x","y","generateMaze","windiness","carve","pos","data","canCarve","dir","isInBounds","addDir","nxt","len","Array","fill","lastDir","start","cells","cell","posCells","includes","random","pop","getShape","shape","s3","sqrt","s6","vertices","faces","r","a","phi","b","c","_materials","emerald","ambient","diffuse","specular","shininess","jade","obsidian","pearl","ruby","turquoise","brass","bronze","chrome","copper","gold","silver","blackPlastic","cyanPlastic","greenPlastic","redPlastic","whitePlastic","yellowPlastic","blackRubber","cyanRubber","greenRubber","redRubber","whiteRubber","yellowRubber","getMaterialList","materials","prop","hasOwnProperty","getMaterial","Model","vertexShader","fragmentShader","geometry","textures","normal","occlusion","Promise","all","fetch","vertex","then","response","fragment","_setupShader","buffers","_initBuffers","model","shaders","vertexShaders","fragmentShaders","pendingLoads","this","_deleteBuffers","shaderProgram","vsSource","fsSource","VERTEX_SHADER","FRAGMENT_SHADER","createProgram","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","initShaderProgram","shaderParameters","attributeCount","ACTIVE_ATTRIBUTES","attributes","attribute","getActiveAttrib","uniformCount","ACTIVE_UNIFORMS","uniforms","uniform","getActiveUniform","getShaderParameters","program","attribLocations","uniformLocations","forEach","location","getAttribLocation","_addShaderNameToJavascript","getUniformLocation","shaderLocations","inputName","names","toLowerCase","split","out","subBeg","indexOf","subEnd","Number","bufferCount","requirements","vertexNormal","vertexTangent","vertexBitangent","textureCoord","vertexColor","vec3","tangent","bitangent","inputBuffers","positions","normals","tangents","bitangents","textureCoordinates","colors","indices","offset","addSquare","c0","c1","c2","c3","inputBuffer","bufferIndex","color","addFace","face","addTriangle","c4","addPentagon","addFaces","outputBuffers","positionBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","indexBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","outputBuffer","position","vertexCount","normalBuffer","tangentBuffer","bitangentBuffer","textureCoordBuffer","colorBuffer","buffer","deleteBuffer","projectionMatrix","viewMatrix","modelMatrix","shaderIndex","vertexAttribPointer","vertexPosition","enableVertexAttribArray","useProgram","uniformMatrix4fv","normalMatrix","mat4","showDiffuseMap","undefined","uniform1i","showNormalMap","showAmbientOcclusionMap","lightingModel","parallaxHeightScale","uniform1f","parallaxSteps","parallaxOcclusionMapping","ambientLight","uniform3fv","directionalLight","direction","pointLight","lights","light","material","cameraPos","samplerDiffuse","activeTexture","TEXTURE0","samplerNormal","TEXTURE1","samplerHeight","TEXTURE2","samplerOcclusion","TEXTURE3","UNSIGNED_SHORT","drawElements","TRIANGLES","ColorModel","shapeName","draw","bind","_initModel","_drawModel","ColorScene","setOption","initScene","drawScene","renderOptions","model6","model12","scene","actors","scale","rotations","angle","axis","speed","camera","deltaTime","fieldOfView","aspect","canvas","clientWidth","clientHeight","actor","_renderActor","_animateActor","rotation","TexturedCubeModel","_geometry","f0","f1","f2","f3","b0","b1","b2","b3","TexturedCubeScene","MazeModel","maze","update","_updateModel","floorColor","ceilingColor","wallColor_Back","wallColor_Front","wallColor_Left","wallColor_Right","ofs_x","ofs_y","left","right","back","front","MazeScene","updateScene","totalDelta","materialName","_generateMaze","size","BrickWallModel","BrickWallScene","MaterialModel","MaterialScene","materialList","model4","model8","model10","model20","materialIndex","RoomModel","ofs_z","z","RoomScene","mouseMovement","keyboardState","movement","side","keys","_findStartLocation","isSolid","matrix","SceneManager","resizeViewport","getScene","previousScene","nextScene","renderScene","scenes","init","render","sceneIndex","getContext","CULL_FACE","cullFace","BACK","rect","getBoundingClientRect","viewport","timeStamp","fps","round","App","onResize","onKeyDown","onKeyUp","onMouseMove","onLockChange","onClickCanvas","onClickMessage","onAnimationFrame","state","showControls","sceneManager","note","setState","requestPointerLock","mozRequestPointerLock","document","exitPointerLock","mozExitPointerLock","frame","window","requestAnimationFrame","addEventListener","showMessage","cancelAnimationFrame","removeEventListener","captureMouse","captureKeys","preventDefault","onKeyPress","messageTimer","cancelMessage","cancelLock","movementX","movementY","pointerLockElement","mozPointerLockElement","forceUpdate","setTimeout","clearMessage","clearTimeout","ref","elem","React","Component","Boolean","hostname","match","ReactDOM","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.cd3c0b43.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Message = ({ message, onClick }) => {\r\n  if (!message) {\r\n    return null;\r\n  }\r\n  return (\r\n    <div id=\"message\" onClick={onClick}>\r\n      {message.map((text, index) => (<div key={index}>{text}</div>))}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Message;\r\n","import React from 'react';\r\n\r\nconst DescriptionControl = (props) => {\r\n  const { control } = props;\r\n  return (\r\n    <div className=\"control\">\r\n      {control.description}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst SelectControl = (props) => {\r\n  function onChange(event) {\r\n    props.onChange(control, event.target.value);\r\n  }\r\n  const { control } = props;\r\n  const options = [];\r\n  for (let i = 0; i < control.options.length; i++) {\r\n    options.push(\r\n      (<option key={i} value={i}>{control.options[i]}</option>)\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"control\">\r\n      <label htmlFor={control.name}>{control.name}</label>\r\n      <select id={control.name} className=\"select-css\" value={control.value} onChange={onChange}>\r\n        {options}\r\n      </select>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst BoolControl = (props) => {\r\n  function onChange(event) {\r\n    props.onChange(control, event.target.checked);\r\n  }\r\n  const { control } = props;\r\n  return (\r\n    <div className=\"control\">\r\n      <label className=\"clickable\" htmlFor={control.name}><input className=\"clickable\" id={control.name} type=\"checkbox\" checked={control.value} onChange={onChange} />{control.name}</label>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst IntControl = (props) => {\r\n  function onChange(event) {\r\n    props.onChange(control, event.target.value);\r\n  }\r\n  const { control } = props;\r\n  return (\r\n    <div className=\"control\">\r\n      <label htmlFor={control.name}>{control.name} {control.value}</label>\r\n      <input id={control.name} className=\"clickable\" type=\"range\" min={control.min} max={control.max} value={control.value} onChange={onChange} />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst FloatControl = (props) => {\r\n  const factor = 1000;\r\n  function onChange(event) {\r\n    props.onChange(control, event.target.value / factor);\r\n  }\r\n  const { control } = props;\r\n  return (\r\n    <div className=\"control\">\r\n      <label htmlFor={control.name}>{control.name} {control.value.toFixed(3)}</label>\r\n      <input id={control.name} className=\"clickable\" type=\"range\" min={Math.floor(control.min * factor)} max={Math.floor(control.max * factor)} value={Math.floor(control.value * factor)} onChange={onChange} />\r\n    </div>\r\n  );\r\n}\r\n\r\nconst FunctionControl = (props) => {\r\n  function onClick(event) {\r\n    control.function();\r\n  }\r\n  const { control } = props;\r\n  return (\r\n    <div className=\"control\">\r\n      <button onClick={onClick}>{control.name}</button>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Controls = ({ show, onClickPrevious, onClickNext, onChange, options }) => {\r\n  if (!show) {\r\n    return null;\r\n  }\r\n  let controls\r\n  if (options) {\r\n    controls = options.map((option, index) => {\r\n      switch (option.type) {\r\n        case 'description':\r\n          return <DescriptionControl key={index} control={option} />\r\n        case 'select':\r\n          return <SelectControl key={index} control={option} onChange={onChange} />\r\n        case 'bool':\r\n          return <BoolControl key={index} control={option} onChange={onChange} />\r\n        case 'int':\r\n          return <IntControl key={index} control={option} onChange={onChange} />\r\n        case 'float':\r\n          return <FloatControl key={index} control={option} onChange={onChange} />\r\n        case 'function':\r\n          return <FunctionControl key={index} control={option} />\r\n        default:\r\n          return (\r\n            <div key={index} className=\"control\">{option.type} is not supported</div>\r\n          );\r\n      }\r\n    });\r\n  }\r\n  return (\r\n    <div id=\"overlay\">\r\n      <div className=\"none\">\r\n        <span className=\"left\" onClick={onClickPrevious}>❮ PREV</span>\r\n        <span className=\"right\" onClick={onClickNext}>NEXT ❯</span>\r\n      </div>\r\n      <div>\r\n        {controls}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Controls;\r\n","import React from 'react';\r\n\r\nconst Credits = ({ show, credits }) => {\r\n  if (!show) {\r\n    return null;\r\n  }\r\n  let children\r\n  if (credits) {\r\n    children = credits.map((credit, index) => {\r\n      if (credit.startsWith('link:')) {\r\n        const url = credit.slice(5);\r\n        return (\r\n          <div key={index} className=\"credit\"><a href={url} target=\"_blank\" rel=\"noopener noreferrer\">{url}</a></div>\r\n        );\r\n      } else if (credit === '') {\r\n        return (\r\n          <div key={index} className=\"credit\"></div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div key={index} className=\"credit\">{credit}</div>\r\n        );\r\n      }\r\n    });\r\n  }\r\n  return (\r\n    <div id=\"credits\">\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Credits;\r\n","export function degreesToRadians(degrees) {\r\n  var pi = Math.PI;\r\n  return degrees * (pi / 180);\r\n}\r\n\r\nexport function initShaderProgram(gl, vsSource, fsSource) {\r\n  const vertexShader = _loadShader(gl, gl.VERTEX_SHADER, vsSource);\r\n  const fragmentShader = _loadShader(gl, gl.FRAGMENT_SHADER, fsSource);\r\n  const shaderProgram = gl.createProgram();\r\n  gl.attachShader(shaderProgram, vertexShader);\r\n  gl.attachShader(shaderProgram, fragmentShader);\r\n  gl.linkProgram(shaderProgram);\r\n  if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {\r\n    alert('Unable to initialize the shader program: ' + gl.getProgramInfoLog(shaderProgram));\r\n    return null;\r\n  }\r\n  return shaderProgram;\r\n}\r\n\r\nexport function getShaderParameters(gl, shaderProgram) {\r\n  const attributeCount = gl.getProgramParameter(shaderProgram, gl.ACTIVE_ATTRIBUTES);\r\n  const attributes = [];\r\n  for (let i = 0; i < attributeCount; i++) {\r\n    const attribute = gl.getActiveAttrib(shaderProgram, i);\r\n    attributes.push({ name: attribute.name, type: _typeToString(gl, attribute.type) });\r\n  }\r\n  const uniformCount = gl.getProgramParameter(shaderProgram, gl.ACTIVE_UNIFORMS);\r\n  const uniforms = [];\r\n  for (let i = 0; i < uniformCount; i++) {\r\n    const uniform = gl.getActiveUniform(shaderProgram, i);\r\n    uniforms.push({ name: uniform.name, type: _typeToString(gl, uniform.type) });\r\n  }\r\n  return {\r\n    attributes,\r\n    uniforms\r\n  };\r\n}\r\n\r\nfunction _typeToString(gl, type) {\r\n  switch (type) {\r\n    case gl.FLOAT:\r\n      return \"FLOAT\";\r\n    case gl.FLOAT_VEC2:\r\n      return \"FLOAT_VEC2\";\r\n    case gl.FLOAT_VEC3:\r\n      return \"FLOAT_VEC3\";\r\n    case gl.FLOAT_VEC4:\r\n      return \"FLOAT_VEC4\";\r\n    case gl.INT:\r\n      return \"INT\";\r\n    case gl.INT_VEC2:\r\n      return \"INT_VEC2\";\r\n    case gl.INT_VEC3:\r\n      return \"INT_VEC3\";\r\n    case gl.INT_VEC4:\r\n      return \"INT_VEC4\";\r\n    case gl.BOOL:\r\n      return \"BOOL\";\r\n    case gl.BOOL_VEC2:\r\n      return \"BOOL_VEC2\";\r\n    case gl.BOOL_VEC3:\r\n      return \"BOOL_VEC3\";\r\n    case gl.BOOL_VEC4:\r\n      return \"BOOL_VEC4\";\r\n    case gl.FLOAT_MAT2:\r\n      return \"FLOAT_MAT2\";\r\n    case gl.FLOAT_MAT3:\r\n      return \"FLOAT_MAT3\";\r\n    case gl.FLOAT_MAT4:\r\n      return \"FLOAT_MAT4\";\r\n    case gl.SAMPLER_2D:\r\n      return \"SAMPLER_2D\";\r\n    case gl.SAMPLER_CUBE:\r\n      return \"SAMPLER_CUBE\";\r\n    default:\r\n      return \"UNKNOWN\";\r\n  }\r\n}\r\n\r\nfunction _loadShader(gl, type, source) {\r\n  const shader = gl.createShader(type);\r\n  gl.shaderSource(shader, source);\r\n  gl.compileShader(shader);\r\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\r\n    alert('An error occurred compiling the shaders: ' + gl.getShaderInfoLog(shader));\r\n    gl.deleteShader(shader);\r\n    return null;\r\n  }\r\n  return shader;\r\n}\r\n\r\nexport function loadTexture(gl, url) {\r\n  const texture = gl.createTexture();\r\n  gl.bindTexture(gl.TEXTURE_2D, texture);\r\n  const level = 0;\r\n  const internalFormat = gl.RGBA;\r\n  const width = 1;\r\n  const height = 1;\r\n  const border = 0;\r\n  const srcFormat = gl.RGBA;\r\n  const srcType = gl.UNSIGNED_BYTE;\r\n  const pixel = new Uint8Array([0, 0, 255, 255]);\r\n  gl.texImage2D(gl.TEXTURE_2D, level, internalFormat, width, height, border, srcFormat, srcType, pixel);\r\n  const image = new Image();\r\n  image.onload = () => {\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texImage2D(gl.TEXTURE_2D, level, internalFormat,\r\n      srcFormat, srcType, image);\r\n    if (_isPowerOf2(image.width) && _isPowerOf2(image.height)) {\r\n      gl.generateMipmap(gl.TEXTURE_2D);\r\n    } else {\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n      gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n    }\r\n  };\r\n  image.src = url;\r\n  return texture;\r\n}\r\n\r\nfunction _isPowerOf2(value) {\r\n  return (value & (value - 1)) === 0;\r\n}\r\n\r\nexport function clearScreen(gl) {\r\n  gl.clearColor(0.0, 0.0, 0.0, 1.0);\r\n  gl.clearDepth(1.0);\r\n  gl.enable(gl.DEPTH_TEST);\r\n  gl.depthFunc(gl.LEQUAL);\r\n  gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n}\r\n\r\nconst _directions = [\r\n  { x: -1, y: 0 },\r\n  { x: 0, y: -1 },\r\n  { x: 1, y: 0 },\r\n  { x: 0, y: 1 }\r\n];\r\n\r\nexport function generateMaze(width, height, windiness = 0.8) {\r\n  const carve = (pos) => {\r\n    data[pos.y][pos.x] = 0;\r\n  }\r\n\r\n  const canCarve = (pos, dir) => {\r\n    if (!isInBounds(addDir(pos, dir, 3))) {\r\n      return false;\r\n    }\r\n    const nxt = addDir(pos, dir, 2);\r\n    return data[nxt.y][nxt.x] === 1;\r\n  }\r\n\r\n  const isInBounds = (pos) => {\r\n    if (pos.x < 0 || pos.y < 0 || pos.x >= width || pos.y >= height) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  const addDir = (pos, dir, len) => {\r\n    return {\r\n      x: pos.x + dir.x * len,\r\n      y: pos.y + dir.y * len\r\n    }\r\n  }\r\n\r\n  const data = [];\r\n  for (let y = 0; y < height; y++) {\r\n    data.push(new Array(width).fill(1));\r\n  }\r\n\r\n  const start = { x: 1, y: 1 };\r\n  const cells = [];\r\n  let lastDir;\r\n  carve(start);\r\n  cells.push(start);\r\n  while (cells.length > 0) {\r\n    const cell = cells[cells.length - 1];\r\n    const posCells = [];\r\n    for (let i = 0; i < _directions.length; i++) {\r\n      const dir = _directions[i];\r\n      if (canCarve(cell, dir)) {\r\n        posCells.push(dir);\r\n      }\r\n    }\r\n    if (posCells.length > 0) {\r\n      let dir;\r\n      if (posCells.includes(lastDir) && Math.random() > windiness) {\r\n        dir = lastDir;\r\n      } else {\r\n        dir = posCells[Math.floor(Math.random() * posCells.length)];\r\n      }\r\n      carve(addDir(cell, dir, 1));\r\n      carve(addDir(cell, dir, 2));\r\n      cells.push(addDir(cell, dir, 2));\r\n      lastDir = dir;\r\n    } else {\r\n      cells.pop();\r\n      lastDir = null;\r\n    }\r\n  }\r\n  return {\r\n    width,\r\n    height,\r\n    data\r\n  };\r\n}\r\n\r\nexport function getShape(shape) {\r\n  if (shape === 'tetrahedron') {\r\n    const s3 = Math.sqrt(3);\r\n    const s6 = Math.sqrt(6);\r\n\r\n    const vertices = [\r\n      [s3 / 3, -s6 / 3 * 0.333 + s6 * 0.025, 0],         // right\r\n      [-s3 / 6, -s6 / 3 * 0.333 + s6 * 0.025, 1 / 2],    // left front\r\n      [-s3 / 6, -s6 / 3 * 0.333 + s6 * 0.025, -1 / 2],   // left back\r\n      [0, s6 / 3 * 0.666 + s6 * 0.025, 0]                // top\r\n    ];\r\n\r\n    const faces = [\r\n      [0, 1, 2],\r\n      [3, 1, 0],\r\n      [3, 0, 2],\r\n      [3, 2, 1]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'cube') {\r\n    const r = .3;\r\n\r\n    const vertices = [\r\n      [-r, -r, -r],\r\n      [-r, -r, r],\r\n      [r, -r, r],\r\n      [r, -r, -r],\r\n      [-r, r, -r],\r\n      [-r, r, r],\r\n      [r, r, r],\r\n      [r, r, -r]\r\n    ];\r\n\r\n    const faces = [\r\n      [0, 3, 2, 1],   // bottom\r\n      [4, 5, 6, 7],   // top\r\n      [0, 1, 5, 4],   // left\r\n      [2, 3, 7, 6],   // right\r\n      [1, 2, 6, 5],   // front\r\n      [3, 0, 4, 7]    // back\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'octahedron') {\r\n    const a = 1 / (2 * Math.sqrt(2));\r\n    const b = 1 / 2;\r\n\r\n    const vertices = [\r\n      [-a, 0, a],    // front left\r\n      [a, 0, a],     // front right\r\n      [a, 0, -a],    // back right\r\n      [-a, 0, -a],   // back left\r\n      [0, b, 0],     // top\r\n      [0, -b, 0]     // bottom\r\n    ];\r\n\r\n    const faces = [\r\n      [3, 0, 4],\r\n      [2, 3, 4],\r\n      [1, 2, 4],\r\n      [0, 1, 4],\r\n      [3, 2, 5],\r\n      [0, 3, 5],\r\n      [2, 1, 5],\r\n      [1, 0, 5]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'pentagonaltrapezohedron') {\r\n    const vertices = [\r\n      [0.210292440, 0.15278640, 0.340260320],\r\n      [-0.08032456, 0.24721360, 0.340260320],\r\n      [-0.25993576, 0.00000000, 0.340260320],\r\n      [0.210292440, -0.6472136, 0.340260320],\r\n      [0.420584800, 0.00000000, -0.08032456],\r\n      [0.340260320, 0.24721360, 0.080324560],\r\n      [-0.21029244, 0.64721360, -0.34026032],\r\n      [-0.42058480, 0.00000000, 0.080324560],\r\n      [-0.34026032, -0.2472136, -0.08032456],\r\n      [0.080324560, -0.2472136, -0.34026032],\r\n      [0.259935760, 0.00000000, -0.34026032],\r\n      [-0.21029244, -0.1527864, -0.34026032]\r\n    ];\r\n\r\n    const faces = [\r\n      [3, 0, 1, 2],\r\n      [0, 3, 4, 5],\r\n      [1, 0, 5, 6],\r\n      [2, 1, 6, 7],\r\n      [3, 2, 7, 8],\r\n      [4, 3, 9, 10],\r\n      [5, 4, 10, 6],\r\n      [7, 6, 11, 8],\r\n      [3, 8, 11, 9],\r\n      [10, 9, 11, 6]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'dodecahedron') {\r\n    const phi = (1 + Math.sqrt(5)) / 2;\r\n    const a = 0.5;\r\n    const b = 0.5 * 1 / phi;\r\n    const c = 0.5 * (2 - phi);\r\n\r\n    const vertices = [\r\n      [c, 0, a],\r\n      [-c, 0, a],\r\n      [-b, b, b],\r\n      [0, a, c],\r\n      [b, b, b],\r\n      [b, -b, b],\r\n      [0, -a, c],\r\n      [-b, -b, b],\r\n      [c, 0, -a],\r\n      [-c, 0, -a],\r\n      [-b, -b, -b],\r\n      [0, -a, -c],\r\n      [b, -b, -b],\r\n      [b, b, -b],\r\n      [0, a, -c],\r\n      [-b, b, -b],\r\n      [a, c, 0],\r\n      [-a, c, 0],\r\n      [-a, -c, 0],\r\n      [a, -c, 0]\r\n    ];\r\n\r\n    const faces = [\r\n      [4, 3, 2, 1, 0],\r\n      [7, 6, 5, 0, 1],\r\n      [12, 11, 10, 9, 8],\r\n      [15, 14, 13, 8, 9],\r\n      [14, 3, 4, 16, 13],\r\n      [3, 14, 15, 17, 2],\r\n      [11, 6, 7, 18, 10],\r\n      [6, 11, 12, 19, 5],\r\n      [4, 0, 5, 19, 16],\r\n      [12, 8, 13, 16, 19],\r\n      [15, 9, 10, 18, 17],\r\n      [7, 1, 2, 17, 18]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n\r\n  if (shape === 'icosahedron') {\r\n    const phi = (1 + Math.sqrt(5)) / 2;\r\n    const a = 1 / 2;\r\n    const b = 1 / (2 * phi);\r\n\r\n    const vertices = [\r\n      [0, b, -a],\r\n      [b, a, 0],\r\n      [-b, a, 0],\r\n      [0, b, a],\r\n      [0, -b, a],\r\n      [-a, 0, b],\r\n      [a, 0, b],\r\n      [0, -b, -a],\r\n      [a, 0, -b],\r\n      [-a, 0, -b],\r\n      [b, -a, 0],\r\n      [-b, -a, 0]\r\n    ];\r\n\r\n    const faces = [\r\n      [1, 0, 2],\r\n      [2, 3, 1],\r\n      [4, 3, 5],\r\n      [6, 3, 4],\r\n      [7, 0, 8],\r\n      [9, 0, 7],\r\n      [10, 4, 11],\r\n      [11, 7, 10],\r\n      [5, 2, 9],\r\n      [9, 11, 5],\r\n      [8, 1, 6],\r\n      [6, 10, 8],\r\n      [5, 3, 2],\r\n      [1, 3, 6],\r\n      [2, 0, 9],\r\n      [8, 0, 1],\r\n      [9, 7, 11],\r\n      [10, 7, 8],\r\n      [11, 4, 5],\r\n      [6, 4, 10]\r\n    ];\r\n\r\n    return { vertices, faces };\r\n  }\r\n}\r\n\r\nconst _materials = {\r\n  emerald: {\r\n    ambient: [0.0215, 0.1745, 0.0215], diffuse: [0.07568, 0.61424, 0.07568], specular: [0.633, 0.727811, 0.633], shininess: 0.6\r\n  },\r\n  jade: {\r\n    ambient: [0.135, 0.2225, 0.1575], diffuse: [0.54, 0.89, 0.63], specular: [0.316228, 0.316228, 0.316228], shininess: 0.1\r\n  },\r\n  obsidian: {\r\n    ambient: [0.05375, 0.05, 0.06625], diffuse: [0.18275, 0.17, 0.22525], specular: [0.332741, 0.328634, 0.346435], shininess: 0.3\r\n  },\r\n  pearl: {\r\n    ambient: [0.25, 0.20725, 0.20725], diffuse: [1, 0.829, 0.829], specular: [0.296648, 0.296648, 0.296648], shininess: 0.088\r\n  },\r\n  ruby: {\r\n    ambient: [0.1745, 0.01175, 0.01175], diffuse: [0.61424, 0.04136, 0.04136], specular: [0.727811, 0.626959, 0.626959], shininess: 0.6\r\n  },\r\n  turquoise: {\r\n    ambient: [0.1, 0.18725, 0.1745], diffuse: [0.396, 0.74151, 0.69102], specular: [0.297254, 0.30829, 0.306678], shininess: 0.1\r\n  },\r\n  brass: {\r\n    ambient: [0.329412, 0.223529, 0.027451], diffuse: [0.780392, 0.568627, 0.113725], specular: [0.992157, 0.941176, 0.807843], shininess: 0.21794872\r\n  },\r\n  bronze: {\r\n    ambient: [0.2125, 0.1275, 0.054], diffuse: [0.714, 0.4284, 0.18144], specular: [0.393548, 0.271906, 0.166721], shininess: 0.2\r\n  },\r\n  chrome: {\r\n    ambient: [0.25, 0.25, 0.25], diffuse: [0.4, 0.4, 0.4], specular: [0.774597, 0.774597, 0.774597], shininess: 0.6\r\n  },\r\n  copper: {\r\n    ambient: [0.19125, 0.0735, 0.0225], diffuse: [0.7038, 0.27048, 0.0828], specular: [0.256777, 0.137622, 0.086014], shininess: 0.1\r\n  },\r\n  gold: {\r\n    ambient: [0.24725, 0.1995, 0.0745], diffuse: [0.75164, 0.60648, 0.22648], specular: [0.628281, 0.555802, 0.366065], shininess: 0.4\r\n  },\r\n  silver: {\r\n    ambient: [0.19225, 0.19225, 0.19225], diffuse: [0.50754, 0.50754, 0.50754], specular: [0.508273, 0.508273, 0.508273], shininess: 0.4\r\n  },\r\n  blackPlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.01, 0.01, 0.01], specular: [0.50, 0.50, 0.50], shininess: 0.25\r\n  },\r\n  cyanPlastic: {\r\n    ambient: [0.0, 0.1, 0.06], diffuse: [0.0, 0.50980392, 0.50980392], specular: [0.50196078, 0.50196078, 0.50196078], shininess: 0.25\r\n  },\r\n  greenPlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.1, 0.35, 0.1], specular: [0.45, 0.55, 0.45], shininess: 0.25\r\n  },\r\n  redPlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.5, 0.0, 0.0], specular: [0.7, 0.6, 0.6], shininess: 0.25\r\n  },\r\n  whitePlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.55, 0.55, 0.55], specular: [0.70, 0.70, 0.70], shininess: 0.25\r\n  },\r\n  yellowPlastic: {\r\n    ambient: [0.0, 0.0, 0.0], diffuse: [0.5, 0.5, 0.0], specular: [0.60, 0.60, 0.50], shininess: 0.25\r\n  },\r\n  blackRubber: {\r\n    ambient: [0.02, 0.02, 0.02], diffuse: [0.01, 0.01, 0.01], specular: [0.4, 0.4, 0.4], shininess: 0.078125\r\n  },\r\n  cyanRubber: {\r\n    ambient: [0.0, 0.05, 0.05], diffuse: [0.4, 0.5, 0.5], specular: [0.04, 0.7, 0.7], shininess: 0.078125\r\n  },\r\n  greenRubber: {\r\n    ambient: [0.0, 0.05, 0.0], diffuse: [0.4, 0.5, 0.4], specular: [0.04, 0.7, 0.04], shininess: 0.078125\r\n  },\r\n  redRubber: {\r\n    ambient: [0.05, 0.0, 0.0], diffuse: [0.5, 0.4, 0.4], specular: [0.7, 0.04, 0.04], shininess: 0.078125\r\n  },\r\n  whiteRubber: {\r\n    ambient: [0.05, 0.05, 0.05], diffuse: [0.5, 0.5, 0.5], specular: [0.7, 0.7, 0.7], shininess: 0.078125\r\n  },\r\n  yellowRubber: {\r\n    ambient: [0.05, 0.05, 0.0], diffuse: [0.5, 0.5, 0.4], specular: [0.7, 0.7, 0.04], shininess: 0.078125\r\n  }\r\n};\r\n\r\nexport function getMaterialList() {\r\n  const materials = [];\r\n  for (const prop in _materials) {\r\n    if (_materials.hasOwnProperty(prop)) {\r\n      materials.push(prop);\r\n    }\r\n  }\r\n  return materials;\r\n}\r\n\r\nexport function getMaterial(name) {\r\n  return _materials[name];\r\n}\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport * as vec3 from 'gl-matrix/vec3';\r\nimport { loadTexture, initShaderProgram, getShaderParameters } from '../lib/utility'\r\n\r\nclass Model {\r\n  _initModel(options) {\r\n    const { gl, geometry } = options;\r\n    const textures = [];\r\n    if (options.texture) {\r\n      const texture = {};\r\n      if (options.texture.diffuse) {\r\n        texture.diffuse = loadTexture(gl, options.texture.diffuse);\r\n      }\r\n      if (options.texture.normal) {\r\n        texture.normal = loadTexture(gl, options.texture.normal);\r\n      }\r\n      if (options.texture.height) {\r\n        texture.height = loadTexture(gl, options.texture.height);\r\n      }\r\n      if (options.texture.occlusion) {\r\n        texture.occlusion = loadTexture(gl, options.texture.occlusion);\r\n      }\r\n      textures.push(texture);\r\n    } else if (options.textures) {\r\n      for (let i = 0; i < options.textures.length; i++) {\r\n        const texture = {};\r\n        if (options.textures[i].diffuse) {\r\n          texture.diffuse = loadTexture(gl, options.textures[i].diffuse);\r\n        }\r\n        if (options.textures[i].normal) {\r\n          texture.normal = loadTexture(gl, options.textures[i].normal);\r\n        }\r\n        if (options.textures[i].height) {\r\n          texture.height = loadTexture(gl, options.textures[i].height);\r\n        }\r\n        if (options.textures[i].occlusion) {\r\n          texture.occlusion = loadTexture(gl, options.textures[i].occlusion);\r\n        }\r\n        textures.push(texture);\r\n      }\r\n    }\r\n\r\n    if (options.shader) {\r\n      let vertexShader;\r\n      let fragmentShader;\r\n      Promise.all([\r\n        fetch(options.shader.vertex).then((response) => response.text()).then((text) => vertexShader = text),\r\n        fetch(options.shader.fragment).then((response) => response.text()).then((text) => fragmentShader = text)\r\n      ]).then(() => {\r\n        const shader = this._setupShader(gl, vertexShader, fragmentShader);\r\n        const buffers = this._initBuffers(gl, [shader], geometry, textures.length || 1);\r\n        this.model = {\r\n          shaders: [shader],\r\n          buffers,\r\n          textures\r\n        };\r\n      });\r\n    }\r\n    else {\r\n      const vertexShaders = new Array(options.shaders.length).fill(null);\r\n      const fragmentShaders = new Array(options.shaders.length).fill(null);\r\n      const pendingLoads = [];\r\n      for (let i = 0; i < options.shaders.length; i++) {\r\n        pendingLoads.push(fetch(options.shaders[i].vertex).then((response) => response.text()).then((text) => vertexShaders[i] = text));\r\n        pendingLoads.push(fetch(options.shaders[i].fragment).then((response) => response.text()).then((text) => fragmentShaders[i] = text));\r\n      }\r\n\r\n      Promise.all(pendingLoads)\r\n        .then(() => {\r\n          const shaders = [];\r\n          for (let i = 0; i < options.shaders.length; i++) {\r\n            shaders.push(this._setupShader(gl, vertexShaders[i], fragmentShaders[i]));\r\n          }\r\n          const buffers = this._initBuffers(gl, shaders, geometry, textures.length || 1);\r\n          this.model = {\r\n            shaders,\r\n            buffers,\r\n            textures\r\n          };\r\n        });\r\n    }\r\n  }\r\n\r\n  _updateModel(geometry) {\r\n    this._deleteBuffers();\r\n    this.model.buffers = this._initBuffers(this.gl, this.model.shaders, geometry, this.model.textures.length || 1);\r\n  }\r\n\r\n  _setupShader(gl, vertexShader, fragmentShader) {\r\n    const shaderProgram = initShaderProgram(gl, vertexShader, fragmentShader);\r\n    const shaderParameters = getShaderParameters(gl, shaderProgram);\r\n    const shader = {\r\n      program: shaderProgram,\r\n      attribLocations: {},\r\n      uniformLocations: {}\r\n    };\r\n    shaderParameters.attributes.forEach((attribute) => {\r\n      const location = gl.getAttribLocation(shaderProgram, attribute.name)\r\n      this._addShaderNameToJavascript(shader.attribLocations, attribute.name, location);\r\n    });\r\n    shaderParameters.uniforms.forEach((uniform) => {\r\n      const location = gl.getUniformLocation(shaderProgram, uniform.name)\r\n      this._addShaderNameToJavascript(shader.uniformLocations, uniform.name, location);\r\n    });\r\n    return shader;\r\n  }\r\n\r\n  _addShaderNameToJavascript(shaderLocations, inputName, location) {\r\n    if (inputName[0] !== 'a' && inputName[0] !== 'u') {\r\n      alert('shader name of ' + inputName + ' is not valid');\r\n      return;\r\n    }\r\n    let outputName = inputName[1].toLowerCase() + inputName.slice(2);\r\n    const names = outputName.split('.');\r\n    let out = shaderLocations;\r\n    for (let i = 0; i < names.length; i++) {\r\n      let name = names[i];\r\n      const subBeg = name.indexOf('[');\r\n      if (subBeg !== -1) {\r\n        const subEnd = name.indexOf(']');\r\n        if (subEnd < subBeg + 2) {\r\n          alert('shader name of ' + inputName + ' is not valid');\r\n          return;\r\n        }\r\n        const index = Number(name.slice(subBeg + 1, subEnd));\r\n        name = name.slice(0, subBeg);\r\n        if (i < names.length - 1) {\r\n          if (!out[name]) {\r\n            out[name] = [];\r\n          }\r\n          if (out[name].length <= index) {\r\n            out[name].length = index + 1;\r\n          }\r\n          if (!out[name][index]) {\r\n            out[name][index] = {};\r\n          }\r\n          out = out[name][index];\r\n        } else {\r\n          if (!out[name]) {\r\n            out[name] = [];\r\n          }\r\n          if (out[name].length <= index) {\r\n            out[name].length = index + 1;\r\n          }\r\n          out[name][index] = location;\r\n        }\r\n      } else {\r\n        if (i < names.length - 1) {\r\n          if (!out[name]) {\r\n            out[name] = {};\r\n          }\r\n          out = out[name];\r\n        } else {\r\n          out[name] = location;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _initBuffers(gl, shaders, geometry, bufferCount) {\r\n    const requirements = {};\r\n\r\n    for (let i = 0; i < shaders.length; i++) {\r\n      const shader = shaders[i];\r\n\r\n      if (shader.attribLocations.vertexNormal) {\r\n        requirements.vertexNormal = true;\r\n      }\r\n\r\n      if (shader.attribLocations.vertexTangent) {\r\n        requirements.vertexTangent = true;\r\n      }\r\n\r\n      if (shader.attribLocations.vertexBitangent) {\r\n        requirements.vertexBitangent = true;\r\n      }\r\n\r\n      if (shader.attribLocations.textureCoord) {\r\n        requirements.textureCoord = true;\r\n      }\r\n\r\n      if (shader.attribLocations.vertexColor) {\r\n        requirements.vertexColor = true;\r\n      }\r\n    }\r\n\r\n    const normal = vec3.create();\r\n    const tangent = vec3.create();\r\n    const bitangent = vec3.create();\r\n\r\n    const inputBuffers = [];\r\n\r\n    for (let i = 0; i < bufferCount; i++) {\r\n      inputBuffers.push({\r\n        positions: [],\r\n        normals: [],\r\n        tangents: [],\r\n        bitangents: [],\r\n        textureCoordinates: [],\r\n        colors: [],\r\n        indices: [],\r\n        offset: 0\r\n      });\r\n    }\r\n\r\n    const addSquare = (c0, c1, c2, c3, options) => {\r\n      let inputBuffer;\r\n      if (options && options.bufferIndex) {\r\n        inputBuffer = inputBuffers[options.bufferIndex];\r\n      } else {\r\n        inputBuffer = inputBuffers[0];\r\n      }\r\n\r\n      const { positions, normals, tangents, bitangents, textureCoordinates, colors, indices, offset } = inputBuffer;\r\n\r\n      positions.push(...c0, ...c1, ...c2, ...c3);\r\n      indices.push(offset + 0, offset + 1, offset + 2, offset + 2, offset + 3, offset + 0);\r\n      inputBuffer.offset += 4;\r\n\r\n      if (requirements.vertexNormal || requirements.vertexTangent || requirements.vertexBitangent) {\r\n        vec3.subtract(tangent, c1, c0);\r\n        vec3.subtract(bitangent, c3, c0);\r\n\r\n        if (requirements.vertexNormal) {\r\n          vec3.cross(normal, tangent, bitangent);\r\n          vec3.normalize(normal, normal);\r\n          normals.push(...normal, ...normal, ...normal, ...normal);\r\n        }\r\n\r\n        if (requirements.vertexTangent) {\r\n          vec3.normalize(tangent, tangent);\r\n          tangents.push(...tangent, ...tangent, ...tangent, ...tangent);\r\n        }\r\n\r\n        if (requirements.vertexBitangent) {\r\n          vec3.normalize(bitangent, bitangent);\r\n          bitangents.push(...bitangent, ...bitangent, ...bitangent, ...bitangent);\r\n        }\r\n      }\r\n\r\n      if (requirements.textureCoord) {\r\n        textureCoordinates.push(0, 0, 1, 0, 1, 1, 0, 1);\r\n      }\r\n\r\n      if (requirements.vertexColor) {\r\n        colors.push(...options.color, ...options.color, ...options.color, ...options.color);\r\n      }\r\n    }\r\n\r\n    const addTriangle = (c0, c1, c2, options) => {\r\n      let inputBuffer;\r\n      if (options.bufferIndex) {\r\n        inputBuffer = inputBuffers[options.bufferIndex];\r\n      } else {\r\n        inputBuffer = inputBuffers[0];\r\n      }\r\n\r\n      const { positions, normals, tangents, bitangents, colors, indices, offset } = inputBuffer;\r\n\r\n      positions.push(...c0, ...c1, ...c2);\r\n      indices.push(offset + 0, offset + 1, offset + 2);\r\n      inputBuffer.offset += 3;\r\n\r\n      if (requirements.vertexNormal || requirements.vertexTangent || requirements.vertexBitangent) {\r\n        vec3.subtract(tangent, c1, c0);\r\n        vec3.subtract(bitangent, c2, c0);\r\n\r\n        if (requirements.vertexNormal) {\r\n          vec3.cross(normal, tangent, bitangent);\r\n          vec3.normalize(normal, normal);\r\n          normals.push(...normal, ...normal, ...normal);\r\n        }\r\n\r\n        if (requirements.vertexTangent) {\r\n          vec3.normalize(tangent, tangent);\r\n          tangents.push(...tangent, ...tangent, ...tangent);\r\n        }\r\n\r\n        if (requirements.vertexBitangent) {\r\n          vec3.normalize(bitangent, bitangent);\r\n          bitangents.push(...bitangent, ...bitangent, ...bitangent);\r\n        }\r\n      }\r\n\r\n      if (requirements.vertexColor) {\r\n        colors.push(...options.color, ...options.color, ...options.color);\r\n      }\r\n    }\r\n\r\n    const addPentagon = (c0, c1, c2, c3, c4, options) => {\r\n      let inputBuffer;\r\n      if (options.bufferIndex) {\r\n        inputBuffer = inputBuffers[options.bufferIndex];\r\n      } else {\r\n        inputBuffer = inputBuffers[0];\r\n      }\r\n\r\n      const { positions, normals, tangents, bitangents, colors, indices, offset } = inputBuffer;\r\n\r\n      positions.push(...c0, ...c1, ...c2, ...c3, ...c4);\r\n      indices.push(offset + 0, offset + 3, offset + 4, offset + 0, offset + 1, offset + 3, offset + 1, offset + 2, offset + 3);\r\n      inputBuffer.offset += 5;\r\n\r\n      if (requirements.vertexNormal || requirements.vertexTangent || requirements.vertexBitangent) {\r\n        vec3.subtract(tangent, c1, c0);\r\n        vec3.subtract(bitangent, c4, c0);\r\n\r\n        if (requirements.vertexNormal) {\r\n          vec3.cross(normal, tangent, bitangent);\r\n          vec3.normalize(normal, normal);\r\n          normals.push(...normal, ...normal, ...normal, ...normal, ...normal);\r\n        }\r\n\r\n        if (requirements.vertexTangent) {\r\n          vec3.normalize(tangent, tangent);\r\n          tangents.push(...tangent, ...tangent, ...tangent, ...tangent, ...tangent);\r\n        }\r\n\r\n        if (requirements.vertexBitangent) {\r\n          vec3.normalize(bitangent, bitangent);\r\n          bitangents.push(...bitangent, ...bitangent, ...bitangent, ...bitangent, ...bitangent);\r\n        }\r\n      }\r\n\r\n      if (requirements.vertexColor) {\r\n        colors.push(...options.color, ...options.color, ...options.color, ...options.color, ...options.color);\r\n      }\r\n    }\r\n\r\n    const addFace = (vertices, face, options) => {\r\n      switch (face.length) {\r\n        case 3:\r\n          addTriangle(vertices[face[0]], vertices[face[1]], vertices[face[2]], options);\r\n          break;\r\n        case 4:\r\n          addSquare(vertices[face[0]], vertices[face[1]], vertices[face[2]], vertices[face[3]], options);\r\n          break;\r\n        case 5:\r\n          addPentagon(vertices[face[0]], vertices[face[1]], vertices[face[2]], vertices[face[3]], vertices[face[4]], options);\r\n          break;\r\n        default:\r\n          alert('faces with ' + face.length + ' vertices are not supported');\r\n      }\r\n    }\r\n\r\n    const addFaces = (vertices, faces, options) => {\r\n      for (let i = 0; i < faces.length; i++) {\r\n        let option = {}\r\n        if (options) {\r\n          if (options.colors) {\r\n            option.color = options.colors[i % options.colors.length];\r\n          }\r\n        }\r\n        addFace(vertices, faces[i], option);\r\n      }\r\n    }\r\n\r\n    geometry({ addSquare, addFaces });\r\n\r\n    const outputBuffers = [];\r\n\r\n    for (let i = 0; i < bufferCount; i++) {\r\n      const inputBuffer = inputBuffers[i];\r\n      const { positions, normals, tangents, bitangents, textureCoordinates, colors, indices } = inputBuffer;\r\n\r\n      const positionBuffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\r\n\r\n      const indexBuffer = gl.createBuffer();\r\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\r\n      gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), gl.STATIC_DRAW);\r\n\r\n      const outputBuffer = { position: positionBuffer, indices: indexBuffer, vertexCount: indices.length }\r\n\r\n      if (requirements.vertexNormal) {\r\n        const normalBuffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, normalBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(normals), gl.STATIC_DRAW);\r\n        outputBuffer.normal = normalBuffer;\r\n      }\r\n\r\n      if (requirements.vertexTangent) {\r\n        const tangentBuffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, tangentBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(tangents), gl.STATIC_DRAW);\r\n        outputBuffer.tangent = tangentBuffer;\r\n      }\r\n\r\n      if (requirements.vertexBitangent) {\r\n        const bitangentBuffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, bitangentBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(bitangents), gl.STATIC_DRAW);\r\n        outputBuffer.bitangent = bitangentBuffer;\r\n      }\r\n\r\n      if (requirements.textureCoord) {\r\n        const textureCoordBuffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, textureCoordBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(textureCoordinates), gl.STATIC_DRAW);\r\n        outputBuffer.textureCoord = textureCoordBuffer;\r\n      }\r\n\r\n      if (requirements.vertexColor) {\r\n        const colorBuffer = gl.createBuffer();\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, colorBuffer);\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(colors), gl.STATIC_DRAW);\r\n        outputBuffer.color = colorBuffer;\r\n      }\r\n\r\n      outputBuffers.push(outputBuffer);\r\n    }\r\n\r\n    return outputBuffers;\r\n  }\r\n\r\n  _deleteBuffers() {\r\n    const buffers = this.model.buffers;\r\n    for (let i = 0; i < buffers.length; i++) {\r\n      const buffer = buffers[i];\r\n      buffer.vertexCount = 0;\r\n      for (const prop in buffer) {\r\n        if (buffer.hasOwnProperty(prop) && typeof buffer[prop] === 'object') {\r\n          this.gl.deleteBuffer(buffer[prop]);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  _drawModel(options) {\r\n    if (!options.model) {\r\n      return;\r\n    }\r\n\r\n    const { gl, model, projectionMatrix, viewMatrix, modelMatrix } = options;\r\n    const { shaders, buffers, textures } = model;\r\n    const shader = shaders[options.shaderIndex ? options.shaderIndex : 0];\r\n\r\n    for (let i = 0; i < buffers.length; i++) {\r\n      const buffer = buffers[i];\r\n      const texture = textures[i];\r\n\r\n      {\r\n        const numComponents = 3;\r\n        const type = gl.FLOAT;\r\n        const normalize = false;\r\n        const stride = 0;\r\n        const offset = 0;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer.position);\r\n        gl.vertexAttribPointer(shader.attribLocations.vertexPosition, numComponents, type, normalize, stride, offset);\r\n        gl.enableVertexAttribArray(shader.attribLocations.vertexPosition);\r\n      }\r\n\r\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, buffer.indices);\r\n\r\n      if (shader.attribLocations.vertexNormal && buffer.normal) {\r\n        const numComponents = 3;\r\n        const type = gl.FLOAT;\r\n        const normalize = false;\r\n        const stride = 0;\r\n        const offset = 0;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer.normal);\r\n        gl.vertexAttribPointer(shader.attribLocations.vertexNormal, numComponents, type, normalize, stride, offset);\r\n        gl.enableVertexAttribArray(shader.attribLocations.vertexNormal);\r\n      }\r\n\r\n      if (shader.attribLocations.vertexTangent && buffer.tangent) {\r\n        const numComponents = 3;\r\n        const type = gl.FLOAT;\r\n        const normalize = false;\r\n        const stride = 0;\r\n        const offset = 0;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer.tangent);\r\n        gl.vertexAttribPointer(shader.attribLocations.vertexTangent, numComponents, type, normalize, stride, offset);\r\n        gl.enableVertexAttribArray(shader.attribLocations.vertexTangent);\r\n      }\r\n\r\n      if (shader.attribLocations.vertexBitangent && buffer.bitangent) {\r\n        const numComponents = 3;\r\n        const type = gl.FLOAT;\r\n        const normalize = false;\r\n        const stride = 0;\r\n        const offset = 0;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer.bitangent);\r\n        gl.vertexAttribPointer(shader.attribLocations.vertexBitangent, numComponents, type, normalize, stride, offset);\r\n        gl.enableVertexAttribArray(shader.attribLocations.vertexBitangent);\r\n      }\r\n\r\n      if (shader.attribLocations.textureCoord && buffer.textureCoord) {\r\n        const numComponents = 2;\r\n        const type = gl.FLOAT;\r\n        const normalize = false;\r\n        const stride = 0;\r\n        const offset = 0;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer.textureCoord);\r\n        gl.vertexAttribPointer(shader.attribLocations.textureCoord, numComponents, type, normalize, stride, offset);\r\n        gl.enableVertexAttribArray(shader.attribLocations.textureCoord);\r\n      }\r\n\r\n      if (shader.attribLocations.vertexColor && buffer.color) {\r\n        const numComponents = 3;\r\n        const type = gl.FLOAT;\r\n        const normalize = false;\r\n        const stride = 0;\r\n        const offset = 0;\r\n        gl.bindBuffer(gl.ARRAY_BUFFER, buffer.color);\r\n        gl.vertexAttribPointer(shader.attribLocations.vertexColor, numComponents, type, normalize, stride, offset);\r\n        gl.enableVertexAttribArray(shader.attribLocations.vertexColor);\r\n      }\r\n\r\n      gl.useProgram(shader.program);\r\n      gl.uniformMatrix4fv(shader.uniformLocations.projectionMatrix, false, projectionMatrix);\r\n      gl.uniformMatrix4fv(shader.uniformLocations.modelMatrix, false, modelMatrix);\r\n      gl.uniformMatrix4fv(shader.uniformLocations.viewMatrix, false, viewMatrix);\r\n\r\n      if (shader.uniformLocations.normalMatrix) {\r\n        const normalMatrix = mat4.create();\r\n        mat4.invert(normalMatrix, modelMatrix);\r\n        mat4.transpose(normalMatrix, normalMatrix);\r\n        gl.uniformMatrix4fv(shader.uniformLocations.normalMatrix, false, normalMatrix);\r\n      }\r\n\r\n      if (shader.uniformLocations.showDiffuseMap && options.showDiffuseMap !== undefined) {\r\n        gl.uniform1i(shader.uniformLocations.showDiffuseMap, options.showDiffuseMap);\r\n      }\r\n\r\n      if (shader.uniformLocations.showNormalMap && options.showNormalMap !== undefined) {\r\n        gl.uniform1i(shader.uniformLocations.showNormalMap, options.showNormalMap);\r\n      }\r\n\r\n      if (shader.uniformLocations.showAmbientOcclusionMap && options.showAmbientOcclusionMap !== undefined) {\r\n        gl.uniform1i(shader.uniformLocations.showAmbientOcclusionMap, options.showAmbientOcclusionMap);\r\n      }\r\n\r\n      if (shader.uniformLocations.lightingModel && options.lightingModel !== undefined) {\r\n        gl.uniform1i(shader.uniformLocations.lightingModel, options.lightingModel);\r\n      }\r\n\r\n      if (shader.uniformLocations.parallaxHeightScale && options.parallaxHeightScale !== undefined) {\r\n        gl.uniform1f(shader.uniformLocations.parallaxHeightScale, options.parallaxHeightScale);\r\n      }\r\n\r\n      if (shader.uniformLocations.parallaxSteps && options.parallaxSteps !== undefined) {\r\n        gl.uniform1i(shader.uniformLocations.parallaxSteps, options.parallaxSteps);\r\n      }\r\n\r\n      if (shader.uniformLocations.parallaxOcclusionMapping && options.parallaxOcclusionMapping !== undefined) {\r\n        gl.uniform1i(shader.uniformLocations.parallaxOcclusionMapping, options.parallaxOcclusionMapping);\r\n      }\r\n\r\n      if (shader.uniformLocations.ambientLight && options.ambientLight) {\r\n        gl.uniform3fv(shader.uniformLocations.ambientLight, options.ambientLight);\r\n      }\r\n\r\n      if (shader.uniformLocations.directionalLight && options.directionalLight) {\r\n        const direction = vec3.clone(options.directionalLight.direction);\r\n        vec3.normalize(direction, direction);\r\n        gl.uniform3fv(shader.uniformLocations.directionalLight.color, options.directionalLight.color);\r\n        gl.uniform3fv(shader.uniformLocations.directionalLight.direction, direction);\r\n      }\r\n\r\n      if (shader.uniformLocations.pointLight && options.pointLight) {\r\n        gl.uniform3fv(shader.uniformLocations.pointLight.color, options.pointLight.color);\r\n        gl.uniform3fv(shader.uniformLocations.pointLight.position, options.pointLight.position);\r\n      }\r\n\r\n      if (shader.uniformLocations.lights && options.lights) {\r\n        const lights = options.lights;\r\n        for (let i = 0; i < lights.length; i++) {\r\n          const light = lights[i];\r\n          gl.uniform3fv(shader.uniformLocations.lights[i].position, light.position);\r\n          gl.uniform3fv(shader.uniformLocations.lights[i].ambient, light.ambient);\r\n          gl.uniform3fv(shader.uniformLocations.lights[i].diffuse, light.diffuse);\r\n          gl.uniform3fv(shader.uniformLocations.lights[i].specular, light.specular);\r\n        }\r\n      }\r\n\r\n      if (shader.uniformLocations.material && options.material) {\r\n        const material = options.material;\r\n        gl.uniform3fv(shader.uniformLocations.material.ambient, material.ambient);\r\n        gl.uniform3fv(shader.uniformLocations.material.diffuse, material.diffuse);\r\n        gl.uniform3fv(shader.uniformLocations.material.specular, material.specular);\r\n        gl.uniform1f(shader.uniformLocations.material.shininess, material.shininess);\r\n      }\r\n\r\n      if (shader.uniformLocations.cameraPos && options.cameraPos) {\r\n        gl.uniform3fv(shader.uniformLocations.cameraPos, options.cameraPos);\r\n      }\r\n\r\n      if (shader.uniformLocations.samplerDiffuse && texture.diffuse) {\r\n        gl.activeTexture(gl.TEXTURE0);\r\n        gl.bindTexture(gl.TEXTURE_2D, texture.diffuse);\r\n        gl.uniform1i(shader.uniformLocations.samplerDiffuse, 0);\r\n      }\r\n\r\n      if (shader.uniformLocations.samplerNormal && texture.normal) {\r\n        gl.activeTexture(gl.TEXTURE1);\r\n        gl.bindTexture(gl.TEXTURE_2D, texture.normal);\r\n        gl.uniform1i(shader.uniformLocations.samplerNormal, 1);\r\n      }\r\n\r\n      if (shader.uniformLocations.samplerHeight && texture.height) {\r\n        gl.activeTexture(gl.TEXTURE2);\r\n        gl.bindTexture(gl.TEXTURE_2D, texture.height);\r\n        gl.uniform1i(shader.uniformLocations.samplerHeight, 2);\r\n      }\r\n\r\n      if (shader.uniformLocations.samplerOcclusion && texture.occlusion) {\r\n        gl.activeTexture(gl.TEXTURE3);\r\n        gl.bindTexture(gl.TEXTURE_2D, texture.occlusion);\r\n        gl.uniform1i(shader.uniformLocations.samplerOcclusion, 3);\r\n      }\r\n\r\n      {\r\n        const vertexCount = buffer.vertexCount;\r\n        const type = gl.UNSIGNED_SHORT;\r\n        const offset = 0;\r\n        gl.drawElements(gl.TRIANGLES, vertexCount, type, offset);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default Model;\r\n","import Model from './Model';\r\nimport { getShape } from '../lib/utility';\r\n\r\nclass ColorModel extends Model {\r\n  constructor(gl, shapeName, colors) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: ({ addFaces }) => {\r\n        const shape = getShape(shapeName);\r\n        addFaces(shape.vertices, shape.faces, { colors });\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/color_L/vertex.glsl',\r\n        fragment: 'shaders/color_L/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix, options) {\r\n    const {\r\n      ambientLight,\r\n      directionalLight,\r\n      pointLight,\r\n      cameraPos,\r\n      lightingModel\r\n    } = options;\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      ambientLight,\r\n      directionalLight,\r\n      pointLight,\r\n      cameraPos,\r\n      lightingModel\r\n    });\r\n  }\r\n}\r\n\r\nexport default ColorModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen } from '../lib/utility'\r\nimport ColorModel from '../models/ColorModel';\r\n\r\nclass ColorScene {\r\n  constructor() {\r\n    this.setOption = this.setOption.bind(this);\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n    this.renderOptions = {\r\n      ambientLight: [0.2, 0.2, 0.2],\r\n      directionalLight: {\r\n        color: [0.5, 0.5, 0.5],\r\n        direction: [-1.0, -1.0, 0.0]\r\n      },\r\n      pointLight: {\r\n        color: [0.7, 0.7, 0.7],\r\n        position: [1.0, 1.0, 0.0]\r\n      },\r\n      cameraPos: [0.0, 0.0, 0.0],\r\n      lightingModel: 0\r\n    };\r\n    this.options = [\r\n      {\r\n        description: 'Colored cube and dodecahedron with no lighting',\r\n        type: 'description'\r\n      },\r\n      {\r\n        name: 'Lighting Model',\r\n        id: 'lightingModel',\r\n        type: 'select',\r\n        options: ['Unlit', 'Vertex Lighting', 'Fragment Lighting'],\r\n        value: this.renderOptions.lightingModel\r\n      }\r\n    ];\r\n  }\r\n\r\n  setOption(option, value) {\r\n    option.value = Number(value);\r\n    this.renderOptions[option.id] = option.value;\r\n  }\r\n\r\n  initScene(gl) {\r\n    const colors1 = [\r\n      [0.0, 0.0, 1.0],    // Bottom face: blue\r\n      [0.0, 1.0, 0.0],    // Top face: green\r\n      [1.0, 0.0, 1.0],    // Left face: purple\r\n      [1.0, 1.0, 0.0],    // Right face: yellow\r\n      [1.0, 1.0, 1.0],    // Front face: white\r\n      [1.0, 0.0, 0.0]     // Back face: red\r\n    ];\r\n    const model6 = new ColorModel(gl, 'cube', colors1);\r\n    const colors2 = [\r\n      [1.0, 0.0, 0.0],\r\n      [0.0, 0.0, 1.0],\r\n      [0.0, 1.0, 0.0],\r\n      [1.0, 1.0, 0.0],\r\n      [0.0, 1.0, 1.0],\r\n      [1.0, 0.0, 1.0],\r\n      [1.0, 0.5, 0.0],\r\n      [0.0, 1.0, 0.5],\r\n      [1.0, 0.0, 0.5],\r\n      [0.5, 1.0, 0.0],\r\n      [0.0, 0.5, 1.0],\r\n      [0.5, 0.0, 1.0]\r\n    ];\r\n    const model12 = new ColorModel(gl, 'dodecahedron', colors2);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model: model6,\r\n          location: [-1.6, 0.0, -6.0],\r\n          scale: [3.0, 3.0, 3.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 1.0\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.7\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model12,\r\n          location: [1.6, 0.0, -6.0],\r\n          scale: [2.8, 2.8, 2.8],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 1.0\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.7\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    if (actor.scale) {\r\n      mat4.scale(modelMatrix, modelMatrix, actor.scale);\r\n    }\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      mat4.rotate(modelMatrix, modelMatrix, rotation.angle, rotation.axis);\r\n    }\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix, this.renderOptions);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      rotation.angle += deltaTime * rotation.speed;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ColorScene;\r\n","import Model from './Model';\r\n\r\nclass TexturedCubeModel extends Model {\r\n  constructor(gl) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: this._geometry,\r\n      texture: {\r\n        diffuse: 'images/cubetexture.png'\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/texture_LD/vertex.glsl',\r\n        fragment: 'shaders/texture_LD/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix, options) {\r\n    const {\r\n      ambientLight,\r\n      directionalLight,\r\n      pointLight,\r\n      cameraPos,\r\n      lightingModel\r\n    } = options;\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      ambientLight,\r\n      directionalLight,\r\n      pointLight,\r\n      cameraPos,\r\n      lightingModel\r\n    });\r\n  }\r\n\r\n  _geometry({ addSquare }) {\r\n    const f0 = [-1, -1, 1];\r\n    const f1 = [1, -1, 1];\r\n    const f2 = [1, 1, 1];\r\n    const f3 = [-1, 1, 1];\r\n    const b0 = [-1, -1, -1];\r\n    const b1 = [1, -1, -1];\r\n    const b2 = [1, 1, -1];\r\n    const b3 = [-1, 1, -1];\r\n    addSquare(f0, f1, f2, f3);  // front\r\n    addSquare(b1, b0, b3, b2);  // back\r\n    addSquare(b0, f0, f3, b3);  // left\r\n    addSquare(f1, b1, b2, f2);  // right\r\n    addSquare(b0, b1, f1, f0);  // bottom\r\n    addSquare(b2, b3, f3, f2);  // top\r\n  }\r\n}\r\n\r\nexport default TexturedCubeModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen } from '../lib/utility'\r\nimport TexturedCubeModel from '../models/TexturedCubeModel';\r\n\r\nclass TexturedCubeScene {\r\n  constructor() {\r\n    this.setOption = this.setOption.bind(this);\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n    this.renderOptions = {\r\n      ambientLight: [0.2, 0.2, 0.2],\r\n      directionalLight: {\r\n        color: [0.5, 0.5, 0.5],\r\n        direction: [-1.0, -1.0, 0.0]\r\n      },\r\n      pointLight: {\r\n        color: [0.7, 0.7, 0.7],\r\n        position: [1.0, 1.0, 0.0]\r\n      },\r\n      cameraPos: [0.0, 0.0, 0.0],\r\n      lightingModel: 0\r\n    };\r\n    this.options = [\r\n      {\r\n        description: 'Textured cube with diffuse map only and no lighting',\r\n        type: 'description'\r\n      },\r\n      {\r\n        name: 'Lighting Model',\r\n        id: 'lightingModel',\r\n        type: 'select',\r\n        options: ['Unlit', 'Vertex Lighting', 'Fragment Lighting'],\r\n        value: this.renderOptions.lightingModel\r\n      }\r\n    ];\r\n    this.credits = [\r\n      'Texture from MDN WebGL Tutorial',\r\n      'link:https://developer.mozilla.org/en-US/docs/Web/API/WebGL_API/Tutorial'\r\n    ];\r\n  }\r\n\r\n  setOption(option, value) {\r\n    option.value = Number(value);\r\n    this.renderOptions[option.id] = option.value;\r\n  }\r\n\r\n  initScene(gl) {\r\n    const model = new TexturedCubeModel(gl);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model,\r\n          location: [0.0, 0.0, -6.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 1.0\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.7\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      mat4.rotate(modelMatrix, modelMatrix, rotation.angle, rotation.axis);\r\n    }\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix, this.renderOptions);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      rotation.angle += deltaTime * rotation.speed;\r\n    }\r\n  }\r\n}\r\n\r\nexport default TexturedCubeScene;\r\n","import Model from './Model';\r\n\r\nclass MazeModel extends Model {\r\n  constructor(gl, maze) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this.update = this.update.bind(this);\r\n    this._geometry = this._geometry.bind(this);\r\n    this.maze = maze;\r\n    this._initModel({\r\n      gl,\r\n      geometry: this._geometry,\r\n      shaders: [\r\n        {\r\n          vertex: 'shaders/color_L/vertex.glsl',\r\n          fragment: 'shaders/color_L/fragment.glsl'\r\n        },\r\n        {\r\n          vertex: 'shaders/material_L/vertex.glsl',\r\n          fragment: 'shaders/material_L/fragment.glsl'\r\n        }\r\n      ]\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix, shaderIndex, lights, material) {\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      shaderIndex,\r\n      lights,\r\n      material,\r\n      lightingModel: 0\r\n    });\r\n  }\r\n\r\n  update(maze) {\r\n    this.maze = maze;\r\n    this._updateModel(this._geometry);\r\n  }\r\n\r\n  _geometry({ addSquare }) {\r\n    const maze = this.maze;\r\n\r\n    const floorColor = [.2, .2, .2];\r\n    const ceilingColor = [.7, .7, .7];\r\n    const wallColor_Back = [.5, 0, .5];\r\n    const wallColor_Front = [0, .5, 0];\r\n    const wallColor_Left = [.5, 0, 0];\r\n    const wallColor_Right = [0, .0, .5];\r\n\r\n    const ofs_x = -maze.width / 2;\r\n    const ofs_y = -maze.height / 2;\r\n    for (let y = 0; y < maze.height; y++) {\r\n      for (let x = 0; x < maze.width; x++) {\r\n        const left = x + ofs_x;\r\n        const right = left + 1;\r\n        const back = y + ofs_y;\r\n        const front = back + 1;\r\n        const top = 1;\r\n        const bottom = 0;\r\n\r\n        const f0 = [left, top, front];\r\n        const f1 = [right, top, front];\r\n        const f2 = [right, bottom, front];\r\n        const f3 = [left, bottom, front];\r\n        const b0 = [left, top, back];\r\n        const b1 = [right, top, back];\r\n        const b2 = [right, bottom, back];\r\n        const b3 = [left, bottom, back];\r\n\r\n        if (maze.data[y][x] === 0) {\r\n          addSquare(b2, b3, f3, f2, { color: floorColor });\r\n        } else {\r\n          addSquare(b1, b0, f0, f1, { color: ceilingColor });\r\n\r\n          if (y === 0 || maze.data[y - 1][x] === 0) {\r\n            addSquare(b0, b1, b2, b3, { color: wallColor_Back });\r\n          }\r\n\r\n          if (x === 0 || maze.data[y][x - 1] === 0) {\r\n            addSquare(f0, b0, b3, f3, { color: wallColor_Left });\r\n          }\r\n\r\n          if (y === maze.height - 1 || maze.data[y + 1][x] === 0) {\r\n            addSquare(f1, f0, f3, f2, { color: wallColor_Front });\r\n          }\r\n\r\n          if (x === maze.width - 1 || maze.data[y][x + 1] === 0) {\r\n            addSquare(b1, f1, f2, b2, { color: wallColor_Right });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default MazeModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen, degreesToRadians, generateMaze, getMaterialList, getMaterial } from '../lib/utility'\r\nimport MazeModel from '../models/MazeModel';\r\n\r\nclass MazeScene {\r\n  constructor() {\r\n    this.setOption = this.setOption.bind(this);\r\n    this.initScene = this.initScene.bind(this);\r\n    this.updateScene = this.updateScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n    this.totalDelta = 0.0;\r\n\r\n    this.options = [\r\n      {\r\n        description: 'Random maze geometry with colors or materials using Phong shading',\r\n        type: 'description'\r\n      },\r\n      {\r\n        name: 'Material',\r\n        type: 'select',\r\n        options: ['useColors', ...getMaterialList()]\r\n      },\r\n      {\r\n        name: 'Update Maze',\r\n        type: 'function',\r\n        function: this.updateScene\r\n      }\r\n    ];\r\n\r\n    this.setOption(this.options[1], 1);\r\n\r\n    this.credits = [\r\n      'Maze generation is based on this article',\r\n      'link:https://journal.stuffwithstuff.com/2014/12/21/rooms-and-mazes/'\r\n    ]\r\n  }\r\n\r\n  setOption(option, value) {\r\n    option.value = Number(value);\r\n\r\n    if (option.name === 'Material') {\r\n      const materialName = option.options[option.value];\r\n      if (materialName !== 'useColors') {\r\n        this.material = getMaterial(materialName);\r\n      } else {\r\n        this.material = undefined;\r\n      }\r\n    }\r\n  }\r\n\r\n  initScene(gl) {\r\n    const { size, maze } = this._generateMaze();\r\n\r\n    const model = new MazeModel(gl, maze);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model,\r\n          location: [0.0, 0.0, -2.0 * size],\r\n          rotation: { angle: 0.0, axis: [0, 1, 0], speed: 0.5 }\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n  }\r\n\r\n  updateScene() {\r\n    const { size, maze } = this._generateMaze();\r\n    this.scene.actors[0].location = [0.0, 0.0, -2.0 * size];\r\n    this.scene.actors[0].model.update(maze);\r\n  }\r\n\r\n  _generateMaze() {\r\n    const size = Math.floor(Math.random() * 35) * 2 + 11;\r\n    const maze = generateMaze(size, size);\r\n    return { size, maze };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 500.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    actor.material = this.material;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    mat4.rotate(modelMatrix, modelMatrix, degreesToRadians(45), [1, 0, 0]);\r\n    mat4.rotate(modelMatrix, modelMatrix, actor.rotation.angle, actor.rotation.axis);\r\n\r\n    if (actor.material) {\r\n      const lights = [\r\n        {\r\n          position: [10.0, -10.0, 0.0],\r\n          ambient: [0.2, 0.2, 0.2],\r\n          diffuse: [0.5, 0.5, 0.5],\r\n          specular: [0.9, 0.9, 0.9]\r\n        },\r\n        {\r\n          position: [-10.0, 10.0, 0.0],\r\n          ambient: [0.2, 0.2, 0.2],\r\n          diffuse: [0.5, 0.5, 0.5],\r\n          specular: [0.9, 0.9, 0.9]\r\n        }\r\n      ];\r\n\r\n      model.draw(projectionMatrix, viewMatrix, modelMatrix, 1, lights, actor.material);\r\n    } else {\r\n      model.draw(projectionMatrix, viewMatrix, modelMatrix);\r\n    }\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    actor.rotation.angle += deltaTime * actor.rotation.speed;\r\n  }\r\n}\r\n\r\nexport default MazeScene;\r\n","import Model from './Model';\r\n\r\nclass BrickWallModel extends Model {\r\n  constructor(gl) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: this._geometry,\r\n      texture: {\r\n        diffuse: 'images/Brick_Wall_017_basecolor.jpg',\r\n        normal: 'images/Brick_Wall_017_normal.jpg',\r\n        height: 'images/Brick_Wall_017_height.png',\r\n        occlusion: 'images/Brick_Wall_017_ambientOcclusion.jpg'\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/texture_LDNOP/vertex.glsl',\r\n        fragment: 'shaders/texture_LDNOP/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix, options) {\r\n    const {\r\n      showDiffuseMap,\r\n      showNormalMap,\r\n      showAmbientOcclusionMap,\r\n      parallaxHeightScale,\r\n      parallaxSteps,\r\n      parallaxOcclusionMapping,\r\n    } = options;\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      showDiffuseMap,\r\n      showNormalMap,\r\n      showAmbientOcclusionMap,\r\n      parallaxHeightScale,\r\n      parallaxSteps,\r\n      parallaxOcclusionMapping,\r\n      ambientLight: [0.3, 0.3, 0.3],\r\n      directionalLight: {\r\n        color: [0.4, 0.4, 0.4],\r\n        direction: [0.0, -1.0, 1.0]\r\n      },\r\n      pointLight: {\r\n        color: [1.0, 1.0, 1.0],\r\n        position: [0.0, 0.0, 0.0]\r\n      },\r\n      cameraPos: [0.0, 0.0, 0.0]\r\n    });\r\n  }\r\n\r\n  _geometry({ addSquare }) {\r\n    const f0 = [-1, -1, 1];\r\n    const f1 = [1, -1, 1];\r\n    const f2 = [1, 1, 1];\r\n    const f3 = [-1, 1, 1];\r\n    const b0 = [-1, -1, -1];\r\n    const b1 = [1, -1, -1];\r\n    const b2 = [1, 1, -1];\r\n    const b3 = [-1, 1, -1];\r\n    addSquare(f0, f1, f2, f3);  // front\r\n    addSquare(b1, b0, b3, b2);  // back\r\n    addSquare(b0, f0, f3, b3);  // left\r\n    addSquare(f1, b1, b2, f2);  // right\r\n    addSquare(b0, b1, f1, f0);  // top\r\n    addSquare(b2, b3, f3, f2);  // bottom\r\n  }\r\n}\r\n\r\nexport default BrickWallModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen } from '../lib/utility'\r\nimport BrickWallModel from '../models/BrickWallModel';\r\n\r\nclass BrickWallScene {\r\n  constructor() {\r\n    this.setOption = this.setOption.bind(this);\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n    this.renderOptions = {\r\n      showDiffuseMap: true,\r\n      showNormalMap: true,\r\n      showAmbientOcclusionMap: true,\r\n      parallaxHeightScale: 0.04,\r\n      parallaxSteps: 32,\r\n      parallaxOcclusionMapping: true\r\n    };\r\n    this.options = [\r\n      {\r\n        description: 'Brick cube with diffuse, normal, height, and ambient occlusion maps',\r\n        type: 'description'\r\n      },\r\n      {\r\n        name: 'Show Diffuse Map',\r\n        id: 'showDiffuseMap',\r\n        type: 'bool'\r\n      },\r\n      {\r\n        name: 'Show Normal Map',\r\n        id: 'showNormalMap',\r\n        type: 'bool'\r\n      },\r\n      {\r\n        name: 'Show Ambient Occlusion Map',\r\n        id: 'showAmbientOcclusionMap',\r\n        type: 'bool'\r\n      },\r\n      {\r\n        name: 'Parallax Height Scale',\r\n        id: 'parallaxHeightScale',\r\n        type: 'float',\r\n        min: 0.0,\r\n        max: 0.1\r\n      },\r\n      {\r\n        name: 'Parallax Steps',\r\n        id: 'parallaxSteps',\r\n        type: 'int',\r\n        min: 0,\r\n        max: 32\r\n      },\r\n      {\r\n        name: 'Use Parallax Occlusion Mapping',\r\n        id: 'parallaxOcclusionMapping',\r\n        type: 'bool'\r\n      }\r\n    ];\r\n    for (let i = 0; i < this.options.length; i++) {\r\n      this.options[i].value = this.renderOptions[this.options[i].id];\r\n    }\r\n    this.credits = [\r\n      'Textures created by João Paulo',\r\n      'link:https://3dtextures.me/about/'\r\n    ];\r\n  }\r\n\r\n  setOption(option, value) {\r\n    option.value = Number(value);\r\n    this.renderOptions[option.id] = option.value;\r\n  }\r\n\r\n  initScene(gl) {\r\n    const model = new BrickWallModel(gl);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model,\r\n          location: [0.0, 0.0, -5.5],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.4\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.2\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      mat4.rotate(modelMatrix, modelMatrix, rotation.angle, rotation.axis);\r\n    }\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix, this.renderOptions);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      rotation.angle += deltaTime * rotation.speed;\r\n    }\r\n  }\r\n}\r\n\r\nexport default BrickWallScene;\r\n","import Model from './Model';\r\nimport { getShape } from '../lib/utility';\r\n\r\nclass MaterialModel extends Model {\r\n  constructor(gl, shapeName) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.draw = this.draw.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: ({ addFaces }) => {\r\n        const shape = getShape(shapeName);\r\n        addFaces(shape.vertices, shape.faces);\r\n      },\r\n      shader: {\r\n        vertex: 'shaders/material_L/vertex.glsl',\r\n        fragment: 'shaders/material_L/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix, lights, material) {\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      lights,\r\n      material\r\n    });\r\n  }\r\n}\r\n\r\nexport default MaterialModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen, getMaterialList, getMaterial } from '../lib/utility'\r\nimport MaterialModel from '../models/MaterialModel';\r\n\r\nclass MaterialScene {\r\n  constructor() {\r\n    this.setOption = this.setOption.bind(this);\r\n    this.initScene = this.initScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n    this.materials = new Array(3).fill(0);\r\n    const materialList = getMaterialList();\r\n    this.options = [\r\n      {\r\n        description: 'Various solid geometries with various materials using Phong shading',\r\n        type: 'description'\r\n      },\r\n      {\r\n        name: 'Material 1',\r\n        type: 'select',\r\n        options: materialList\r\n      },\r\n      {\r\n        name: 'Material 2',\r\n        type: 'select',\r\n        options: materialList\r\n      },\r\n      {\r\n        name: 'Material 3',\r\n        type: 'select',\r\n        options: materialList\r\n      }\r\n    ];\r\n\r\n    this.setOption(this.options[1], 8);\r\n    this.setOption(this.options[2], 10);\r\n    this.setOption(this.options[3], 2);\r\n  }\r\n\r\n  setOption(option, value) {\r\n    option.value = Number(value);\r\n\r\n    if (option.name === 'Material 1') {\r\n      const materialName = option.options[option.value];\r\n      this.materials[0] = getMaterial(materialName);\r\n    }\r\n    else if (option.name === 'Material 2') {\r\n      const materialName = option.options[option.value];\r\n      this.materials[1] = getMaterial(materialName);\r\n    }\r\n    else if (option.name === 'Material 3') {\r\n      const materialName = option.options[option.value];\r\n      this.materials[2] = getMaterial(materialName);\r\n    }\r\n  }\r\n\r\n  initScene(gl) {\r\n    const model4 = new MaterialModel(gl, 'tetrahedron');\r\n    const model6 = new MaterialModel(gl, 'cube');\r\n    const model8 = new MaterialModel(gl, 'octahedron');\r\n    const model10 = new MaterialModel(gl, 'pentagonaltrapezohedron');\r\n    const model12 = new MaterialModel(gl, 'dodecahedron');\r\n    const model20 = new MaterialModel(gl, 'icosahedron');\r\n\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model: model4,\r\n          materialIndex: 1,\r\n          location: [-3.75, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model6,\r\n          materialIndex: 1,\r\n          location: [-2.25, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model8,\r\n          materialIndex: 1,\r\n          location: [-0.75, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model10,\r\n          materialIndex: 1,\r\n          location: [0.75, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model12,\r\n          materialIndex: 1,\r\n          location: [2.25, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model20,\r\n          materialIndex: 1,\r\n          location: [3.75, 0.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model4,\r\n          materialIndex: 0,\r\n          location: [-3.75, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model6,\r\n          materialIndex: 0,\r\n          location: [-2.25, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model8,\r\n          materialIndex: 0,\r\n          location: [-0.75, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model10,\r\n          materialIndex: 0,\r\n          location: [0.75, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model12,\r\n          materialIndex: 0,\r\n          location: [2.25, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model20,\r\n          materialIndex: 0,\r\n          location: [3.75, 2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model4,\r\n          materialIndex: 2,\r\n          location: [-3.75, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model6,\r\n          materialIndex: 2,\r\n          location: [-2.25, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model8,\r\n          materialIndex: 2,\r\n          location: [-0.75, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model10,\r\n          materialIndex: 2,\r\n          location: [0.75, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model12,\r\n          materialIndex: 2,\r\n          location: [2.25, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          model: model20,\r\n          materialIndex: 2,\r\n          location: [3.75, -2.0, -8.0],\r\n          rotations: [\r\n            {\r\n              angle: 0.0,\r\n              axis: [0, 1, 0],\r\n              speed: 0.8\r\n            },\r\n            {\r\n              angle: 0.0,\r\n              axis: [1, 0, 0],\r\n              speed: 0.4\r\n            }\r\n          ]\r\n        }\r\n      ],\r\n      camera: [0.0, 0.0, 0.0]\r\n    };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, scene.camera);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      mat4.rotate(modelMatrix, modelMatrix, rotation.angle, rotation.axis);\r\n    }\r\n\r\n    const lights = [\r\n      {\r\n        position: [10.0, -10.0, 0.0],\r\n        ambient: [0.2, 0.2, 0.2],\r\n        diffuse: [0.5, 0.5, 0.5],\r\n        specular: [0.9, 0.9, 0.9]\r\n      },\r\n      {\r\n        position: [-10.0, 10.0, 0.0],\r\n        ambient: [0.2, 0.2, 0.2],\r\n        diffuse: [0.5, 0.5, 0.5],\r\n        specular: [0.9, 0.9, 0.9]\r\n      }\r\n    ];\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix, lights, this.materials[actor.materialIndex]);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      rotation.angle += deltaTime * rotation.speed;\r\n    }\r\n  }\r\n}\r\n\r\nexport default MaterialScene;\r\n","import Model from './Model';\r\n\r\nclass RoomModel extends Model {\r\n  constructor(gl, map) {\r\n    super(gl);\r\n    this.gl = gl;\r\n    this.map = map;\r\n    this.draw = this.draw.bind(this);\r\n    this.update = this.update.bind(this);\r\n    this._geometry = this._geometry.bind(this);\r\n    this._initModel({\r\n      gl,\r\n      geometry: this._geometry,\r\n      textures: [\r\n        {\r\n          diffuse: 'images/Brick_Wall_017_basecolor.jpg',\r\n          normal: 'images/Brick_Wall_017_normal.jpg',\r\n          occlusion: 'images/Brick_Wall_017_ambientOcclusion.jpg'\r\n        },\r\n        {\r\n          diffuse: 'images/Tiles_035_basecolor.jpg',\r\n          normal: 'images/Tiles_035_normal.jpg',\r\n          occlusion: 'images/Tiles_035_ambientOcclusion.jpg'\r\n        },\r\n        {\r\n          diffuse: 'images/Wood_planks_011_basecolor.jpg',\r\n          normal: 'images/Wood_planks_011_normal.jpg',\r\n          occlusion: 'images/Wood_planks_011_ambientOcclusion.jpg'\r\n        }\r\n      ],\r\n      shader: {\r\n        vertex: 'shaders/texture_LDNO/vertex.glsl',\r\n        fragment: 'shaders/texture_LDNO/fragment.glsl'\r\n      }\r\n    });\r\n  }\r\n\r\n  draw(projectionMatrix, viewMatrix, modelMatrix, options) {\r\n    const {\r\n      showDiffuseMap,\r\n      showNormalMap,\r\n      showAmbientOcclusionMap,\r\n      ambientLight,\r\n      directionalLight,\r\n      pointLight,\r\n      cameraPos\r\n    } = options;\r\n    this._drawModel({\r\n      gl: this.gl,\r\n      model: this.model,\r\n      projectionMatrix,\r\n      viewMatrix,\r\n      modelMatrix,\r\n      showDiffuseMap,\r\n      showNormalMap,\r\n      showAmbientOcclusionMap,\r\n      ambientLight,\r\n      directionalLight,\r\n      pointLight,\r\n      cameraPos\r\n    });\r\n  }\r\n\r\n  update(map) {\r\n    this.map = map;\r\n    this._updateModel(this._geometry);\r\n  }\r\n\r\n  _geometry({ addSquare }) {\r\n    const { width, height, data } = this.map;\r\n    const ofs_x = -width / 2;\r\n    const ofs_z = -height / 2;\r\n    for (let z = 0; z < height; z++) {\r\n      for (let x = 0; x < width; x++) {\r\n        const left = x + ofs_x;\r\n        const right = left + 1;\r\n        const back = z + ofs_z;\r\n        const front = back + 1;\r\n        const top = 1;\r\n        const bottom = 0;\r\n\r\n        const f0 = [left, top, front];\r\n        const f1 = [right, top, front];\r\n        const f2 = [right, bottom, front];\r\n        const f3 = [left, bottom, front];\r\n        const b0 = [left, top, back];\r\n        const b1 = [right, top, back];\r\n        const b2 = [right, bottom, back];\r\n        const b3 = [left, bottom, back];\r\n\r\n        if (data[z][x] === 0) {\r\n          addSquare(b2, b3, f3, f2, { bufferIndex: 1 });\r\n          addSquare(b0, b1, f1, f0, { bufferIndex: 2 });\r\n\r\n          if (z === 0 || data[z - 1][x] !== 0) {\r\n            addSquare(b1, b0, b3, b2);\r\n          }\r\n\r\n          if (x === 0 || data[z][x - 1] !== 0) {\r\n            addSquare(b0, f0, f3, b3);\r\n          }\r\n\r\n          if (z === height - 1 || data[z + 1][x] !== 0) {\r\n            addSquare(f0, f1, f2, f3);\r\n          }\r\n\r\n          if (x === width - 1 || data[z][x + 1] !== 0) {\r\n            addSquare(f1, b1, b2, f2);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nexport default RoomModel;\r\n","import * as mat4 from 'gl-matrix/mat4';\r\nimport { clearScreen, degreesToRadians, generateMaze } from '../lib/utility'\r\nimport RoomModel from '../models/RoomModel';\r\n\r\nclass RoomScene {\r\n  constructor() {\r\n    this.setOption = this.setOption.bind(this);\r\n    this.mouseMovement = this.mouseMovement.bind(this);\r\n    this.keyboardState = this.keyboardState.bind(this);\r\n    this.initScene = this.initScene.bind(this);\r\n    this.updateScene = this.updateScene.bind(this);\r\n    this.drawScene = this.drawScene.bind(this);\r\n    this.renderOptions = {\r\n      showDiffuseMap: true,\r\n      showNormalMap: true,\r\n      showAmbientOcclusionMap: true,\r\n      ambientLight: [0.1, 0.1, 0.1],\r\n      directionalLight: {\r\n        color: [0.0, 0.0, 0.0],\r\n        direction: [0.0, 0.0, 0.0]\r\n      },\r\n      pointLight: {\r\n        color: [0.6, 0.6, 0.6],\r\n        position: [0.0, 1.0, 0.0]\r\n      }\r\n    };\r\n    this.options = [\r\n      {\r\n        description: 'Explorable random maze geometry with diffuse, normal, and ambient occlusion maps',\r\n        type: 'description'\r\n      },\r\n      {\r\n        name: 'Show Diffuse Map',\r\n        id: 'showDiffuseMap',\r\n        type: 'bool'\r\n      },\r\n      {\r\n        name: 'Show Normal Map',\r\n        id: 'showNormalMap',\r\n        type: 'bool'\r\n      },\r\n      {\r\n        name: 'Show Ambient Occlusion Map',\r\n        id: 'showAmbientOcclusionMap',\r\n        type: 'bool'\r\n      },\r\n      {\r\n        name: 'Update Geometry',\r\n        type: 'function',\r\n        function: this.updateScene\r\n      }\r\n    ];\r\n    for (let i = 0; i < this.options.length; i++) {\r\n      this.options[i].value = this.renderOptions[this.options[i].id];\r\n    }\r\n    this.credits = [\r\n      'Textures created by João Paulo',\r\n      'link:https://3dtextures.me/about/',\r\n      '',\r\n      'Maze generation is based on this article',\r\n      'link:https://journal.stuffwithstuff.com/2014/12/21/rooms-and-mazes/'\r\n    ];\r\n    this.movement = { front: 0.0, side: 0.0 };\r\n  }\r\n\r\n  setOption(option, value) {\r\n    option.value = Number(value);\r\n    this.renderOptions[option.id] = option.value;\r\n  }\r\n\r\n  mouseMovement(x, y) {\r\n    const camera = this.scene.camera;\r\n    camera.rotations[0].angle -= x * 0.001;\r\n    camera.rotations[1].angle -= y * 0.001;\r\n  }\r\n\r\n  keyboardState(keys) {\r\n    let front = 0.0;\r\n    if (keys['w']) {\r\n      front -= 1.0;\r\n    }\r\n    if (keys['s']) {\r\n      front += 1.0;\r\n    }\r\n    let side = 0.0;\r\n    if (keys['a']) {\r\n      side -= 1.0;\r\n    }\r\n    if (keys['d']) {\r\n      side += 1.0;\r\n    }\r\n    this.movement.front = front;\r\n    this.movement.side = side;\r\n  }\r\n\r\n  initScene(gl) {\r\n    const map = generateMaze(11, 11);\r\n    const { location, angle } = this._findStartLocation(map);\r\n    const model = new RoomModel(gl, map);\r\n    this.scene = {\r\n      actors: [\r\n        {\r\n          model,\r\n          location: [0.0, 0.0, 0.0],\r\n          rotations: []\r\n        }\r\n      ],\r\n      camera: {\r\n        location,\r\n        rotations: [\r\n          {\r\n            angle,\r\n            axis: [0, 1, 0]\r\n          },\r\n          {\r\n            angle: 0.0,\r\n            axis: [1, 0, 0]\r\n          }\r\n        ]\r\n      }\r\n    };\r\n  }\r\n\r\n  updateScene() {\r\n    const map = generateMaze(11, 11);\r\n    const { location, angle } = this._findStartLocation(map);\r\n    this.scene.camera.location = location;\r\n    this.scene.camera.rotations[0].angle = angle;\r\n    this.scene.actors[0].model.update(map);\r\n  }\r\n\r\n  _findStartLocation(map) {\r\n    const { width, height, data } = map;\r\n    const isSolid = (x, y) => {\r\n      if (x < 0 || x >= width || y < 0 || y >= height) {\r\n        return true;\r\n      }\r\n      if (data[y][x] !== 0) {\r\n        return true;\r\n      }\r\n      return false;\r\n    }\r\n    const ofs_x = -width / 2;\r\n    const ofs_z = -height / 2;\r\n    for (let z = 0; z < height; z++) {\r\n      for (let x = 0; x < width; x++) {\r\n        if (data[z][x] === 0) {\r\n          let angle = 0.0;\r\n          const matrix = [];\r\n          for (let r = -1; r < 2; r++) {\r\n            for (let c = -1; c < 2; c++) {\r\n              if (isSolid(x + c, z + r)) {\r\n                matrix.push('1');\r\n              } else {\r\n                matrix.push('0');\r\n              }\r\n            }\r\n          }\r\n          if (matrix[0] === '0') {\r\n            angle = -45.0;\r\n          } else if (matrix[2] === '0') {\r\n            angle = 45.0;\r\n          } else if (matrix[6] === '0') {\r\n            angle = -225.0;\r\n          } else if (matrix[8] === '0') {\r\n            angle = 225.0;\r\n          } else if (matrix[3] === '0') {\r\n            angle = 90.0;\r\n          } else if (matrix[5] === '0') {\r\n            angle = -90.0;\r\n          } else if (matrix[7] === '0') {\r\n            angle = 180.0;\r\n          }\r\n          return { location: [x + ofs_x + 0.5, 0.5, z + ofs_z + 0.5], angle: degreesToRadians(angle) };\r\n        }\r\n      }\r\n    }\r\n    return { location: [0.0, 0.5, 0.0] };\r\n  }\r\n\r\n  drawScene(gl, deltaTime) {\r\n    const scene = this.scene;\r\n    const camera = scene.camera;\r\n\r\n    clearScreen(gl);\r\n\r\n    const fieldOfView = 45 * Math.PI / 180;\r\n    const aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\r\n    const zNear = 0.1;\r\n    const zFar = 100.0;\r\n    const projectionMatrix = mat4.create();\r\n    mat4.perspective(projectionMatrix, fieldOfView, aspect, zNear, zFar);\r\n\r\n    const viewMatrix = mat4.create();\r\n    mat4.translate(viewMatrix, viewMatrix, camera.location);\r\n    for (let i = 0; i < camera.rotations.length; i++) {\r\n      const rotation = camera.rotations[i];\r\n      mat4.rotate(viewMatrix, viewMatrix, rotation.angle, rotation.axis);\r\n    }\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    this.renderOptions.cameraPos = camera.location;\r\n    this.renderOptions.pointLight.position = camera.location;\r\n\r\n    for (let i = 0; i < scene.actors.length; i++) {\r\n      const actor = scene.actors[i];\r\n      this._renderActor(projectionMatrix, viewMatrix, actor);\r\n      this._animateActor(deltaTime, actor);\r\n    }\r\n\r\n    mat4.identity(viewMatrix);\r\n    mat4.rotate(viewMatrix, viewMatrix, camera.rotations[0].angle, camera.rotations[0].axis);\r\n    mat4.invert(viewMatrix, viewMatrix)\r\n\r\n    camera.location[0] += deltaTime * this.movement.front * viewMatrix[2];\r\n    camera.location[1] += deltaTime * this.movement.front * viewMatrix[6];\r\n    camera.location[2] += deltaTime * this.movement.front * viewMatrix[10];\r\n\r\n    camera.location[0] += deltaTime * this.movement.side * viewMatrix[0];\r\n    camera.location[1] += deltaTime * this.movement.side * viewMatrix[4];\r\n    camera.location[2] += deltaTime * this.movement.side * viewMatrix[8];\r\n  }\r\n\r\n  _renderActor(projectionMatrix, viewMatrix, actor) {\r\n    const model = actor.model;\r\n\r\n    const modelMatrix = mat4.create();\r\n    mat4.translate(modelMatrix, modelMatrix, actor.location);\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      mat4.rotate(modelMatrix, modelMatrix, rotation.angle, rotation.axis);\r\n    }\r\n\r\n    model.draw(projectionMatrix, viewMatrix, modelMatrix, this.renderOptions);\r\n  }\r\n\r\n  _animateActor(deltaTime, actor) {\r\n    for (let i = 0; i < actor.rotations.length; i++) {\r\n      const rotation = actor.rotations[i];\r\n      rotation.angle += deltaTime * rotation.speed;\r\n    }\r\n  }\r\n}\r\n\r\nexport default RoomScene;\r\n","import ColorScene from '../scenes/ColorScene';\r\nimport TexturedCubeScene from '../scenes/TexturedCubeScene';\r\nimport MazeScene from '../scenes/MazeScene';\r\nimport BrickWallScene from '../scenes/BrickWallScene';\r\nimport MaterialScene from '../scenes/MaterialScene';\r\nimport RoomScene from '../scenes/RoomScene';\r\n\r\nclass SceneManager {\r\n  constructor(canvas) {\r\n    this.canvas = canvas;\r\n\r\n    this.resizeViewport = this.resizeViewport.bind(this);\r\n    this.getScene = this.getScene.bind(this);\r\n    this.previousScene = this.previousScene.bind(this);\r\n    this.nextScene = this.nextScene.bind(this);\r\n    this.renderScene = this.renderScene.bind(this);\r\n\r\n    this.scenes = [\r\n      { init: false, render: new ColorScene() },\r\n      { init: false, render: new TexturedCubeScene() },\r\n      { init: false, render: new MaterialScene() },\r\n      { init: false, render: new MazeScene() },\r\n      { init: false, render: new BrickWallScene() },\r\n      { init: false, render: new RoomScene() }\r\n    ];\r\n    this.sceneIndex = 0;\r\n\r\n    this.gl = canvas.getContext('webgl');\r\n    if (this.gl === null) {\r\n      alert(\"Unable to initialize WebGL. Your browser or machine may not support it.\");\r\n    } else {\r\n      this.resizeViewport();\r\n      this.gl.enable(this.gl.CULL_FACE);\r\n      this.gl.cullFace(this.gl.BACK);\r\n      for (let i = 0; i < this.scenes.length; i++) {\r\n        this.initScene(this.scenes[i]);\r\n      }\r\n    }\r\n  }\r\n\r\n  resizeViewport() {\r\n    const canvas = this.canvas;\r\n    const rect = canvas.getBoundingClientRect()\r\n    canvas.width = rect.width;\r\n    canvas.height = rect.height;\r\n    this.gl.viewport(0, 0, canvas.width, canvas.height);\r\n  }\r\n\r\n  initScene(scene) {\r\n    if (!scene.init) {\r\n      scene.init = true;\r\n      scene.render.initScene(this.gl);\r\n      if (scene.render.options) {\r\n        scene.options = scene.render.options;\r\n        scene.setOption = scene.render.setOption;\r\n      }\r\n      if (scene.render.credits) {\r\n        scene.credits = scene.render.credits;\r\n      }\r\n      if (scene.render.mouseMovement) {\r\n        scene.mouseMovement = scene.render.mouseMovement;\r\n      }\r\n      if (scene.render.keyboardState) {\r\n        scene.keyboardState = scene.render.keyboardState;\r\n      }\r\n    }\r\n  }\r\n\r\n  getScene() {\r\n    return this.scenes[this.sceneIndex];\r\n  }\r\n\r\n  previousScene() {\r\n    this.sceneIndex = (this.sceneIndex - 1) % this.scenes.length;\r\n    if (this.sceneIndex < 0) {\r\n      this.sceneIndex = this.scenes.length - 1;\r\n    }\r\n    const scene = this.scenes[this.sceneIndex];\r\n    this.initScene(scene);\r\n    return this.scenes[this.sceneIndex];\r\n  }\r\n\r\n  nextScene() {\r\n    this.sceneIndex = (this.sceneIndex + 1) % this.scenes.length;\r\n    const scene = this.scenes[this.sceneIndex];\r\n    this.initScene(scene);\r\n    return this.scenes[this.sceneIndex];\r\n  }\r\n\r\n  renderScene(timeStamp) {\r\n    timeStamp *= 0.001;\r\n    if (!this.timeStamp) {\r\n      this.timeStamp = timeStamp;\r\n    }\r\n    const deltaTime = timeStamp - this.timeStamp;\r\n    this.timeStamp = timeStamp;\r\n    const scene = this.scenes[this.sceneIndex];\r\n    scene.fps = Math.round(1.0 / deltaTime);\r\n    scene.render.drawScene(this.gl, deltaTime);\r\n  }\r\n}\r\n\r\nexport default SceneManager;\r\n","import React from 'react';\r\nimport Message from './Message';\r\nimport Controls from './Controls';\r\nimport Credits from './Credits';\r\nimport SceneManager from '../lib/SceneManager';\r\n\r\nclass App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.onResize = this.onResize.bind(this);\r\n    this.onKeyDown = this.onKeyDown.bind(this);\r\n    this.onKeyUp = this.onKeyUp.bind(this);\r\n    this.onMouseMove = this.onMouseMove.bind(this);\r\n    this.onLockChange = this.onLockChange.bind(this);\r\n    this.onClickCanvas = this.onClickCanvas.bind(this);\r\n    this.onChange = this.onChange.bind(this);\r\n    this.onClickPrevious = this.onClickPrevious.bind(this);\r\n    this.onClickNext = this.onClickNext.bind(this);\r\n    this.onClickMessage = this.onClickMessage.bind(this);\r\n    this.onAnimationFrame = this.onAnimationFrame.bind(this);\r\n    this.state = {\r\n      showControls: false\r\n    }\r\n    this.keys = {};\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.sceneManager = new SceneManager(this.canvas);\r\n    const scene = this.sceneManager.getScene();\r\n    const note = scene.mouseMovement ? 'Click the canvas to explore the scene' : undefined;\r\n    this.setState({ scene, note });\r\n    this.canvas.requestPointerLock = this.canvas.requestPointerLock || this.canvas.mozRequestPointerLock;\r\n    document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock;\r\n    this.frame = window.requestAnimationFrame(this.onAnimationFrame);\r\n    window.addEventListener('resize', this.onResize);\r\n    window.addEventListener('keydown', this.onKeyDown);\r\n    window.addEventListener('keyup', this.onKeyUp);\r\n    document.addEventListener('pointerlockchange', this.onLockChange);\r\n    document.addEventListener('mozpointerlockchange', this.onLockChange);\r\n    this.showMessage(['Press Escape to toggle menu', 'Press Page Up for previous screen', 'Press Page Down for next screen']);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.cancelAnimationFrame(this.frame);\r\n    window.removeEventListener('resize', this.onResize);\r\n    window.removeEventListener('keydown', this.onKeyDown);\r\n    window.removeEventListener('keyup', this.onKeyUp);\r\n    document.removeEventListener('pointerlockchange', this.onLockChange);\r\n    document.removeEventListener('mozpointerlockchange', this.onLockChange);\r\n  }\r\n\r\n  cancelLock() {\r\n    this.captureMouse = false;\r\n    this.captureKeys = false;\r\n    document.exitPointerLock();\r\n  }\r\n\r\n  onResize() {\r\n    this.sceneManager.resizeViewport();\r\n  }\r\n\r\n  onKeyDown(event) {\r\n    event.preventDefault();\r\n    if (!this.keys[event.key]) {\r\n      this.onKeyPress(event.key);\r\n      this.keys[event.key] = true;\r\n      if (this.captureKeys) {\r\n        this.state.scene.keyboardState(this.keys);\r\n      }\r\n    }\r\n  }\r\n\r\n  onKeyUp(event) {\r\n    event.preventDefault();\r\n    this.keys[event.key] = false;\r\n    if (this.captureKeys) {\r\n      this.state.scene.keyboardState(this.keys);\r\n    }\r\n  }\r\n\r\n  onKeyPress(key) {\r\n    if (key === 'Escape') {\r\n      if (this.messageTimer) {\r\n        this.cancelMessage();\r\n      } else {\r\n        this.setState({ showControls: !this.state.showControls });\r\n      }\r\n    } else if (key === 'PageUp') {\r\n      this.cancelLock();\r\n      const scene = this.sceneManager.previousScene();\r\n      const note = scene.mouseMovement ? 'Click the canvas to explore the scene' : undefined;\r\n      this.setState({ scene, note });\r\n    } else if (key === 'PageDown') {\r\n      this.cancelLock();\r\n      const scene = this.sceneManager.nextScene();\r\n      const note = scene.mouseMovement ? 'Click the canvas to explore the scene' : undefined;\r\n      this.setState({ scene, note });\r\n    }\r\n  }\r\n\r\n  onMouseMove(event) {\r\n    if (this.captureMouse) {\r\n      this.state.scene.mouseMovement(event.movementX, event.movementY);\r\n    }\r\n  }\r\n\r\n  onLockChange(event) {\r\n    event.preventDefault();\r\n    if (document.pointerLockElement === this.canvas || document.mozPointerLockElement === this.canvas) {\r\n      document.addEventListener(\"mousemove\", this.onMouseMove);\r\n      this.captureMouse = true;\r\n      if (this.state.scene.keyboardState) {\r\n        this.captureKeys = true;\r\n      }\r\n    } else {\r\n      document.removeEventListener(\"mousemove\", this.onMouseMove);\r\n      this.captureMouse = false;\r\n      this.captureKeys = false;\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n\r\n  onClickCanvas(event) {\r\n    event.preventDefault();\r\n    if (this.state.scene.mouseMovement) {\r\n      this.canvas.requestPointerLock();\r\n      this.setState({ showControls: false, note: undefined });\r\n    }\r\n  }\r\n\r\n  onChange(option, value) {\r\n    if (value !== option.value) {\r\n      this.state.scene.setOption(option, value);\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n\r\n  onClickPrevious(event) {\r\n    event.preventDefault();\r\n    this.cancelLock();\r\n    const scene = this.sceneManager.previousScene();\r\n    const note = scene.mouseMovement ? 'Click the canvas to explore the scene' : undefined;\r\n    this.setState({ scene, note });\r\n  }\r\n\r\n  onClickNext(event) {\r\n    event.preventDefault();\r\n    this.cancelLock();\r\n    const scene = this.sceneManager.nextScene();\r\n    const note = scene.mouseMovement ? 'Click the canvas to explore the scene' : undefined;\r\n    this.setState({ scene, note });\r\n  }\r\n\r\n  onClickMessage(event) {\r\n    event.preventDefault();\r\n    if (this.messageTimer) {\r\n      this.cancelMessage();\r\n    }\r\n  }\r\n\r\n  showMessage(message) {\r\n    this.setState({ message });\r\n    this.messageTimer = setTimeout(this.clearMessage.bind(this), 10000);\r\n  }\r\n\r\n  clearMessage() {\r\n    this.setState({ message: undefined });\r\n    this.messageTimer = undefined;\r\n  }\r\n\r\n  cancelMessage() {\r\n    clearTimeout(this.messageTimer);\r\n    this.clearMessage();\r\n  }\r\n\r\n  onAnimationFrame(timeStamp) {\r\n    this.sceneManager.renderScene(timeStamp);\r\n    this.setState({ fps: this.state.scene.fps });\r\n    this.frame = window.requestAnimationFrame(this.onAnimationFrame);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"screen\">\r\n        <canvas id=\"canvas\" ref={elem => this.canvas = elem} onClick={this.onClickCanvas}></canvas>\r\n        <div id=\"note\">\r\n          {this.state.fps ? (<div>{this.state.fps} fps</div>) : null}\r\n          {this.state.note ? (<div>{this.state.note}</div>) : null}\r\n        </div>\r\n        <Message message={this.state.message} onClick={this.onClickMessage} />\r\n        <Controls show={this.state.showControls} onClickPrevious={this.onClickPrevious} onClickNext={this.onClickNext} onChange={this.onChange} options={this.state.scene ? this.state.scene.options : undefined} />\r\n        <Credits show={this.state.showControls} credits={this.state.scene ? this.state.scene.credits : undefined} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n  // [::1] is the IPv6 localhost address.\n  window.location.hostname === '[::1]' ||\n  // 127.0.0.0/8 are considered localhost for IPv4.\n  window.location.hostname.match(\n    /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n  )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n            'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}